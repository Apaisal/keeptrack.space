try{var recorder=new CanvasRecorder(document.getElementById("canvas"))}catch(e){console.log(e)}const bodyDOM=$("#bodyDOM");var dropdownInstance;const mapImageDOM=$("#map-image"),mapMenuDOM=$("#map-menu"),rightBtnMenuDOM=$("#right-btn-menu"),rightBtnSaveDOM=$("#save-rmb"),rightBtnViewDOM=$("#view-rmb"),rightBtnEditDOM=$("#edit-rmb"),rightBtnCreateDOM=$("#create-rmb"),rightBtnDrawDOM=$("#draw-rmb"),rightBtnColorsDOM=$("#colors-rmb"),rightBtnEarthDOM=$("#earth-rmb"),rightBtnSaveMenuDOM=$("#save-rmb-menu"),rightBtnViewMenuDOM=$("#view-rmb-menu"),rightBtnEditMenuDOM=$("#edit-rmb-menu"),rightBtnCreateMenuDOM=$("#create-rmb-menu"),rightBtnDrawMenuDOM=$("#draw-rmb-menu"),rightBtnColorsMenuDOM=$("#colors-rmb-menu"),rightBtnEarthMenuDOM=$("#earth-rmb-menu");var lkpassed=!1;$.ajaxSetup({cache:!1});var isAnalysisMenuOpen=!1,updateInterval=1e3,speedModifier=1;(function(){function e(e,t){var a="   "+e;return a.substr(a.length-t)}function t(e,a){return e.length<a?t("0"+e,a):e}function a(){}function s(e){if((!(I.length<=0)||u)&&(db.log("_updateNextPassOverlay"),timeManager.now>1*d+1e4&&-1===objectManager.selectedSat&&!isDragging&&zoomLevel===zoomTarget||e)){var t=timeManager.propTime();D=[],D.push("<div>");for(var a=0;a<I.length;a++){var s=satSet.getSatInViewOnly(satSet.getIdFromObjNum(I[a].SCC_NUM)).inview;if(!(I[a].time-t<-3e5)||s){var n=timeManager.dateFormat(I[a].time,"isoTime",!0);s&&I[a].time-t<18e5&&t-I[a].time<18e5?D.push('<div class="row"><h5 class="center-align watchlist-object link" style="color: yellow">'+I[a].SCC_NUM+": "+n+"</h5></div>"):I[a].time-t<6e5&&t-I[a].time<12e5?D.push('<div class="row"><h5 class="center-align watchlist-object link" style="color: blue">'+I[a].SCC_NUM+": "+n+"</h5></div>"):I[a].time-t>0&&D.push('<div class="row"><h5 class="center-align watchlist-object link" style="color: white">'+I[a].SCC_NUM+": "+n+"</h5></div>")}}D.push("</div>"),document.getElementById("info-overlay-content").innerHTML=D.join(""),d=timeManager.now}}function n(){if(!(R.length<=0)){db.log("_checkWatchlist");for(var e=0;e<R.length;e++){var t=satSet.getSat(R[e]);1===t.inview&&!1===j[e]&&(j[e]=!0,orbitManager.addInViewOrbit(R[e])),0===t.inview&&!0===j[e]&&(j[e]=!1,orbitManager.removeInViewOrbit(R[e]))}for(e=0;e<j.length;e++)if(!0===j[e])return void settingsManager.themes.redTheme();settingsManager.themes.blueTheme()}}function o(){if(-1!==objectManager.selectedSat){db.log("_updateSelectBox",!0);var e=satSet.getSat(objectManager.selectedSat);if(!e.static&&1*timeManager.now>1*g+updateInterval){e.missile?N.currentTEARR=missileManager.getMissileTEARR(e):objectManager.isSensorManagerLoaded&&e.getTEARR(),satellite.degreesLong(N.currentTEARR.lon)>=0?$("#sat-longitude").html(satellite.degreesLong(N.currentTEARR.lon).toFixed(3)+"°E"):$("#sat-longitude").html((-1*satellite.degreesLong(N.currentTEARR.lon)).toFixed(3)+"°W"),satellite.degreesLat(N.currentTEARR.lat)>=0?$("#sat-latitude").html(satellite.degreesLat(N.currentTEARR.lat).toFixed(3)+"°N"):$("#sat-latitude").html((-1*satellite.degreesLat(N.currentTEARR.lat)).toFixed(3)+"°S");var t=timeManager.getDayOfYear(timeManager.propTimeVar);$("#jday").html(t),settingsManager.isMapMenuOpen&&timeManager.now>settingsManager.lastMapUpdateTime+3e4&&(N.updateMap(),settingsManager.lastMapUpdateTime=timeManager.now),e.missile?$("#sat-altitude").html(N.currentTEARR.alt.toFixed(2)+" km"):($("#sat-altitude").html(e.getAltitude().toFixed(2)+" km"),$("#sat-velocity").html(e.velocity.total.toFixed(2)+" km/s")),objectManager.isSensorManagerLoaded?N.currentTEARR.inview?($("#sat-azimuth").html(N.currentTEARR.azimuth.toFixed(0)+"°"),$("#sat-elevation").html(N.currentTEARR.elevation.toFixed(1)+"°"),$("#sat-range").html(N.currentTEARR.range.toFixed(2)+" km")):($("#sat-azimuth").html("Out of FOV"),$("#sat-azimuth").prop("title","Azimuth: "+N.currentTEARR.azimuth.toFixed(0)+"°"),$("#sat-elevation").html("Out of FOV"),$("#sat-elevation").prop("title","Elevation: "+N.currentTEARR.elevation.toFixed(1)+"°"),$("#sat-range").html("Out of FOV"),$("#sat-range").prop("title","Range: "+N.currentTEARR.range.toFixed(2)+" km")):($("#sat-azimuth").parent().hide(),$("#sat-elevation").parent().hide(),$("#sat-range").parent().hide()),objectManager.isSensorManagerLoaded?sensorManager.checkSensorSelected()?(objectManager.selectedSat===lastselectedSat||e.missile||$("#sat-nextpass").html(satellite.nextpass(e)),lastselectedSat=objectManager.selectedSat):$("#sat-nextpass").html("Unavailable"):$("#sat-nextpass").parent().hide(),g=timeManager.now}}}function r(){if(settingsManager.isMobileModeEnabled){if(db.log("_mobileScreenControls",!0),""===B)return;"zoom-in"===B&&(zoomTarget-=.0025,zoomTarget<0&&(zoomTarget=0)),"zoom-out"===B&&(zoomTarget+=.0025,zoomTarget>1&&(zoomTarget=1))}}function i(e){db.log("getRGBA");var[t,a,s,n]=e.match(/[\d\.]+/g);return t=parseInt(t)/255,a=parseInt(a)/255,s=parseInt(s)/255,n=parseFloat(n),[t,a,s,n]}function l(e){return db.log("_rgbCSS"),`rgba(${255*e[0]},${255*e[1]},${255*e[2]},${e[3]})`}var c,g=0,d=0,m=!1,u=!1,h=!1,b=!1,p=!1,S=!1,f=!1,C=!1,v=!1,y=!1,k=!1,w=!1,T=!1,O=!1,x=!1,F=!1,L=!1,R=[],j=[],I=[],E=null,N={saveVariable:(e,t)=>{db.log("saveVariable"),t=void 0===t?"variable.txt":t,e=JSON.stringify(e);var a=new Blob([e],{type:"text/plain;charset=utf-8"});saveAs(a,t)},saveCsv:(e,t)=>{db.log("uiManager.saveCsv");const a=(e,t)=>null===t?"":t,s=Object.keys(e[0]);let n=e.map(e=>s.map(t=>JSON.stringify(e[t],a)).join(","));n.unshift(s.join(",")),n=n.join("\r\n");var o=new Blob([n],{type:"text/plain;charset=utf-8"});saveAs(o,`${t}.csv`)}},B="";$(document).ready(function(){function B(e){function a(t){function a(e){switch(e){case"Jan":return 0;case"Feb":return 1;case"Mar":return 2;case"Apr":return 3;case"May":return 4;case"Jun":return 5;case"Jul":return 6;case"Aug":return 7;case"Sep":return 8;case"Oct":return 9;case"Nov":return 10;case"Dec":return 11}}var s=t[e][4].split(" "),n=s[3].split(":"),o=parseInt(s[0]),r=a(s[1]),i=parseInt(s[2]),l=parseInt(n[0]),c=parseInt(n[1]),g=parseInt(n[2]),d=new Date(o,r,i,l,c,g);d.setUTCDate(i),d.setUTCHours(l);var m=new Date;timeManager.propOffset=d-m,cameraManager.camSnapMode=!1,satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+1..toString()}),timeManager.propRealTime=Date.now(),timeManager.propTime()}db.log("_socrates"),-1===e&&0===U.length&&0===V.length&&$.get("/SOCRATES.htm",function(e){var a=$("[name='CATNR1']",e).closest("tr"),s=$("[name='CATNR2']",e).closest("tr");a.each(function(e,t){var a=[];$(this).find("td").each(function(e,t){a.push(t.textContent)}),U.push(a)}),s.each(function(e,t){var a=[];$(this).find("td").each(function(e,t){a.push(t.textContent)}),V.push(a)});var n=document.getElementById("socrates-table");n.innerHTML="";var o=n.insertRow(),r=o.insertCell();r.appendChild(document.createTextNode("Time")),r.setAttribute("style","text-decoration: underline");var i=o.insertCell();i.appendChild(document.createTextNode("#1")),i.setAttribute("style","text-decoration: underline");var l=o.insertCell();l.appendChild(document.createTextNode("#2")),l.setAttribute("style","text-decoration: underline");for(var c=0;c<20;c++){o=n.insertRow(),o.setAttribute("class","socrates-object link"),o.setAttribute("hiddenrow",c),r=o.insertCell();var g=V[c][4].split(" "),d=g[3].split(":"),m=d[2].split(".");r.appendChild(document.createTextNode(g[2]+" "+g[1]+" "+g[0]+" - "+t(d[0],2)+":"+t(d[1],2)+":"+t(m[0],2)+"Z")),i=o.insertCell(),i.appendChild(document.createTextNode(U[c][1])),l=o.insertCell(),l.appendChild(document.createTextNode(V[c][0]))}}),-1!==e&&(a(V),searchBox.doSearch(U[e][1]+","+V[e][0]),settingsManager.socratesOnSatCruncher=satSet.getIdFromObjNum(U[e][1]))}function D(e){switch(db.log("_bottomIconPress"),db.log(e.currentTarget.id),settingsManager.isOfficialWebsite&&ga("send","event","Bottom Icon",e.currentTarget.id,"Selected"),e.currentTarget.id){case"menu-membership":N.loginPopup();break;case"menu-sensor-list":if(m){N.hideSideMenus(),m=!1;break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#sensor-list-menu").effect("slide",{direction:"left",mode:"show"},1e3),m=!0,$("#menu-sensor-list").addClass("bmenu-item-selected");break;case"menu-info-overlay":if(!sensorManager.checkSensorSelected()){N.toast("Select a Sensor First!","caution",!0),$("#menu-info-overlay:animated").length||$("#menu-info-overlay").effect("shake",{distance:10});break}if(u){u=!1,N.hideSideMenus();break}if(0===R.length&&!E){N.toast("Add Satellites to Watchlist!","caution"),I=[];break}N.hideSideMenus(),0===I.length||c>timeManager.now||new Date(1*c+864e5)<timeManager.now||E?$("#loading-screen").fadeIn(1e3,function(){I=[];for(var e=0;e<R.length;e++)I.push(satSet.getSatExtraOnly(R[e]));I=satellite.nextpassList(I),I.sort(function(e,t){return new Date(e.time)-new Date(t.time)}),c=timeManager.now,d=0,s(!0),$("#loading-screen").fadeOut("slow"),E=!1}):s(!0),$("#info-overlay-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#menu-info-overlay").addClass("bmenu-item-selected"),u=!0;break;case"menu-sensor-info":if(!sensorManager.checkSensorSelected()){adviceList.sensorInfoDisabled(),N.toast("Select a Sensor First!","caution"),$("#menu-sensor-info:animated").length||$("#menu-sensor-info").effect("shake",{distance:10});break}if(p){N.hideSideMenus(),p=!1;break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),N.getsensorinfo(),$("#sensor-info-menu").effect("slide",{direction:"left",mode:"show"},1e3),p=!0,$("#menu-sensor-info").addClass("bmenu-item-selected");break;case"menu-lookangles":if(!settingsManager.isMembersOnly){N.loginPopup();break}if(isLookanglesMenuOpen){isLookanglesMenuOpen=!1,N.hideSideMenus();break}{let e=satSet.getSatExtraOnly(objectManager.selectedSat);if(null==e)return;if(!sensorManager.checkSensorSelected()||e.static||e.missile||-1===objectManager.selectedSat){adviceList.lookanglesDisabled(),$("#menu-lookangles:animated").length||$("#menu-lookangles").effect("shake",{distance:10});break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),isLookanglesMenuOpen=!0,$("#loading-screen").fadeIn(1e3,function(){satellite.getlookangles(e),$("#menu-lookangles").addClass("bmenu-item-selected"),$("#loading-screen").fadeOut("slow"),$("#lookangles-menu").effect("slide",{direction:"left",mode:"show"},1e3)});break}case"menu-dops":if(!settingsManager.isMembersOnly){N.loginPopup();break}if(isDOPMenuOpen){isDOPMenuOpen=!1,N.hideSideMenus();break}N.hideSideMenus(),isDOPMenuOpen=!0,$("#loading-screen").fadeIn(1e3,function(){var e=1*$("#dops-lat").val(),t=1*$("#dops-lon").val(),a=1*$("#dops-alt").val(),s=1*$("#dops-el").val();settingsManager.gpsElevationMask=s,satellite.getDOPsTable(e,t,a),$("#menu-dops").addClass("bmenu-item-selected"),$("#loading-screen").fadeOut("slow"),$("#dops-menu").effect("slide",{direction:"left",mode:"show"},1e3)});break;case"menu-watchlist":if(S){S=!1,$("#menu-watchlist").removeClass("bmenu-item-selected"),N.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#watchlist-menu").effect("slide",{direction:"left",mode:"show"},1e3),N.updateWatchlist(),S=!0,$("#menu-watchlist").addClass("bmenu-item-selected");break;case"menu-analysis":if(!settingsManager.isMembersOnly){N.loginPopup();break}if(isAnalysisMenuOpen){isAnalysisMenuOpen=!1,$("#menu-analysis").removeClass("bmenu-item-selected"),N.hideSideMenus();break}if(N.hideSideMenus(),-1!=objectManager.selectedSat){let e=satSet.getSat(objectManager.selectedSat);$("#anal-sat").val(e.SCC_NUM)}sensorManager.checkSensorSelected()?$("#anal-type").html("<optgroup label=\"Orbital Parameters\">\n                  <option value='inc'>Inclination</option>\n                  <option value='ap'>Apogee</option>\n                  <option value='pe'>Perigee</option>\n                  <option value='per'>Period</option>\n                  <option value='e'>Eccentricity</option>\n                  <option value='ra'>RAAN</option>\n                  <option value='all'>All</option>\n                </optgroup>\n                <optgroup id=\"anal-look-opt\" label=\"Look Angles\">\n                  <option value='az'>Azimuth</option>\n                  <option value='el'>Elevation</option>\n                  <option value='rng'>Range</option>\n                  <option value='rae'>All</option>\n                </optgroup>"):$("#anal-type").html("<optgroup label=\"Orbital Parameters\">\n                  <option value='inc'>Inclination</option>\n                  <option value='ap'>Apogee</option>\n                  <option value='pe'>Perigee</option>\n                  <option value='per'>Period</option>\n                  <option value='e'>Eccentricity</option>\n                  <option value='ra'>RAAN</option>\n                  <option value='all'>All</option>\n                </optgroup>"),$("#anal-type").formSelect(),$("#analysis-menu").effect("slide",{direction:"left",mode:"show"},1e3),isAnalysisMenuOpen=!0,$("#menu-analysis").addClass("bmenu-item-selected");break;case"menu-external":if(w){w=!1,$("#menu-external").removeClass("bmenu-item-selected"),N.hideSideMenus();break}N.hideSideMenus(),$("#external-menu").effect("slide",{direction:"left",mode:"show"},1e3),N.updateWatchlist(),w=!0,$("#menu-external").addClass("bmenu-item-selected");break;case"menu-lookanglesmultisite":if(!settingsManager.isMembersOnly){N.loginPopup();break}if(isLookanglesMultiSiteMenuOpen){isLookanglesMultiSiteMenuOpen=!1,N.hideSideMenus();break}if(-1===objectManager.selectedSat){adviceList.ssnLookanglesDisabled(),$("#menu-lookanglesmultisite:animated").length||$("#menu-lookanglesmultisite").effect("shake",{distance:10});break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),isLookanglesMultiSiteMenuOpen=!0,$("#menu-lookanglesmultisite").addClass("bmenu-item-selected"),-1!==objectManager.selectedSat&&$("#loading-screen").fadeIn(1e3,function(){sat=satSet.getSatExtraOnly(objectManager.selectedSat),satellite.getlookanglesMultiSite(sat),$("#loading-screen").fadeOut("slow"),$("#lookanglesmultisite-menu").effect("slide",{direction:"left",mode:"show"},1e3)});break;case"menu-find-sat":if(b){b=!1,N.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#findByLooks-menu").effect("slide",{direction:"left",mode:"show"},1e3),b=!0,$("#menu-find-sat").addClass("bmenu-item-selected");break;case"menu-twitter":if(h){h=!1,N.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#twitter-menu").is(":empty")&&$("#twitter-menu").html('<a class="twitter-timeline" data-theme="dark" data-link-color="#2B7BB9" href="https://twitter.com/RedKosmonaut/lists/space-news">A Twitter List by RedKosmonaut</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>'),$("#twitter-menu").effect("slide",{direction:"left",mode:"show"},1e3),h=!0,$("#menu-twitter").addClass("bmenu-item-selected");break;case"menu-map":if(settingsManager.isMapMenuOpen){settingsManager.isMapMenuOpen=!1,N.hideSideMenus();break}if(!settingsManager.isMapMenuOpen){if(-1===objectManager.selectedSat){adviceList.mapDisabled(),N.toast("Select a Satellite First!","caution"),$("#menu-map:animated").length||$("#menu-map").effect("shake",{distance:10});break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#map-menu").effect("slide",{direction:"left",mode:"show"},1e3),settingsManager.isMapMenuOpen=!0,N.updateMap();var a=satSet.getSatExtraOnly(objectManager.selectedSat);$("#map-sat").tooltip({delay:50,html:a.SCC_NUM,position:"left"}),$("#menu-map").addClass("bmenu-item-selected");break}break;case"menu-launches":if(f){f=!1,N.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),settingsManager.isPreventColorboxClose=!0,setTimeout(function(){settingsManager.isPreventColorboxClose=!1},2e3),"https:"===location.protocol?$.colorbox({href:"https://space.skyrocket.de/doc_chr/lau2020.htm",iframe:!0,width:"80%",height:"80%",fastIframe:!1,closeButton:!1}):$.colorbox({href:"http://space.skyrocket.de/doc_chr/lau2020.htm",iframe:!0,width:"80%",height:"80%",fastIframe:!1,closeButton:!1}),f=!0,$("#menu-launches").addClass("bmenu-item-selected");break;case"menu-about":if(C){C=!1,N.hideSideMenus();break}N.hideSideMenus(),$("#about-menu").effect("slide",{direction:"left",mode:"show"},1e3),C=!0,$("#menu-about").addClass("bmenu-item-selected");break;case"menu-satellite-collision":if(T){T=!1,N.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#socrates-menu").effect("slide",{direction:"left",mode:"show"},1e3),T=!0,B(-1),$("#menu-satellite-collision").addClass("bmenu-item-selected");break;case"menu-satChng":if(x){x=!1,N.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#satChng-menu").effect("slide",{direction:"left",mode:"show"},1e3),x=!0,N.satChng(-1),$("#menu-satChng").addClass("bmenu-item-selected");break;case"menu-obfit":if(L){L=!1,N.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#obfit-menu").effect("slide",{direction:"left",mode:"show"},1e3),L=!0,$("#menu-obfit").addClass("bmenu-item-selected");break;case"menu-settings":if(F){F=!1,N.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#settings-menu").effect("slide",{direction:"left",mode:"show"},1e3),F=!0,$("#menu-settings").addClass("bmenu-item-selected");break;case"menu-editSat":if(!settingsManager.isMembersOnly){N.loginPopup();break}if(isEditSatMenuOpen){isEditSatMenuOpen=!1,N.hideSideMenus();break}if(-1!==objectManager.selectedSat){settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#editSat-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#menu-editSat").addClass("bmenu-item-selected"),isEditSatMenuOpen=!0,sat=satSet.getSatExtraOnly(objectManager.selectedSat),$("#es-scc").val(sat.SCC_NUM);var n=(sat.inclination*RAD2DEG).toPrecision(7);n=n.split("."),n[0]=n[0].substr(-3,3),n[1]=n[1].substr(0,4),n=(n[0]+"."+n[1]).toString(),$("#es-inc").val(t(n,8)),$("#es-year").val(sat.TLE1.substr(18,2)),$("#es-day").val(sat.TLE1.substr(20,12)),$("#es-meanmo").val(sat.TLE2.substr(52,11));var o=(sat.raan*RAD2DEG).toPrecision(7);o=o.split("."),o[0]=o[0].substr(-3,3),o[1]=o[1].substr(0,4),o=(o[0]+"."+o[1]).toString(),$("#es-rasc").val(t(o,8)),$("#es-ecen").val(sat.eccentricity.toPrecision(7).substr(2,7));var r=(sat.argPe*RAD2DEG).toPrecision(7);r=r.split("."),r[0]=r[0].substr(-3,3),r[1]=r[1].substr(0,4),r=(r[0]+"."+r[1]).toString(),$("#es-argPe").val(t(r,8)),$("#es-meana").val(sat.TLE2.substr(43,8))}else adviceList.editSatDisabled(),$("#menu-editSat:animated").length||$("#menu-editSat").effect("shake",{distance:10});break;case"menu-newLaunch":if(!settingsManager.isMembersOnly){N.loginPopup();break}if(isNewLaunchMenuOpen){isNewLaunchMenuOpen=!1,N.hideSideMenus();break}-1!==objectManager.selectedSat?(settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#newLaunch-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#menu-newLaunch").addClass("bmenu-item-selected"),isNewLaunchMenuOpen=!0,sat=satSet.getSatExtraOnly(objectManager.selectedSat),$("#nl-scc").val(sat.SCC_NUM),$("#nl-inc").val((sat.inclination*RAD2DEG).toPrecision(2))):(adviceList.newLaunchDisabled(),$("#menu-newLaunch:animated").length||$("#menu-newLaunch").effect("shake",{distance:10}));break;case"menu-breakup":if(isBreakupMenuOpen){isBreakupMenuOpen=!1,N.hideSideMenus();break}-1!==objectManager.selectedSat?(settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#breakup-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#menu-breakup").addClass("bmenu-item-selected"),isBreakupMenuOpen=!0,sat=satSet.getSatExtraOnly(objectManager.selectedSat),$("#hc-scc").val(sat.SCC_NUM)):(adviceList.breakupDisabled(),N.toast("Select a Satellite First!","caution"),$("#menu-breakup:animated").length||$("#menu-breakup").effect("shake",{distance:10}));break;case"menu-customSensor":if(!settingsManager.isMembersOnly){N.loginPopup();break}if(isCustomSensorMenuOpen){isCustomSensorMenuOpen=!1,N.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),sensorManager.checkSensorSelected()&&($("#cs-lat").val(sensorManager.selectedSensor.lat),$("#cs-lon").val(sensorManager.selectedSensor.long),$("#cs-hei").val(sensorManager.selectedSensor.obshei)),$("#customSensor-menu").effect("slide",{direction:"left",mode:"show"},1e3),isCustomSensorMenuOpen=!0,$("#menu-customSensor").addClass("bmenu-item-selected");break;case"menu-missile":if(isMissileMenuOpen){isMissileMenuOpen=!1,N.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#missile-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#menu-missile").addClass("bmenu-item-selected"),isMissileMenuOpen=!0;break;case"menu-fov-bubble":if(!sensorManager.checkSensorSelected()){adviceList.bubbleDisabled(),N.toast("Select a Sensor First!","caution"),$("#menu-fov-bubble:animated").length||$("#menu-fov-bubble").effect("shake",{distance:10});break}if(settingsManager.isFOVBubbleModeOn&&!settingsManager.isShowSurvFence){settingsManager.isFOVBubbleModeOn=!1,$("#menu-fov-bubble").removeClass("bmenu-item-selected"),satCruncher.postMessage({isShowFOVBubble:"reset",isShowSurvFence:"disable"});break}settingsManager.isSatOverflyModeOn=!1,$("#menu-sat-fov").removeClass("bmenu-item-selected"),settingsManager.isFOVBubbleModeOn=!0,settingsManager.isShowSurvFence=!1,$("#menu-fov-bubble").addClass("bmenu-item-selected"),$("#menu-surveillance").removeClass("bmenu-item-selected"),satCruncher.postMessage({isShowSatOverfly:"reset",isShowFOVBubble:"enable",isShowSurvFence:"disable"});break;case"menu-surveillance":if(!sensorManager.checkSensorSelected()){adviceList.survFenceDisabled(),N.toast("Select a Sensor First!","caution"),$("#menu-surveillance:animated").length||$("#menu-surveillance").effect("shake",{distance:10});break}if(settingsManager.isShowSurvFence){settingsManager.isShowSurvFence=!1,$("#menu-surveillance").removeClass("bmenu-item-selected"),satCruncher.postMessage({isShowSurvFence:"disable",isShowFOVBubble:"reset"});break}settingsManager.isSatOverflyModeOn=!1,$("#menu-sat-fov").removeClass("bmenu-item-selected"),settingsManager.isShowSurvFence=!0,$("#menu-surveillance").addClass("bmenu-item-selected"),$("#menu-fov-bubble").removeClass("bmenu-item-selected"),satCruncher.postMessage({isShowSatOverfly:"reset",isShowFOVBubble:"enable",isShowSurvFence:"enable"});break;case"menu-sat-fov":if(-1===objectManager.selectedSat&&""===$("#search").val()){adviceList.satFOVDisabled(),N.toast("Select a Satellite First!","caution"),$("#menu-sat-fov:animated").length||$("#menu-sat-fov").effect("shake",{distance:10});break}if(settingsManager.isSatOverflyModeOn){settingsManager.isSatOverflyModeOn=!1,$("#menu-sat-fov").removeClass("bmenu-item-selected"),satCruncher.postMessage({isShowSatOverfly:"reset"});break}$("#menu-fov-bubble").removeClass("bmenu-item-selected"),$("#menu-surveillance").removeClass("bmenu-item-selected"),settingsManager.isShowSurvFence=!1,settingsManager.isFOVBubbleModeOn=!1,settingsManager.isSatOverflyModeOn=!0,""!==$("#search").val()&&searchBox.doSearch($("#search").val());var i=1*$("#satFieldOfView").val();$("#menu-sat-fov").addClass("bmenu-item-selected"),satCruncher.postMessage({isShowFOVBubble:"reset",isShowSurvFence:"disable",isShowSatOverfly:"enable",selectedSatFOV:i}),satSet.setColorScheme(settingsManager.currentColorScheme,!0);break;case"menu-day-night":if(earth.isDayNightToggle){earth.isDayNightToggle=!1,$("#menu-day-night").removeClass("bmenu-item-selected");break}earth.isDayNightToggle=!0,$("#menu-day-night").addClass("bmenu-item-selected");break;case"menu-time-machine":if(orbitManager.isTimeMachineRunning){orbitManager.isTimeMachineRunning=!1,orbitManager.isTimeMachineVisible=!1,settingsManager.colors.transparent=orbitManager.tempTransColor,groups.clearSelect(),satSet.setColorScheme(ColorScheme.default,!0),$("#menu-time-machine").removeClass("bmenu-item-selected");break}orbitManager.isTimeMachineRunning=!0,orbitManager.isTimeMachineVisible=!0,$("#menu-time-machine").addClass("bmenu-item-selected"),orbitManager.historyOfSatellitesPlay();break;case"menu-photo":N.saveHiResPhoto("4k");break;case"menu-color-scheme":if(v){N.hideSideMenus(),v=!1;break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#color-scheme-menu").effect("slide",{direction:"left",mode:"show"},1e3),v=!0,$("#menu-color-scheme").addClass("bmenu-item-selected");break;case"menu-constellations":if(y){N.hideSideMenus(),y=!1;break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#constellations-menu").effect("slide",{direction:"left",mode:"show"},1e3),y=!0,$("#menu-constellations").addClass("bmenu-item-selected");break;case"menu-countries":if(k){N.hideSideMenus(),k=!1;break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus(),$("#countries-menu").effect("slide",{direction:"left",mode:"show"},1e3),k=!0,$("#menu-countries").addClass("bmenu-item-selected");break;case"menu-nextLaunch":if(O){N.hideSideMenus(),O=!1;break}N.hideSideMenus(),nextLaunchManager.showTable(),$("#nextLaunch-menu").effect("slide",{direction:"left",mode:"show"},1e3),O=!0,$("#menu-nextLaunch").addClass("bmenu-item-selected");break;case"menu-planetarium":if(isPlanetariumView){isPlanetariumView=!1,cameraManager.panReset=!0,cameraManager.localRotateReset=!0,settingsManager.fieldOfView=.6,webGlInit(),N.hideSideMenus(),orbitManager.clearInViewOrbit(),cameraType.current=cameraType.default,$("#fov-text").html(""),$("#menu-planetarium").removeClass("bmenu-item-selected");break}sensorManager.checkSensorSelected()?(cameraType.current=cameraType.planetarium,$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg"),N.legendMenuChange("planetarium"),objectManager.isStarManagerLoaded&&starManager.clearConstellations(),isAstronomyView=!1,$("#menu-astronomy").removeClass("bmenu-item-selected"),isPlanetariumView=!0,$("#menu-planetarium").addClass("bmenu-item-selected")):(adviceList.planetariumDisabled(),N.toast("Select a Sensor First!","caution"),$("#menu-planetarium:animated").length||$("#menu-planetarium").effect("shake",{distance:10}));break;case"menu-astronomy":if(isAstronomyView){isAstronomyView=!1,cameraManager.panReset=!0,cameraManager.localRotateReset=!0,settingsManager.fieldOfView=.6,webGlInit(),N.hideSideMenus(),cameraType.current=cameraType.default,N.legendMenuChange("default"),objectManager.isStarManagerLoaded&&starManager.clearConstellations(),$("#fov-text").html(""),$("#menu-astronomy").removeClass("bmenu-item-selected");break}sensorManager.checkSensorSelected()?(objectManager.isStarManagerLoaded&&starManager.drawAllConstellations(),orbitManager.clearInViewOrbit(),cameraType.current=cameraType.astronomy,$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg"),N.legendMenuChange("astronomy"),isPlanetariumView=!1,$("#menu-planetarium").removeClass("bmenu-item-selected"),isAstronomyView=!0,$("#menu-astronomy").addClass("bmenu-item-selected")):(N.toast("Select a Sensor First!","caution"),$("#menu-astronomy:animated").length||$("#menu-astronomy").effect("shake",{distance:10}));break;case"menu-satview":if(cameraType.current===cameraType.satellite){isSatView=!1,N.hideSideMenus(),cameraType.current=cameraType.fixedToSat,$("#menu-satview").removeClass("bmenu-item-selected");break}-1!==objectManager.selectedSat?(cameraType.current=cameraType.satellite,$("#menu-satview").addClass("bmenu-item-selected"),isSatView=!0):(N.toast("Select a Satellite First!","caution"),adviceList.satViewDisabled(),$("#menu-satview:animated").length||$("#menu-satview").effect("shake",{distance:10}));break;case"menu-record":if(isVideoRecording){recorder.stop(),recorder.save("keeptrack.webm"),isVideoRecording=!1,$("#menu-record").removeClass("bmenu-item-selected");break}try{recorder.start()}catch(e){M.toast({html:"Compatibility Error with Recording"}),isVideoRecording=!1,$("#menu-record").removeClass("bmenu-item-selected"),$("#menu-record").addClass("bmenu-item-disabled"),$("#menu-record:animated").length||$("#menu-record").effect("shake",{distance:10})}}}settingsManager.offline&&(updateInterval=250),$("#versionNumber-text")[0].innerHTML=`${settingsManager.versionNumber} - ${settingsManager.versionDate}`,db.log("_licenseCheck"),"undefined"==typeof satel&&(satel=null),(settingsManager.breakTheLaw||settingsManager.offline)&&settingsManager.isOfficialWebsite&&ga("send","event","Offline Software",settingsManager.offlineLocation,"Licensed"),N.resize2DMap(),db.log("_httpsCheck"),"https:"!==location.protocol&&($("#cs-geolocation").hide(),$("#geolocation-btn").hide()),drawLoopCallback=function(){a(),s(),n(),o(),r()},settingsManager.trusatMode&&($(".legend-pink-box").show(),$("#logo-trusat").show()),settingsManager.isShowLogo&&$("#demo-logo").removeClass("start-hidden"),settingsManager.lowPerf&&($("#menu-surveillance").hide(),$("#menu-sat-fov").hide(),$("#menu-fov-bubble").hide(),$("#settings-lowperf").hide()),function(){db.log("_menuInit");var e=timeManager.getDayOfYear(timeManager.propTime());$("#jday").html(e),e=null,$(".dropdown-button").dropdown(),$(".tooltipped").tooltip({delay:50}),M.AutoInit(),dropdownInstance=M.Dropdown.getInstance($(".dropdown-trigger")),$("#search-results").perfectScrollbar(),$("#datetime-input-tb").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",timezone:"+0000",gotoCurrent:!0,addSliderAccess:!0,sliderAccessArgs:{touchonly:!1}}).on("change.dp",function(e){$("#datetime-input").fadeOut(),s(!0),settingsManager.isEditTime=!1}),N.legendColorsChange(),window.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),!1},$(document).on("cbox_closed",function(){f&&(f=!1,$("#menu-launches").removeClass("bmenu-item-selected"))})}();var A=!1;(function(){db.log("_setupColorPicker");var e=[l([1,0,0,1]),l([1,.75,0,1]),l([.85,.5,0,1]),l([1,1,0,1]),l([0,1,0,1]),l([.2,1,0,.5]),l([.2,1,1,1]),l([0,0,1,1]),l([.2,.4,1,1]),l([.64,0,.64,1]),l([1,0,.6,1]),l([.5,.5,.5,1]),l([1,1,1,1])];$("#settings-color-payload").css({backgroundColor:l(settingsManager.colors.payload)}),$("#settings-color-payload").colorPick({initialColor:l(settingsManager.colors.payload),palette:e,onColorSelected:function(){this.element.css({backgroundColor:this.color,color:this.color}),A&&(settingsManager.colors.payload=i(this.color),N.legendColorsChange(),satSet.setColorScheme(settingsManager.currentColorScheme,!0),localStorage.setItem("settingsManager-colors",JSON.stringify(settingsManager.colors)))}}),$("#settings-color-rocketBody").css({backgroundColor:l(settingsManager.colors.rocketBody)}),$("#settings-color-rocketBody").colorPick({initialColor:l(settingsManager.colors.rocketBody),palette:e,onColorSelected:function(){this.element.css({backgroundColor:this.color,color:this.color}),A&&(settingsManager.colors.rocketBody=i(this.color),N.legendColorsChange(),satSet.setColorScheme(settingsManager.currentColorScheme,!0),localStorage.setItem("settingsManager-colors",JSON.stringify(settingsManager.colors)))}}),$("#settings-color-debris").css({backgroundColor:l(settingsManager.colors.debris)}),$("#settings-color-debris").colorPick({initialColor:l(settingsManager.colors.debris),palette:e,onColorSelected:function(){this.element.css({backgroundColor:this.color,color:this.color}),A&&(settingsManager.colors.debris=i(this.color),N.legendColorsChange(),satSet.setColorScheme(settingsManager.currentColorScheme,!0),localStorage.setItem("settingsManager-colors",JSON.stringify(settingsManager.colors)))}}),$("#settings-color-inview").colorPick({initialColor:l(settingsManager.colors.inview),palette:e,onColorSelected:function(){
this.element.css({backgroundColor:this.color,color:this.color}),A&&(settingsManager.colors.inview=i(this.color),N.legendColorsChange(),satSet.setColorScheme(settingsManager.currentColorScheme,!0),localStorage.setItem("settingsManager-colors",JSON.stringify(settingsManager.colors)))}}),$("#settings-color-missile").colorPick({initialColor:l(settingsManager.colors.missile),palette:e,onColorSelected:function(){this.element.css({backgroundColor:this.color,color:this.color}),A&&(settingsManager.colors.missile=i(this.color),N.legendColorsChange(),satSet.setColorScheme(settingsManager.currentColorScheme,!0),localStorage.setItem("settingsManager-colors",JSON.stringify(settingsManager.colors)))}}),$("#settings-color-missileInview").colorPick({initialColor:l(settingsManager.colors.missileInview),palette:e,onColorSelected:function(){this.element.css({backgroundColor:this.color,color:this.color}),A&&(settingsManager.colors.missileInview=i(this.color),N.legendColorsChange(),satSet.setColorScheme(settingsManager.currentColorScheme,!0),localStorage.setItem("settingsManager-colors",JSON.stringify(settingsManager.colors)))}}),$("#settings-color-trusat").colorPick({initialColor:l(settingsManager.colors.trusat),palette:e,onColorSelected:function(){this.element.css({backgroundColor:this.color,color:this.color}),A&&(settingsManager.colors.trusat=i(this.color),N.legendColorsChange(),satSet.setColorScheme(settingsManager.currentColorScheme,!0),localStorage.setItem("settingsManager-colors",JSON.stringify(settingsManager.colors)))}}),A=!0})(),N.clearRMBSubMenu=(()=>{db.log("uiManager.clearRMBSubMenu",!0),rightBtnSaveMenuDOM.hide(),rightBtnViewMenuDOM.hide(),rightBtnEditMenuDOM.hide(),rightBtnCreateMenuDOM.hide(),rightBtnColorsMenuDOM.hide(),rightBtnDrawMenuDOM.hide(),rightBtnEarthMenuDOM.hide()}),db.log("_menuController"),settingsManager.retro&&(timeManager.propOffset=new Date(2e3,2,13)-Date.now(),$("#datetime-input-tb").datepicker("setDate",new Date(timeManager.propRealTime+timeManager.propOffset)),satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+timeManager.propRate.toString()})),$("#datetime-text").on("click",function(){settingsManager.isEditTime||($("#datetime-input").fadeIn(),$("#datetime-input-tb").trigger("focus"),settingsManager.isEditTime=!0)}),$(".menu-item").on("mouseover",function(){$(this).children(".submenu").css({display:"block"})}),$(".menu-item").on("mouseout",function(){$(this).children(".submenu").css({display:"none"})}),$("#search-close").on("click",function(){searchBox.hideResults(),!1,$("#menu-space-stations").removeClass("bmenu-item-selected")}),$("#info-overlay-content").on("click",".watchlist-object",function(e){var t=e.currentTarget.textContent.split(":");t=t[0];var a=satSet.getIdFromObjNum(t);null!==a&&selectSat(a)}),$("#bottom-icons").on("click",".bmenu-item",D),$("#bottom-menu").on("click",".FOV-object",function(e){var t=e.currentTarget.textContent;t=t.slice(-5);var a=satSet.getIdFromObjNum(t);null!==a&&selectSat(a)}),$("#legend-hover-menu").on("click",function(e){switch(e.target.classList[1]){case"legend-payload-box":ColorScheme.objectTypeFlags.payload?(ColorScheme.objectTypeFlags.payload=!1,$(".legend-payload-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.payload=!0,$(".legend-payload-box").css("background",l(settingsManager.colors.payload)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-rocketBody-box":ColorScheme.objectTypeFlags.rocketBody?(ColorScheme.objectTypeFlags.rocketBody=!1,$(".legend-rocketBody-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.rocketBody=!0,$(".legend-rocketBody-box").css("background",l(settingsManager.colors.rocketBody)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-debris-box":ColorScheme.objectTypeFlags.debris?(ColorScheme.objectTypeFlags.debris=!1,$(".legend-debris-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.debris=!0,$(".legend-debris-box").css("background",l(settingsManager.colors.debris)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-starHi-box":ColorScheme.objectTypeFlags.starHi?(ColorScheme.objectTypeFlags.starHi=!1,$(".legend-starHi-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.starHi=!0,$(".legend-starHi-box").css("background",l(settingsManager.colors.star100)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-starMed-box":ColorScheme.objectTypeFlags.starMed?(ColorScheme.objectTypeFlags.starMed=!1,$(".legend-starMed-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.starMed=!0,$(".legend-starMed-box").css("background",l(settingsManager.colors.star75)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-starLow-box":ColorScheme.objectTypeFlags.starLow?(ColorScheme.objectTypeFlags.starLow=!1,$(".legend-starLow-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.starLow=!0,$(".legend-starLow-box").css("background",l(settingsManager.colors.star100)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-satHi-box":ColorScheme.objectTypeFlags.satHi?(ColorScheme.objectTypeFlags.satHi=!1,$(".legend-satHi-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.satHi=!0,$(".legend-satHi-box").css("background","rgb(250, 250, 250)"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-satMed-box":ColorScheme.objectTypeFlags.satMed?(ColorScheme.objectTypeFlags.satMed=!1,$(".legend-satMed-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.satMed=!0,$(".legend-satMed-box").css("background","rgb(150, 150, 150)"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-satLow-box":ColorScheme.objectTypeFlags.satLow?(ColorScheme.objectTypeFlags.satLow=!1,$(".legend-satLow-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.satLow=!0,$(".legend-satLow-box").css("background","rgb(200, 200, 200)"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-inFOV-box":ColorScheme.objectTypeFlags.inFOV?(ColorScheme.objectTypeFlags.inFOV=!1,$(".legend-inFOV-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.inFOV=!0,$(".legend-inFOV-box").css("background",l(settingsManager.colors.inview)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-velocityFast-box":ColorScheme.objectTypeFlags.velocityFast?(ColorScheme.objectTypeFlags.velocityFast=!1,$(".legend-velocityFast-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.velocityFast=!0,$(".legend-velocityFast-box").css("background",[0,1,0,1]),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-velocityMed-box":ColorScheme.objectTypeFlags.velocityMed?(ColorScheme.objectTypeFlags.velocityMed=!1,$(".legend-velocityMed-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.velocityMed=!0,$(".legend-velocityMed-box").css("background",[.5,.5,0,1]),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-velocitySlow-box":ColorScheme.objectTypeFlags.velocitySlow?(ColorScheme.objectTypeFlags.velocitySlow=!1,$(".legend-velocitySlow-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.velocitySlow=!0,$(".legend-velocitySlow-box").css("background",[1,0,0,1]),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-inviewAlt-box":ColorScheme.objectTypeFlags.inviewAlt?(ColorScheme.objectTypeFlags.inviewAlt=!1,$(".legend-inviewAlt-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.inviewAlt=!0,$(".legend-inviewAlt-box").css("background",l(settingsManager.colors.inviewAlt)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-ageNew-box":ColorScheme.objectTypeFlags.ageNew?(ColorScheme.objectTypeFlags.ageNew=!1,$(".legend-ageNew-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.ageNew=!0,$(".legend-ageNew-box").css("background",l(settingsManager.colors.ageNew)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-ageMed-box":ColorScheme.objectTypeFlags.ageMed?(ColorScheme.objectTypeFlags.ageMed=!1,$(".legend-ageMed-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.ageMed=!0,$(".legend-ageMed-box").css("background",l(settingsManager.colors.ageMed)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-ageOld-box":ColorScheme.objectTypeFlags.ageOld?(ColorScheme.objectTypeFlags.ageOld=!1,$(".legend-ageOld-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.ageOld=!0,$(".legend-ageOld-box").css("background",l(settingsManager.colors.ageOld)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-ageLost-box":ColorScheme.objectTypeFlags.ageLost?(ColorScheme.objectTypeFlags.ageLost=!1,$(".legend-ageLost-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.ageLost=!0,$(".legend-ageLost-box").css("background",l(settingsManager.colors.ageLost)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-rcsSmall-box":ColorScheme.objectTypeFlags.rcsSmall?(ColorScheme.objectTypeFlags.rcsSmall=!1,$(".legend-rcsSmall-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.rcsSmall=!0,$(".legend-rcsSmall-box").css("background",l(settingsManager.colors.rcsSmall)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-rcsMed-box":ColorScheme.objectTypeFlags.rcsMed?(ColorScheme.objectTypeFlags.rcsMed=!1,$(".legend-rcsMed-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.rcsMed=!0,$(".legend-rcsMed-box").css("background",l(settingsManager.colors.rcsMed)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-rcsLarge-box":ColorScheme.objectTypeFlags.rcsLarge?(ColorScheme.objectTypeFlags.rcsLarge=!1,$(".legend-rcsLarge-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.rcsLarge=!0,$(".legend-rcsLarge-box").css("background",l(settingsManager.colors.rcsLarge)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-rcsUnknown-box":ColorScheme.objectTypeFlags.rcsUnknown?(ColorScheme.objectTypeFlags.rcsUnknown=!1,$(".legend-rcsUnknown-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.rcsUnknown=!0,$(".legend-rcsUnknown-box").css("background",l(settingsManager.colors.rcsUnknown)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-missile-box":ColorScheme.objectTypeFlags.missile?(ColorScheme.objectTypeFlags.missile=!1,$(".legend-missile-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.missile=!0,$(".legend-missile-box").css("background",l(settingsManager.colors.missile)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-missileInview-box":ColorScheme.objectTypeFlags.missileInview?(ColorScheme.objectTypeFlags.missileInview=!1,$(".legend-missileInview-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.missileInview=!0,$(".legend-missileInview-box").css("background",l(settingsManager.colors.missileInview)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-sensor-box":ColorScheme.objectTypeFlags.sensor?(ColorScheme.objectTypeFlags.sensor=!1,$(".legend-sensor-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.sensor=!0,$(".legend-sensor-box").css("background",l(settingsManager.colors.sensor)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-facility-box":ColorScheme.objectTypeFlags.facility?(ColorScheme.objectTypeFlags.facility=!1,$(".legend-facility-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.facility=!0,$(".legend-facility-box").css("background",l(settingsManager.colors.facility)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-trusat-box":ColorScheme.objectTypeFlags.trusat?(ColorScheme.objectTypeFlags.trusat=!1,$(".legend-trusat-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.trusat=!0,$(".legend-trusat-box").css("background",l(settingsManager.colors.trusat)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-countryUS-box":ColorScheme.objectTypeFlags.countryUS?(ColorScheme.objectTypeFlags.countryUS=!1,$(".legend-countryUS-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.countryUS=!0,$(".legend-countryUS-box").css("background",l(settingsManager.colors.countryUS)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-countryCIS-box":ColorScheme.objectTypeFlags.countryCIS?(ColorScheme.objectTypeFlags.countryCIS=!1,$(".legend-countryCIS-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.countryCIS=!0,$(".legend-countryCIS-box").css("background",l(settingsManager.colors.countryCIS)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-countryPRC-box":ColorScheme.objectTypeFlags.countryPRC?(ColorScheme.objectTypeFlags.countryPRC=!1,$(".legend-countryPRC-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.countryPRC=!0,$(".legend-countryPRC-box").css("background",l(settingsManager.colors.countryPRC)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-countryOther-box":ColorScheme.objectTypeFlags.countryOther?(ColorScheme.objectTypeFlags.countryOther=!1,$(".legend-countryOther-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.countryOther=!0,$(".legend-countryOther-box").css("background",l(settingsManager.colors.countryOther)),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0))}}),$("#time-machine-icon").on("click",function(){"block"===$("#time-machine-menu").css("display")?$("#time-machine-menu").hide():($("#time-machine-menu").show(),searchBox.hideResults(),$("#search-results").hide())}),$("#legend-menu").on("click",function(){settingsManager.legendMenuOpen?($("#legend-hover-menu").hide(),settingsManager.legendMenuOpen=!1):($("#legend-hover-menu").show(),searchBox.hideResults(),$("#search-results").hide(),settingsManager.legendMenuOpen=!0)}),$(".menu-selectable").on("click",function(){-1!==objectManager.selectedSat&&($("#menu-lookangles").removeClass("bmenu-item-disabled"),$("#menu-satview").removeClass("bmenu-item-disabled")),R.length>0&&$("#menu-info-overlay").removeClass("bmenu-item-disabled")}),$("#sensor-list-content > div > ul > .menu-selectable").on("click",function(){adviceList.sensor()}),$("#radar-cspocAll").on("click",function(){adviceList.cspocSensors(),sensorManager.setSensor("SSN")}),$("#radar-mwAll").on("click",function(){adviceList.mwSensors(),sensorManager.setSensor("NATO-MW")}),$("#radar-beale").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.BLE)}),$("#radar-capecod").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.COD)}),$("#radar-clear").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.CLR)}),$("#radar-eglin").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.EGL)}),$(".radar-fylingdales").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.FYL)}),$("#radar-parcs").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.CAV)}),$("#radar-thule").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.THL)}),$("#radar-cobradane").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.CDN)}),$("#radar-altair").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.ALT)}),$("#radar-mmw").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.MMW)}),$("#radar-alcor").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.ALC)}),$("#radar-tradex").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.TDX)}),$("#radar-millstone").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.MIL)}),$("#radar-ascension").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.ASC)}),$("#radar-globus").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.GLB)}),$("#optical-diego-garcia").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.DGC)}),$("#optical-maui").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.MAU)}),$("#optical-socorro").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.SOC)}),$("#radar-taiwan").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.TAI)}),$("#radar-md-all").on("click",function(){sensorManager.setSensor("MD-ALL")}),$("#radar-md-har").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.HAR)}),$("#radar-md-qtr").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.QTR)}),$("#radar-md-kur").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.KUR)}),$("#radar-md-sha").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.SHA)}),$("#radar-md-kcs").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.KCS)}),$("#radar-md-sbx").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.SBX)}),$("#radar-ll-all").on("click",function(){sensorManager.setSensor("LEO-LABS")}),$("#radar-ll-msr").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.MSR)}),$("#radar-ll-pfisr").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.PFISR)}),$("#radar-ll-ksr").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.KSR)}),$("#esoc-graves").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.GRV)}),$("#esoc-tira").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.TIR)}),$("#esoc-northern-cross").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.NRC)}),$("#esoc-troodos").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.TRO)}),$("#esoc-space-debris-telescope").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.SDT)}),$("#esoc-galileo-station").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.GGS)}),$("#radar-rus-all").on("click",function(){sensorManager.setSensor("RUS-ALL")}),$("#russian-armavir").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.ARM)}),$("#russian-balkhash").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.BAL)}),$("#russian-gantsevichi").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.GAN)}),$("#russian-lekhtusi").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.LEK)}),$("#russian-mishelevka-d").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.MIS)}),$("#russian-olenegorsk").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.OLE)}),$("#russian-pechora").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.PEC)}),$("#russian-pionersky").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.PIO)}),$("#chinese-xuanhua").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.XUA)}),$("#chinese-purple").on("click",function(){sensorManager.setSensor(sensorManager.sensorList.PMO)}),$("#reset-sensor-button").on("click",function(){settingsManager.isForceColorScheme=!1,$("#menu-sensor-info").addClass("bmenu-item-disabled"),$("#menu-fov-bubble").addClass("bmenu-item-disabled"),$("#menu-surveillance").addClass("bmenu-item-disabled"),$("#menu-planetarium").addClass("bmenu-item-disabled"),$("#menu-astronomy").addClass("bmenu-item-disabled"),_resetSensorSelected()}),$("#datetime-input-form").on("change",function(e){var t=$("#datetime-input-tb").datepicker("getDate"),a=new Date,n=timeManager.getDayOfYear(timeManager.propTime());$("#jday").html(n),timeManager.propOffset=t-a,satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+1..toString()}),timeManager.propRealTime=Date.now(),timeManager.propTime(),d=1*timeManager.now-7e3,g=timeManager.now,s(!0),radarDataManager.findFirstDataTime(),e.preventDefault()}),$("#findByLooks").on("submit",function(e){var t=$("#fbl-azimuth").val(),a=$("#fbl-elevation").val(),s=$("#fbl-range").val(),n=$("#fbl-inc").val(),o=$("#fbl-period").val(),r=$("#fbl-rcs").val(),i=$("#fbl-azimuth-margin").val(),l=$("#fbl-elevation-margin").val(),c=$("#fbl-range-margin").val(),g=$("#fbl-inc-margin").val(),d=$("#fbl-period-margin").val(),m=$("#fbl-rcs-margin").val(),u=$("#fbl-type").val();$("#search").val("");var h=satSet.searchAzElRange(t,a,s,n,i,l,c,g,o,d,r,m,u);void 0===h?$("#fbl-error").html("No Search Criteria"):0===h.length&&$("#fbl-error").html("No Satellites Found"),e.preventDefault()}),$("#analysis-form").on("submit",function(e){let t=$("#anal-type").val(),a=$("#anal-sat").val(),s=sensorManager.currentSensor.shortName;void 0===s?$.colorbox({href:`https://keeptrack.space/analysis/?sat=${a}&type=${t}`,iframe:!0,width:"60%",height:"60%",fastIframe:!1,closeButton:!1}):$.colorbox({href:`https://keeptrack.space/analysis/?sat=${a}&type=${t}&sensor=${s}`,iframe:!0,width:"60%",height:"60%",fastIframe:!1,closeButton:!1}),e.preventDefault()}),$("#analysis-bpt").on("submit",function(e){let t=$("#analysis-bpt-sats").val();sensorManager.checkSensorSelected()?satellite.findBestPasses(t,sensorManager.selectedSensor):satellite.findBestPasses(t,sensorManager.sensorList.COD),e.preventDefault()}),$("#settings-form").on("change",function(e){var t=document.getElementById("settings-demo-mode").checked,a=document.getElementById("settings-sat-label-mode").checked;a&&"settings-demo-mode"===e.target.id&&(document.getElementById("settings-sat-label-mode").checked=!1,$("#settings-demo-mode").removeClass("lever:after")),t&&"settings-sat-label-mode"===e.target.id&&(document.getElementById("settings-demo-mode").checked=!1,$("#settings-sat-label-mode").removeClass("lever:after"))}),$("#settings-form").on("submit",function(e){var t=document.getElementById("settings-hos").checked,a=document.getElementById("settings-demo-mode").checked,s=document.getElementById("settings-sat-label-mode").checked,n=document.getElementById("settings-snp").checked,o=document.getElementById("settings-riseset").checked;settingsManager.isSatLabelModeOn=!!s,settingsManager.isDemoModeOn=!!a,t?(settingsManager.colors.transparent=[1,1,1,0],settingsManager.isOfficialWebsite&&ga("send","event","Settings Menu","Hide Other Satellites","Option Selected")):settingsManager.colors.transparent=[1,1,1,.1],ColorScheme.reloadColors(),n?(isShowNextPass=!0,settingsManager.isOfficialWebsite&&ga("send","event","Settings Menu","Show Next Pass on Hover","Option Selected")):isShowNextPass=!1,o?(satellite.isRiseSetLookangles=!0,settingsManager.isOfficialWebsite&&ga("send","event","Settings Menu","Show Only Rise/Set Times","Option Selected")):satellite.isRiseSetLookangles=!1,satellite.lookanglesLength=1*$("#lookanglesLength").val(),satellite.lookanglesInterval=1*$("#lookanglesInterval").val(),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme),e.preventDefault()}),$("#obfit-form").on("submit",function(e){let t,a,s,n,o,r,i,l,c,g,d,m,u,h,b,M,p,S,f,$,C,v=!0,y=!0,k=!0;const w=document.getElementById("obfit-t1").value;t=w.length>0?parseFloat(w):NaN;const T=document.getElementById("obfit-x1").value;a=T.length>0?parseFloat(T):NaN;const O=document.getElementById("obfit-y1").value;s=O.length>0?parseFloat(O):NaN;const x=document.getElementById("obfit-z1").value;n=x.length>0?parseFloat(x):NaN;const F=document.getElementById("obfit-xd1").value;o=F.length>0?parseFloat(F):NaN;const L=document.getElementById("obfit-yd1").value;r=L.length>0?parseFloat(L):NaN;const R=document.getElementById("obfit-zd1").value;i=R.length>0?parseFloat(R):NaN;const j=document.getElementById("obfit-t2").value;j.length>0?l=parseFloat(j):y=!1;const I=document.getElementById("obfit-x2").value;I.length>0?c=parseFloat(I):y=!1;const E=document.getElementById("obfit-y2").value;E.length>0?g=parseFloat(E):y=!1;const B=document.getElementById("obfit-z2").value;B.length>0?d=parseFloat(B):y=!1;const D=document.getElementById("obfit-xd2").value;D.length>0?m=parseFloat(D):y=!1;const A=document.getElementById("obfit-yd2").value;A.length>0?u=parseFloat(A):y=!1;const P=document.getElementById("obfit-zd2").value;P.length>0?h=parseFloat(P):y=!1;const U=document.getElementById("obfit-t3").value;U.length>0?b=parseFloat(U):k=!1;const V=document.getElementById("obfit-x3").value;V.length>0?M=parseFloat(V):k=!1;const z=document.getElementById("obfit-y3").value;z.length>0?p=parseFloat(z):k=!1;const G=document.getElementById("obfit-z3").value;G.length>0?S=parseFloat(G):k=!1;const H=document.getElementById("obfit-xd3").value;H.length>0?f=parseFloat(H):k=!1;const W=document.getElementById("obfit-yd3").value;W.length>0?$=parseFloat(W):k=!1;const _=document.getElementById("obfit-zd3").value;_.length>0?C=parseFloat(_):k=!1;let K=[],J=[];if(v&&isNaN(w))return v=!1,N.toast("Time 1 is Invalid!","critical"),!1;if(v&&isNaN(T))return v=!1,N.toast("X 1 is Invalid!","critical"),!1;if(v&&isNaN(O))return v=!1,N.toast("Y 1 is Invalid!","critical"),!1;if(v&&isNaN(x))return v=!1,N.toast("Z 1 is Invalid!","critical"),!1;if(v&&isNaN(F))return v=!1,N.toast("X Dot 1 is Invalid!","critical"),!1;if(v&&isNaN(L))return v=!1,N.toast("Y Dot 1 is Invalid!","critical"),!1;if(v&&isNaN(R))return v=!1,N.toast("Z Dot 1 is Invalid!","critical"),!1;v&&(J=[t,a,s,n,o,r,i],K.push(J));let Y=[];y&&isNaN(j)&&(y=!1,N.toast("Time 2 is Invalid!","caution")),y&&isNaN(I)&&(y=!1,N.toast("X 2 is Invalid!","caution")),y&&isNaN(E)&&(y=!1,N.toast("Y 2 is Invalid!","caution")),y&&isNaN(B)&&(y=!1,N.toast("Z 2 is Invalid!","caution")),y&&isNaN(D)&&(y=!1,N.toast("X Dot 2 is Invalid!","caution")),y&&isNaN(A)&&(y=!1,N.toast("Y Dot 2 is Invalid!","caution")),y&&isNaN(P)&&(y=!1,N.toast("Z Dot 2 is Invalid!","caution")),y&&(Y=[l,c,g,d,m,u,h],K.push(Y)),k=!!y&&k;let Z=[];k&&isNaN(U)&&(k=!1,N.toast("Time 3 is Invalid!","caution")),k&&isNaN(V)&&(k=!1,N.toast("X 3 is Invalid!","caution")),k&&isNaN(z)&&(k=!1,N.toast("Y 3 is Invalid!","caution")),k&&isNaN(G)&&(k=!1,N.toast("Z 3 is Invalid!","caution")),k&&isNaN(H)&&(k=!1,N.toast("X Dot 3 is Invalid!","caution")),k&&isNaN(W)&&(k=!1,N.toast("Y Dot 3 is Invalid!","caution")),k&&isNaN(_)&&(k=!1,N.toast("Z Dot 3 is Invalid!","caution")),k&&(Z=[b,M,p,S,f,$,C],K.push(Z)),console.log(K),omManager.svs2analyst(K),e.preventDefault()}),$("#n2yo-form").on("submit",function(e){$("#loading-screen").fadeIn(1e3,function(){let e=1*$("#ext-n2yo").val();satSet.searchN2yo(e),$("#loading-screen").fadeOut("slow")}),e.preventDefault()}),$("#celestrak-form").on("submit",function(e){$("#loading-screen").fadeIn(1e3,function(){let e=1*$("#ext-celestrak").val();satSet.searchCelestrak(e),$("#loading-screen").fadeOut("slow")}),e.preventDefault()}),$("#editSat-newTLE").on("click",function(e){$("#loading-screen").fadeIn(1e3,function(){var e,a,s,n=satSet.getIdFromObjNum($("#es-scc").val()),o=satSet.getSat(n),r=o.getTEARR();a=satellite.degreesLong(r.lon),e=satellite.degreesLat(r.lat),s=r.alt;var i,l=o.getDirection(),c=satellite.currentEpoch(timeManager.propTime());o.TLE1=o.TLE1.substr(0,18)+c[0]+c[1]+o.TLE1.substr(32),cameraManager.camSnapMode=!1,i=o.apogee-o.perigee<300?satellite.getOrbitByLatLon(o,e,a,l,timeManager.propOffset):satellite.getOrbitByLatLon(o,e,a,l,timeManager.propOffset,s);var g=i[0],d=i[1];satCruncher.postMessage({typ:"satEdit",id:n,TLE1:g,TLE2:d}),orbitManager.updateOrbitBuffer(n,!0,g,d),sat=satSet.getSatExtraOnly(objectManager.selectedSat),$("#es-scc").val(sat.SCC_NUM);var m=(sat.inclination*RAD2DEG).toPrecision(7);m=m.split("."),m[0]=m[0].substr(-3,3),m[1]=m[1].substr(0,4),
m=(m[0]+"."+m[1]).toString(),$("#es-inc").val(t(m,8)),$("#es-year").val(sat.TLE1.substr(18,2)),$("#es-day").val(sat.TLE1.substr(20,12)),$("#es-meanmo").val(sat.TLE2.substr(52,11));var u=(sat.raan*RAD2DEG).toPrecision(7);u=u.split("."),u[0]=u[0].substr(-3,3),u[1]=u[1].substr(0,4),u=(u[0]+"."+u[1]).toString(),$("#es-rasc").val(t(u,8)),$("#es-ecen").val(sat.eccentricity.toPrecision(7).substr(2,7));var h=(sat.argPe*RAD2DEG).toPrecision(7);h=h.split("."),h[0]=h[0].substr(-3,3),h[1]=h[1].substr(0,4),h=(h[0]+"."+h[1]).toString(),$("#es-argPe").val(t(h,8)),$("#es-meana").val(sat.TLE2.substr(43,8)),$("#loading-screen").fadeOut("slow")})}),$("#editSat").on("submit",function(e){$("#es-error").hide();var a=$("#es-scc").val(),s=satSet.getIdFromObjNum(a);if(null===s)return console.log("Not a Real Satellite"),e.preventDefault(),!1;var n=satSet.getSatExtraOnly(s),o=n.TLE1.substr(9,8),r=$("#es-inc").val();r=parseFloat(r).toPrecision(7),r=r.split("."),r[0]=r[0].substr(-3,3),r[1]?r[1]=r[1].substr(0,4):r[1]="0000",r=(r[0]+"."+r[1]).toString(),r=t(r,8);var i=$("#es-meanmo").val();i=parseFloat(i).toPrecision(10),i=i.split("."),i[0]=i[0].substr(-2,2),i[1]?i[1]=i[1].substr(0,8):i[1]="00000000",i=(i[0]+"."+i[1]).toString(),i=t(i,8);var l=$("#es-rasc").val();l=parseFloat(l).toPrecision(7),l=l.split("."),l[0]=l[0].substr(-3,3),l[1]?l[1]=l[1].substr(0,4):l[1]="0000",l=(l[0]+"."+l[1]).toString(),l=t(l,8);var c=$("#es-ecen").val(),g=$("#es-argPe").val();g=parseFloat(g).toPrecision(7),g=g.split("."),g[0]=g[0].substr(-3,3),g[1]?g[1]=g[1].substr(0,4):g[1]="0000",g=(g[0]+"."+g[1]).toString(),g=t(g,8);var d=$("#es-meana").val();d=parseFloat(d).toPrecision(7),d=d.split("."),d[0]=d[0].substr(-3,3),d[1]?d[1]=d[1].substr(0,4):d[1]="0000",d=(d[0]+"."+d[1]).toString(),d=t(d,8);var m=$("#es-year").val(),u=$("#es-day").val(),h=n.TLE1.substr(32,39),b="1 "+a+"U "+o+" "+m+u+h,M="2 "+a+" "+r+" "+l+" "+c+" "+g+" "+d+" "+i+"    10";satellite.altitudeCheck(b,M,timeManager.propOffset)>1?(satCruncher.postMessage({typ:"satEdit",id:s,active:!0,TLE1:b,TLE2:M}),orbitManager.updateOrbitBuffer(s,!0,b,M),n.active=!0):($("#es-error").html("Failed Altitude Check</br>Try Different Parameters"),$("#es-error").show()),e.preventDefault()}),$("#editSat-save").on("click",function(e){var t=$("#es-scc").val(),a=satSet.getIdFromObjNum(t),s=satSet.getSatExtraOnly(a),n={TLE1:s.TLE1,TLE2:s.TLE2},o=JSON.stringify(n),r=new Blob([o],{type:"text/plain;charset=utf-8"});saveAs(r,t+".tle"),e.preventDefault()}),$("#editSat-open").on("click",function(e){$("#editSat-file").trigger("click")}),$("#editSat-file").on("change",function(e){if(window.FileReader){var a=new FileReader;a.onload=function(e){if(2===e.target.readyState)if(e.target.error)console.log("error");else{var a=JSON.parse(e.target.result),s=parseInt(t(a.TLE1.substr(2,5).trim(),5)),n=satSet.getIdFromObjNum(s),o=satSet.getSatExtraOnly(n);satellite.altitudeCheck(a.TLE1,a.TLE2,timeManager.propOffset)>1?(satCruncher.postMessage({typ:"satEdit",id:o.id,active:!0,TLE1:a.TLE1,TLE2:a.TLE2}),orbitManager.updateOrbitBuffer(o.id,!0,a.TLE1,a.TLE2),o.active=!0):($("#es-error").html("Failed Altitude Check</br>Try Different Parameters"),$("#es-error").show())}},a.readAsText(e.target.files[0]),e.preventDefault()}}),$("#es-error").on("click",function(){$("#es-error").hide()}),$("#map-menu").on("click",".map-look",function(e){settingsManager.isMapUpdateOverride=!0;var t=e.currentTarget.attributes.time.value;if(null!==t){t=t.split(" "),t=new Date(t[0]+"T"+t[1]+"Z");var a=new Date;timeManager.propOffset=t-a,satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+1..toString()})}}),$("#socrates-menu").on("click",".socrates-object",function(e){var t=e.currentTarget.attributes.hiddenrow.value;null!==t&&B(t)}),$("#satChng-menu").on("click",".satChng-object",function(e){var t=e.currentTarget.attributes.hiddenrow.value;null!==t&&N.satChng(t)}),$("#watchlist-list").on("click",".watchlist-remove",function(e){for(var t=$(this).data("sat-id"),a=0;a<R.length;a++)R[a]===t&&(R.splice(a,1),j.splice(a,1));N.updateWatchlist(),R.length<=0&&(searchBox.doSearch(""),satSet.setColorScheme(ColorScheme.default,!0),N.colorSchemeChangeAlert(settingsManager.currentColorScheme),settingsManager.themes.blueTheme()),(!sensorManager.checkSensorSelected()||R.length<=0)&&(E=!1,$("#menu-info-overlay").addClass("bmenu-item-disabled"))}),$("#watchlist-content").on("click",".watchlist-add",function(e){for(var a=satSet.getIdFromObjNum(t($("#watchlist-new").val(),5)),s=!1,n=0;n<R.length;n++)R[n]===a&&(s=!0);s||(R.push(a),j.push(!1),N.updateWatchlist()),sensorManager.checkSensorSelected()&&$("#menu-info-overlay").removeClass("bmenu-item-disabled"),$("#watchlist-new").val("")}),$("#watchlist-content").on("submit",function(e){for(var a=satSet.getIdFromObjNum(t($("#watchlist-new").val(),5)),s=!1,n=0;n<R.length;n++)R[n]===a&&(s=!0);s||(R.push(a),j.push(!1),N.updateWatchlist()),sensorManager.checkSensorSelected()&&$("#menu-info-overlay").removeClass("bmenu-item-disabled"),$("#watchlist-new").val(""),e.preventDefault()}),$("#watchlist-save").on("click",function(e){for(var t=[],a=0;a<R.length;a++){var s=satSet.getSatExtraOnly(R[a]);t[a]=s.SCC_NUM}var n=JSON.stringify(t),o=new Blob([n],{type:"text/plain;charset=utf-8"});saveAs(o,"watchlist.json"),e.preventDefault()}),$("#watchlist-open").on("click",function(e){$("#watchlist-file").trigger("click")}),$("#watchlist-file").on("change",function(e){if(window.FileReader){var t=new FileReader;t.onload=function(e){if(2===e.target.readyState)if(e.target.error)console.log("error");else{var t=JSON.parse(e.target.result);j=[];for(var a=0;a<t.length;a++){var s=satSet.getSatExtraOnly(satSet.getIdFromObjNum(t[a]));if(null===s)return void console.error("Watchlist File Format Incorret");t[a]=s.id,j.push(!1)}R=t,N.updateWatchlist(),sensorManager.checkSensorSelected()&&$("#menu-info-overlay").removeClass("bmenu-item-disabled")}},t.readAsText(e.target.files[0]),e.preventDefault()}}),$("#newLaunch").on("submit",function(e){$("#loading-screen").fadeIn(1e3,function(){$("#nl-error").hide();var e,t,a=$("#nl-scc").val(),s=satSet.getIdFromObjNum(a),n=satSet.getSat(s),o=$("#nl-updown").val(),r=$("#nl-facility").val();if(settingsManager.isOfficialWebsite&&ga("send","event","New Launch",r,"Launch Site"),objectManager.isLaunchSiteManagerLoaded)for(var i in window.launchSiteManager.launchSiteList)window.launchSiteManager.launchSiteList[i].name===r&&(e=window.launchSiteManager.launchSiteList[i].lat,t=window.launchSiteManager.launchSiteList[i].lon);t>180&&(t-=360);var l=new Date,c=new Date(l.getFullYear(),l.getUTCMonth(),l.getUTCDate(),0,0,0);c.setUTCHours(0),timeManager.propOffset=c-l,cameraManager.camSnapMode=!1,satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+1..toString()});var g=satellite.getOrbitByLatLon(n,e,t,o,timeManager.propOffset),d=g[0],m=g[1];satellite.altitudeCheck(d,m,timeManager.propOffset)>1?(satCruncher.postMessage({typ:"satEdit",id:s,active:!0,TLE1:d,TLE2:m}),orbitManager.updateOrbitBuffer(s,!0,d,m),n=satSet.getSat(s)):($("#nl-error").html("Failed Altitude Check</br>Try Editing Manually"),$("#nl-error").show()),$("#loading-screen").fadeOut("slow")}),e.preventDefault()}),$("#nl-error").on("click",function(){$("#nl-error").hide()}),$("#breakup").on("submit",function(t){$("#loading-screen").fadeIn(1e3,function(){var t,a,s,n=satSet.getIdFromObjNum($("#hc-scc").val()),o=satSet.getSat(n),r=o,i=o.getTEARR();t=satellite.degreesLat(i.lat),a=satellite.degreesLong(i.lon),s=i.alt;var l,c=o.getDirection(),g=satellite.currentEpoch(timeManager.propTime());o.TLE1=o.TLE1.substr(0,18)+g[0]+g[1]+o.TLE1.substr(32),cameraManager.camSnapMode=!1,l=o.apogee-o.perigee<300?satellite.getOrbitByLatLon(o,t,a,c,timeManager.propOffset):satellite.getOrbitByLatLon(o,t,a,c,timeManager.propOffset,s);var d=l[0],m=l[1];satCruncher.postMessage({typ:"satEdit",id:n,TLE1:d,TLE2:m}),orbitManager.updateOrbitBuffer(n,!0,d,m);for(var u="",h=$("#hc-per").val(),b=$("#hc-inc").val(),M=$("#hc-raan").val(),p=100,S=0;S<p;S++)for(var f=0;f<=4;f++)for(var C=0;C<=4;C++)for(var v=0;v<=4;v++)if(!(S>=p)){n=satSet.getIdFromObjNum(8e4+S);var y=satSet.getSat(n);y=r;var k,w="1 "+(8e4+S)+d.substr(7),T=-M/2+M*(v/4);k=y.apogee-y.perigee<300?satellite.getOrbitByLatLon(y,t,a,c,timeManager.propOffset,0,T):satellite.getOrbitByLatLon(y,t,a,c,timeManager.propOffset,s,T),w=k[0],F=k[1];var O=m.substr(8,8);O=parseFloat(O-b/2+b*(f/4)).toPrecision(7),O=O.split("."),O[0]=O[0].substr(-3,3),O[1]?O[1]=O[1].substr(0,4):O[1]="0000",O=(O[0]+"."+O[1]).toString(),O=e(O,8);var x=F.substr(52,10);x=parseFloat(x-x*h/2+x*h*(C/4)).toPrecision(10),x=x.split("."),x[0]=x[0].substr(-2,2),x[1]?x[1]=x[1].substr(0,8):x[1]="00000000",x=(x[0]+"."+x[1]).toString();var F="2 "+(8e4+S)+" "+O+" "+F.substr(17,35)+x+F.substr(63);y=satSet.getSat(n),y.TLE1=w,y.TLE2=F,y.active=!0,satellite.altitudeCheck(w,F,timeManager.propOffset)>1?(satCruncher.postMessage({typ:"satEdit",id:n,TLE1:w,TLE2:F}),orbitManager.updateOrbitBuffer(n,!0,w,F)):console.error("Breakup Generator Failed"),S++}u+=o.SCC_NUM+",Analyst Sat",searchBox.doSearch(u),$("#loading-screen").fadeOut("slow")}),t.preventDefault()}),$("#missile").on("submit",function(e){$("#loading-screen").fadeIn(1e3,function(){$("#ms-error").hide();var t=1*$("#ms-type").val(),a=1*$("#ms-attacker").val();let s=1*$("#ms-lat-lau").val(),n=1*$("#ms-lon-lau").val();var o=1*$("#ms-target").val(),r=1*$("#ms-lat").val(),i=1*$("#ms-lon").val();let l=1*timeManager.selectedDate;if(t>0){let e="";1===t&&(e="simulation/Russia2USA.json",missileManager.MassRaidPre(l,e)),2===t&&(e="simulation/Russia2USAalt.json",missileManager.MassRaidPre(l,e)),3===t&&(e="simulation/China2USA.json",missileManager.MassRaidPre(l,e)),4===t&&(e="simulation/NorthKorea2USA.json",missileManager.MassRaidPre(l,e)),5===t&&(e="simulation/USA2Russia.json",missileManager.MassRaidPre(l,e)),6===t&&(e="simulation/USA2China.json",missileManager.MassRaidPre(l,e)),7===t&&(e="simulation/USA2NorthKorea.json",missileManager.MassRaidPre(l,e)),settingsManager.isOfficialWebsite&&ga("send","event","Missile Sim",t,"Sim Number"),N.toast(`${e} Loaded`,"standby",!0)}else{if(-1===o){if(isNaN(r))return N.toast("Invalid Target Latitude!","critical"),e.preventDefault(),void $("#loading-screen").hide();if(isNaN(i))return N.toast("Invalid Target Longitude!","critical"),e.preventDefault(),void $("#loading-screen").hide()}else r=missileManager.globalBMTargets[3*o],i=missileManager.globalBMTargets[3*o+1];if(isNaN(s))return N.toast("Invalid Launch Latitude!","critical"),e.preventDefault(),void $("#loading-screen").hide();if(isNaN(n))return N.toast("Invalid Launch Longitude!","critical"),e.preventDefault(),void $("#loading-screen").hide();var c,g,d;if(a<200){c=a-100,g=500-missileManager.missilesInUse;let e=1200;100!=a&&(s=missileManager.UsaICBM[4*c],n=missileManager.UsaICBM[4*c+1],e=1100),d=missileManager.UsaICBM[4*c+2],missileManager.Missile(s,n,r,i,3,satSet.missileSats-g,l,missileManager.UsaICBM[4*c+2],30,2.9,.07,missileManager.UsaICBM[4*c+3],"United States",e)}else if(a<300){c=a-200,g=500-missileManager.missilesInUse;let e=1120;213!=a&&214!=a&&215!=a&&(s=missileManager.RussianICBM[4*c],n=missileManager.RussianICBM[4*c+1]),d=missileManager.RussianICBM[4*c+2],missileManager.Missile(s,n,r,i,3,satSet.missileSats-g,l,missileManager.RussianICBM[4*c+2],30,2.9,.07,missileManager.RussianICBM[4*c+3],"Russia",e)}else if(a<400){c=a-300,g=500-missileManager.missilesInUse;let e=1120;321!=a&&(s=missileManager.ChinaICBM[4*c],n=missileManager.ChinaICBM[4*c+1]),d=missileManager.ChinaICBM[4*c+2],missileManager.Missile(s,n,r,i,3,satSet.missileSats-g,l,missileManager.ChinaICBM[4*c+2],30,2.9,.07,missileManager.ChinaICBM[4*c+3],"China",e)}else if(a<500){c=a-400,g=500-missileManager.missilesInUse;let e=1120;400!=a&&(s=missileManager.NorthKoreanBM[4*c],n=missileManager.NorthKoreanBM[4*c+1]),d=missileManager.NorthKoreanBM[4*c+2],missileManager.Missile(s,n,r,i,3,satSet.missileSats-g,l,missileManager.NorthKoreanBM[4*c+2],30,2.9,.07,missileManager.NorthKoreanBM[4*c+3],"North Korea",e)}else if(a<600){c=a-500,g=500-missileManager.missilesInUse,d=missileManager.FraSLBM[4*c+2];let e=1e3;500!=a&&(s=missileManager.FraSLBM[4*c],n=missileManager.FraSLBM[4*c+1]),missileManager.Missile(s,n,r,i,3,satSet.missileSats-g,l,missileManager.FraSLBM[4*c+2],30,2.9,.07,missileManager.FraSLBM[4*c+3],"France",e)}else if(a<700){c=a-600,g=500-missileManager.missilesInUse,d=missileManager.ukSLBM[4*c+2];let e=1200;600!=a&&(s=missileManager.ukSLBM[4*c],n=missileManager.ukSLBM[4*c+1]),missileManager.Missile(s,n,r,i,3,satSet.missileSats-g,l,missileManager.ukSLBM[4*c+2],30,2.9,.07,missileManager.ukSLBM[4*c+3],"United Kigndom",e)}settingsManager.isOfficialWebsite&&ga("send","event","New Missile",d,"Attacker"),settingsManager.isOfficialWebsite&&ga("send","event","New Missile",r+", "+i,"Target"),N.toast(missileManager.lastMissileError,missileManager.lastMissileErrorType),searchBox.doSearch("RV_")}$("#loading-screen").hide()}),e.preventDefault()}),$("#ms-attacker").on("change",()=>{let e=!1,t=[100,600,213,214,215,321,500,400];for(var a=0;a<t.length;a++)t[a]==parseInt($("#ms-attacker").val())&&(e=!0);e?($("#ms-lau-holder-lat").show(),$("#ms-lau-holder-lon").show()):($("#ms-lau-holder-lat").hide(),$("#ms-lau-holder-lon").hide())}),$("#ms-target").on("change",()=>{-1!==parseInt($("#ms-target").val())?($("#ms-tgt-holder-lat").hide(),$("#ms-tgt-holder-lon").hide()):($("#ms-tgt-holder-lat").show(),$("#ms-tgt-holder-lon").show())}),$("#ms-error").on("click",function(){$("#ms-error").hide()}),$("#fbl-error").on("click",function(){$("#fbl-error").hide()}),$("#missile").on("change",function(e){1*$("#ms-type").val()!=0?$("#ms-custom-opt").hide():$("#ms-custom-opt").show()}),$("#cs-telescope").on("click",function(e){$("#cs-telescope").is(":checked")?($("#cs-minaz").attr("disabled",!0),$("#cs-maxaz").attr("disabled",!0),$("#cs-minel").attr("disabled",!0),$("#cs-maxel").attr("disabled",!0),$("#cs-minrange").attr("disabled",!0),$("#cs-maxrange").attr("disabled",!0),$("#cs-minaz-div").hide(),$("#cs-maxaz-div").hide(),$("#cs-minel-div").hide(),$("#cs-maxel-div").hide(),$("#cs-minrange-div").hide(),$("#cs-maxrange-div").hide(),$("#cs-minaz").val(0),$("#cs-maxaz").val(360),$("#cs-minel").val(10),$("#cs-maxel").val(90),$("#cs-minrange").val(100),$("#cs-maxrange").val(1e6)):($("#cs-minaz").attr("disabled",!1),$("#cs-maxaz").attr("disabled",!1),$("#cs-minel").attr("disabled",!1),$("#cs-maxel").attr("disabled",!1),$("#cs-minrange").attr("disabled",!1),$("#cs-maxrange").attr("disabled",!1),$("#cs-minaz-div").show(),$("#cs-maxaz-div").show(),$("#cs-minel-div").show(),$("#cs-maxel-div").show(),$("#cs-minrange-div").show(),$("#cs-maxrange-div").show(),sensorManager.checkSensorSelected()&&($("#cs-minaz").val(sensorManager.selectedSensor.obsminaz),$("#cs-maxaz").val(sensorManager.selectedSensor.obsmaxaz),$("#cs-minel").val(sensorManager.selectedSensor.obsminel),$("#cs-maxel").val(sensorManager.selectedSensor.obsmaxel),$("#cs-minrange").val(sensorManager.selectedSensor.obsminrange),$("#cs-maxrange").val(sensorManager.selectedSensor.obsmaxrange)))}),$("#customSensor").on("submit",function(e){$("#menu-sensor-info").removeClass("bmenu-item-disabled"),$("#menu-fov-bubble").removeClass("bmenu-item-disabled"),$("#menu-surveillance").removeClass("bmenu-item-disabled"),$("#menu-planetarium").removeClass("bmenu-item-disabled"),$("#menu-astronomy").removeClass("bmenu-item-disabled"),sensorManager.whichRadar="CUSTOM",$("#sensor-type").html($("#cs-type").val()),$("#sensor-info-title").html("Custom Sensor"),$("#sensor-country").html("Custom Sensor");var t=$("#cs-lon").val(),a=$("#cs-lat").val(),s=$("#cs-hei").val(),n=$("#cs-type").val(),o=$("#cs-minaz").val(),r=$("#cs-maxaz").val(),i=$("#cs-minel").val(),l=$("#cs-maxel").val(),c=$("#cs-minrange").val(),g=$("#cs-maxrange").val();satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+timeManager.propRate.toString(),setlatlong:!0,sensor:{lat:1*a,long:1*t,obshei:1*s,obsminaz:1*o,obsmaxaz:1*r,obsminel:1*i,obsmaxel:1*l,obsminrange:1*c,obsmaxrange:1*g,type:n}}),satellite.setobs({lat:1*a,long:1*t,obshei:1*s,obsminaz:1*o,obsmaxaz:1*r,obsminel:1*i,obsmaxel:1*l,obsminrange:1*c,obsmaxrange:1*g,type:n}),a*=1,t*=1,g>6e3?changeZoom("geo"):changeZoom("leo"),camSnap(latToPitch(a),longToYaw(t)),e.preventDefault()}),$("#dops-form").on("submit",function(e){N.hideSideMenus(),isDOPMenuOpen=!0,$("#loading-screen").fadeIn(1e3,function(){var e=1*$("#dops-lat").val(),t=1*$("#dops-lon").val(),a=1*$("#dops-alt").val(),s=1*$("#dops-el").val();settingsManager.gpsElevationMask=s,satellite.getDOPsTable(e,t,a),$("#menu-dops").addClass("bmenu-item-selected"),$("#loading-screen").fadeOut("slow"),$("#dops-menu").effect("slide",{direction:"left",mode:"show"},1e3)}),e.preventDefault()});var P=[];N.satChng=function(e){db.log("uiManager.satChng"),-1===e&&0===P.length&&$.get("/analysis/satchng.json?v="+settingsManager.versionNumber).done(function(e){e=[...new Set(e)];for(let n=0;n<e.length;n++){var t=e[n].year>50?"19":"20",a=parseInt(t+e[n].year.toString()),s=timeManager.dateFromDay(a,e[n].day);s=new Date(s.getTime()+e[n].day%1*1440*6e4),e[n].date=s}P=e;var n=document.getElementById("satChng-table");n.innerHTML="";var o=n.insertRow(),r=o.insertCell();r.appendChild(document.createTextNode("Time")),r.setAttribute("style","text-decoration: underline");var i=o.insertCell();i.appendChild(document.createTextNode("Sat")),i.setAttribute("style","text-decoration: underline");var l=o.insertCell();l.appendChild(document.createTextNode("Inc")),l.setAttribute("style","text-decoration: underline");var c=o.insertCell();c.appendChild(document.createTextNode("Per")),c.setAttribute("style","text-decoration: underline");for(let e=0;e<Math.min(P.length,20);e++){o=n.insertRow(),o.setAttribute("class","satChng-object link"),o.setAttribute("hiddenrow",e),r=o.insertCell();for(var g=P[e].date.toJSON(),d="",m=0;m<20;m++)m<10&&(d+=g[m]),10===m&&(d+=" "),m>11&&(d+=g[m-1]);r.appendChild(document.createTextNode(d)),i=o.insertCell(),i.appendChild(document.createTextNode(P[e].SCC)),l=o.insertCell(),l.appendChild(document.createTextNode(P[e].inc.toFixed(2))),c=o.insertCell();let t=P[e].meanmo,a=satSet.getSat(satSet.getIdFromObjNum(P[e].SCC)),s=1440/(parseFloat(a.meanMotion)+t),u=1440/parseFloat(a.meanMotion)-s;c.appendChild(document.createTextNode(u.toFixed(2)))}}),-1!==e&&(searchBox.doSearch(P[e].SCC),$("#anal-sat").val(P[e].SCC))};var U=[],V=[];N.loginPopup=(()=>N.isMembershipMenuOpen?(N.hideSideMenus(),void(N.isMembershipMenuOpen=!1)):(N.toast("Membership Required for this Feature!","critical"),N.hideSideMenus(),$("#membership-menu").effect("slide",{direction:"left",mode:"show"},1e3),void(N.isMembershipMenuOpen=!0))),N.bottomIconPress=(e=>{D(e)}),N.hideSideMenus=function(){db.log("uiManager.hideSideMenus"),$.colorbox.close(),$("#membership-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#sensor-list-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#info-overlay-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#sensor-info-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#watchlist-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#lookangles-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#dops-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#lookanglesmultisite-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#findByLooks-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#twitter-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#map-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#socrates-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#satChng-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#nextLaunch-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#obfit-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#settings-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#editSat-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#newLaunch-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#breakup-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#missile-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#customSensor-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#external-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#analysis-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#color-scheme-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#countries-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#constellations-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#about-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#menu-sensor-list").removeClass("bmenu-item-selected"),$("#menu-info-overlay").removeClass("bmenu-item-selected"),$("#menu-sensor-info").removeClass("bmenu-item-selected"),$("#menu-watchlist").removeClass("bmenu-item-selected"),$("#menu-lookangles").removeClass("bmenu-item-selected"),$("#menu-dops").removeClass("bmenu-item-selected"),$("#menu-lookanglesmultisite").removeClass("bmenu-item-selected"),$("#menu-launches").removeClass("bmenu-item-selected"),$("#menu-find-sat").removeClass("bmenu-item-selected"),$("#menu-twitter").removeClass("bmenu-item-selected"),$("#menu-map").removeClass("bmenu-item-selected"),$("#menu-satellite-collision").removeClass("bmenu-item-selected"),$("#menu-satChng").removeClass("bmenu-item-selected"),$("#menu-settings").removeClass("bmenu-item-selected"),$("#menu-editSat").removeClass("bmenu-item-selected"),$("#menu-newLaunch").removeClass("bmenu-item-selected"),$("#menu-nextLaunch").removeClass("bmenu-item-selected"),$("#menu-breakup").removeClass("bmenu-item-selected"),$("#menu-missile").removeClass("bmenu-item-selected"),$("#menu-external").removeClass("bmenu-item-selected"),$("#menu-analysis").removeClass("bmenu-item-selected"),$("#menu-customSensor").removeClass("bmenu-item-selected"),$("#menu-color-scheme").removeClass("bmenu-item-selected"),$("#menu-countries").removeClass("bmenu-item-selected"),$("#menu-constellations").removeClass("bmenu-item-selected"),$("#menu-obfit").removeClass("bmenu-item-selected"),$("#menu-about").removeClass("bmenu-item-selected"),N.isMembershipMenuOpen=!1,m=!1,u=!1,p=!1,S=!1,f=!1,h=!1,b=!1,settingsManager.isMapMenuOpen=!1,isLookanglesMenuOpen=!1,isDOPMenuOpen=!1,isLookanglesMultiSiteMenuOpen=!1,T=!1,O=!1,x=!1,F=!1,L=!1,isEditSatMenuOpen=!1,isNewLaunchMenuOpen=!1,isBreakupMenuOpen=!1,isMissileMenuOpen=!1,isCustomSensorMenuOpen=!1,v=!1,isAnalysisMenuOpen=!1,w=!1,y=!1,k=!1,C=!1},N.updateWatchlist=function(e,t){if(db.log("uiManager.updateWatchlist"),void 0!==e&&(R=e),void 0!==t&&(j=t),R){settingsManager.isThemesNeeded=!0,E=null!=E;for(var a,s="",n="",o=0;o<R.length;o++)a=satSet.getSatExtraOnly(R[o]),null!=a?n+='<div class="row"><div class="col s3 m3 l3">'+a.SCC_NUM+'</div><div class="col s7 m7 l7">'+a.ON+'</div><div class="col s2 m2 l2 center-align remove-icon"><img class="watchlist-remove" data-sat-id="'+a.id+'" src="images/remove.png"></img></div></div>':R.splice(o,1);for($("#watchlist-list").html(n),o=0;o<R.length;o++)s+=satSet.getSatExtraOnly(R[o]).SCC_NUM,o!==R.length-1&&(s+=",");searchBox.doSearch(s,!0),satSet.setColorScheme(settingsManager.currentColorScheme,!0);var r=[];for(o=0;o<R.length;o++)a=satSet.getSatExtraOnly(R[o]),r[o]=a.SCC_NUM;var i=JSON.stringify(r);localStorage.setItem("watchlistList",i)}};var z=!1;$("#search").on("focus",function(){db.log("$('#search').focus"),z=!0}),$("#ui-wrapper").on("focusin",function(){db.log("$('#ui-wrapper').focusin"),z=!0}),$("#search").on("blur",function(){db.log("('#search').blur"),z=!1}),$("#ui-wrapper").on("focusout",function(){db.log("('#ui-wrapper').focusout"),z=!1}),N.keyUpHandler=(e=>{db.log("uiManager.keyUpHandler"),void 0!==e.key&&(z||("A"===e.key.toUpperCase()&&fpsSideSpeed===-settingsManager.fpsSideSpeed&&(isFPSSideSpeedLock=!1),"D"===e.key.toUpperCase()&&fpsSideSpeed===settingsManager.fpsSideSpeed&&(isFPSSideSpeedLock=!1),"S"===e.key.toUpperCase()&&fpsForwardSpeed===-settingsManager.fpsForwardSpeed&&(isFPSForwardSpeedLock=!1),"W"===e.key.toUpperCase()&&fpsForwardSpeed===settingsManager.fpsForwardSpeed&&(isFPSForwardSpeedLock=!1),"Q"===e.key.toUpperCase()&&(fpsVertSpeed===-settingsManager.fpsVertSpeed&&(isFPSVertSpeedLock=!1),fpsRotateRate=0),"E"===e.key.toUpperCase()&&(fpsVertSpeed===settingsManager.fpsVertSpeed&&(isFPSVertSpeedLock=!1),fpsRotateRate=0),"J"!==e.key.toUpperCase()&&"L"!==e.key.toUpperCase()||(cameraType.current===cameraType.astronomy?fpsRotateRate=0:fpsYawRate=0),"I"!==e.key.toUpperCase()&&"K"!==e.key.toUpperCase()||(fpsPitchRate=0),"SHIFT"===e.key.toUpperCase()&&(cameraManager.isShiftPressed=!1,fpsRun=1,settingsManager.cameraMovementSpeed=.003,settingsManager.cameraMovementSpeedMin=.005,speedModifier=1,isFPSForwardSpeedLock||(fpsForwardSpeed=0),isFPSSideSpeedLock||(fpsSideSpeed=0),isFPSVertSpeedLock||(fpsVertSpeed=0)),"ShiftRight"===e.key&&(cameraManager.isShiftPressed=!1,fpsRun=1,settingsManager.cameraMovementSpeed=.003,settingsManager.cameraMovementSpeedMin=.005,speedModifier=1)))}),N.keyDownHandler=(e=>{db.log("uiManager.keyDownHandler"),void 0!==e.key&&(z||("SHIFT"===e.key.toUpperCase()&&(cameraManager.isShiftPressed=!0,cameraType.current===cameraType.fps&&(fpsRun=.05),speedModifier=8,settingsManager.cameraMovementSpeed=375e-6,settingsManager.cameraMovementSpeedMin=625e-6),"ShiftRight"===e.key&&(cameraManager.isShiftPressed=!0,cameraType.current===cameraType.fps&&(fpsRun=3)),"W"===e.key.toUpperCase()&&cameraType.current===cameraType.fps&&(fpsForwardSpeed=settingsManager.fpsForwardSpeed,isFPSForwardSpeedLock=!0),"A"===e.key.toUpperCase()&&cameraType.current===cameraType.fps&&(fpsSideSpeed=-settingsManager.fpsSideSpeed,isFPSSideSpeedLock=!0),"S"===e.key.toUpperCase()&&cameraType.current===cameraType.fps&&(fpsForwardSpeed=-settingsManager.fpsForwardSpeed,isFPSForwardSpeedLock=!0),"D"===e.key.toUpperCase()&&cameraType.current===cameraType.fps&&(fpsSideSpeed=settingsManager.fpsSideSpeed,isFPSSideSpeedLock=!0),"I"===e.key.toUpperCase()&&(cameraType.current!==cameraType.fps&&cameraType.current!==cameraType.satellite&&cameraType.current!==cameraType.astronomy||(fpsPitchRate=settingsManager.fpsPitchRate/speedModifier)),"K"===e.key.toUpperCase()&&(cameraType.current!==cameraType.fps&&cameraType.current!==cameraType.satellite&&cameraType.current!==cameraType.astronomy||(fpsPitchRate=-settingsManager.fpsPitchRate/speedModifier)),"J"===e.key.toUpperCase()&&(cameraType.current!==cameraType.fps&&cameraType.current!==cameraType.satellite||(fpsYawRate=-settingsManager.fpsYawRate/speedModifier),cameraType.current===cameraType.astronomy&&(fpsRotateRate=settingsManager.fpsRotateRate/speedModifier)),"L"===e.key.toUpperCase()&&(cameraType.current!==cameraType.fps&&cameraType.current!==cameraType.satellite||(fpsYawRate=settingsManager.fpsYawRate/speedModifier),cameraType.current===cameraType.astronomy&&(fpsRotateRate=-settingsManager.fpsRotateRate/speedModifier)),"Q"===e.key.toUpperCase()&&(cameraType.current===cameraType.fps&&(fpsVertSpeed=-settingsManager.fpsVertSpeed,isFPSVertSpeedLock=!0),cameraType.current!==cameraType.satellite&&cameraType.current!==cameraType.astronomy||(fpsRotateRate=settingsManager.fpsRotateRate/speedModifier)),"E"===e.key.toUpperCase()&&(cameraType.current===cameraType.fps&&(fpsVertSpeed=settingsManager.fpsVertSpeed,isFPSVertSpeedLock=!0),cameraType.current!==cameraType.satellite&&cameraType.current!==cameraType.astronomy||(fpsRotateRate=-settingsManager.fpsRotateRate/speedModifier))))}),N.keyHandler=(e=>{if(db.log("uiManager.keyHandler"),void 0!==e.key&&!z){switch(e.key.toUpperCase()){case"R":rotateTheEarth=!rotateTheEarth;break;case"C":switch(cameraType.current===cameraType.planetarium&&orbitManager.clearInViewOrbit(),cameraType.current+=1,cameraType.current==cameraType.fixedToSat&&-1==objectManager.selectedSat&&(cameraType.current+=1),cameraType.current!==cameraType.planetarium||objectManager.isSensorManagerLoaded&&sensorManager.checkSensorSelected()||(cameraType.current+=1),cameraType.current===cameraType.satellite&&-1===objectManager.selectedSat&&(cameraType.current+=1),cameraType.current!==cameraType.astronomy||objectManager.isSensorManagerLoaded&&sensorManager.checkSensorSelected()||(cameraType.current+=1),7===cameraType.current&&(cameraManager.panReset=!0,cameraManager.localRotateReset=!0,settingsManager.fieldOfView=.6,webGlInit(),-1!==objectManager.selectedSat?(camZoomSnappedOnSat=!0,cameraType.current=cameraType.fixedToSat):cameraType.current=cameraType.default,fpsPitch=0,fpsYaw=0,fpsXPos=0,fpsYPos=25e3,fpsZPos=0),cameraType.current){case cameraType.default:N.toast("Earth Centered Camera Mode","standby"),zoomLevel=.5;break;case cameraType.offset:N.toast("Offset Camera Mode","standby");break;case cameraType.fps:N.toast("Free Camera Mode","standby"),$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg");break;case cameraType.planetarium:N.toast("Planetarium Camera Mode","standby"),N.legendMenuChange("planetarium"),$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg");break;case cameraType.satellite:N.toast("Satellite Camera Mode","standby"),$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg");break;case cameraType.astronomy:N.toast("Astronomy Camera Mode","standby"),N.legendMenuChange("astronomy"),$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg")}}switch(e.key){case"!":timeManager.propOffset=0,settingsManager.isPropRateChange=!0;break;case",":timeManager.propOffset-=6e4,settingsManager.isPropRateChange=!0,$("#datetime-input-tb").datepicker("setDate",new Date(timeManager.propRealTime+timeManager.propOffset));break;case".":timeManager.propOffset+=6e4,settingsManager.isPropRateChange=!0,$("#datetime-input-tb").datepicker("setDate",new Date(timeManager.propRealTime+timeManager.propOffset));break;case"<":timeManager.propOffset-=315576e5,settingsManager.isPropRateChange=!0,$("#datetime-input-tb").datepicker("setDate",new Date(timeManager.propRealTime+timeManager.propOffset));break;case">":timeManager.propOffset+=315576e5,settingsManager.isPropRateChange=!0,$("#datetime-input-tb").datepicker("setDate",new Date(timeManager.propRealTime+timeManager.propOffset));break;case"0":timeManager.setPropRateZero(),timeManager.updatePropTime(),timeManager.propOffset=timeManager.getPropOffset(),settingsManager.isPropRateChange=!0;break;case"+":case"=":timeManager.updatePropTime(),timeManager.propOffset=timeManager.getPropOffset(),timeManager.propRate<.001&&timeManager.propRate>-.001&&(timeManager.propRate=.001),timeManager.propRate>1e3&&(timeManager.propRate=1e3),timeManager.propRate<0?timeManager.propRate*=.666666:timeManager.propRate*=1.5,settingsManager.isPropRateChange=!0;break;case"-":case"_":timeManager.updatePropTime(),timeManager.propOffset=timeManager.getPropOffset(),timeManager.propRate<.001&&timeManager.propRate>-.001&&(timeManager.propRate=-.001),timeManager.propRate<-1e3&&(timeManager.propRate=-1e3),timeManager.propRate>0?timeManager.propRate*=.666666:timeManager.propRate*=1.5,settingsManager.isPropRateChange=!0;break;case"1":timeManager.updatePropTime(),timeManager.propOffset=timeManager.getPropOffset(),timeManager.propRate=1,settingsManager.isPropRateChange=!0}settingsManager.isPropRateChange&&(timeManager.propRealTime=Date.now(),timeManager.propTime(),satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+timeManager.propRate.toString()}))}})}),N.hideLoadingScreen=(()=>{earth.isUseHiRes&&!0!==earth.isHiResReady?setTimeout(function(){N.hideLoadingScreen()},100):(settingsManager.isMobileModeEnabled,settingsManager.loadStr("painting"),$("#loading-screen").hide())}),N.resize2DMap=function(){db.log("uiManager.resize2DMap"),$(window).width()>$(window).height()?(settingsManager.mapWidth=$(window).width(),
mapImageDOM.width(settingsManager.mapWidth),settingsManager.mapHeight=3*settingsManager.mapWidth/4,mapImageDOM.height(settingsManager.mapHeight),mapMenuDOM.width($(window).width())):(settingsManager.mapHeight=$(window).height()-100,mapImageDOM.height(settingsManager.mapHeight),settingsManager.mapWidth=4*settingsManager.mapHeight/3,mapImageDOM.width(settingsManager.mapWidth),mapMenuDOM.width($(window).width()))};var D=[];$("#colors-menu>ul>li").on("click",function(){selectSat(-1);var e=$(this).data("color");switch("sunlight"!==e&&satCruncher.postMessage({isSunlightView:!1}),e){case"default":N.legendMenuChange("default"),satSet.setColorScheme(ColorScheme.default,!0),N.colorSchemeChangeAlert(settingsManager.currentColorScheme),settingsManager.isOfficialWebsite&&ga("send","event","ColorScheme Menu","Default Color","Selected");break;case"velocity":N.legendMenuChange("velocity"),satSet.setColorScheme(ColorScheme.velocity),N.colorSchemeChangeAlert(settingsManager.currentColorScheme),settingsManager.isOfficialWebsite&&ga("send","event","ColorScheme Menu","Velocity","Selected");break;case"sunlight":N.legendMenuChange("sunlight"),satSet.setColorScheme(ColorScheme.sunlight,!0),N.colorSchemeChangeAlert(settingsManager.currentColorScheme),settingsManager.isForceColorScheme=!0,satCruncher.postMessage({isSunlightView:!0}),settingsManager.isOfficialWebsite&&ga("send","event","ColorScheme Menu","Sunlight","Selected");break;case"near-earth":N.legendMenuChange("near"),satSet.setColorScheme(ColorScheme.leo),N.colorSchemeChangeAlert(settingsManager.currentColorScheme),settingsManager.isOfficialWebsite&&ga("send","event","ColorScheme Menu","near-earth","Selected");break;case"deep-space":N.legendMenuChange("deep"),satSet.setColorScheme(ColorScheme.geo),N.colorSchemeChangeAlert(settingsManager.currentColorScheme),settingsManager.isOfficialWebsite&&ga("send","event","ColorScheme Menu","Deep-Space","Selected");break;case"elset-age":$("#loading-screen").fadeIn(1e3,function(){N.legendMenuChange("ageOfElset"),satSet.setColorScheme(ColorScheme.ageOfElset),N.colorSchemeChangeAlert(settingsManager.currentColorScheme),settingsManager.isOfficialWebsite&&ga("send","event","ColorScheme Menu","Age of Elset","Selected"),$("#loading-screen").fadeOut("slow")});break;case"lost-objects":$("#search").val(""),$("#loading-screen").fadeIn(1e3,function(){satSet.setColorScheme(ColorScheme.lostobjects),N.colorSchemeChangeAlert(settingsManager.currentColorScheme),settingsManager.isOfficialWebsite&&ga("send","event","ColorScheme Menu","Lost Objects","Selected"),searchBox.doSearch($("#search").val()),$("#loading-screen").fadeOut("slow")});break;case"rcs":N.legendMenuChange("rcs"),satSet.setColorScheme(ColorScheme.rcs),N.colorSchemeChangeAlert(settingsManager.currentColorScheme),settingsManager.isOfficialWebsite&&ga("send","event","ColorScheme Menu","RCS","Selected");break;case"smallsats":N.legendMenuChange("small"),satSet.setColorScheme(ColorScheme.smallsats),N.colorSchemeChangeAlert(settingsManager.currentColorScheme),settingsManager.isOfficialWebsite&&ga("send","event","ColorScheme Menu","Small Satellites","Selected");break;case"countries":N.legendMenuChange("countries"),satSet.setColorScheme(ColorScheme.countries),N.colorSchemeChangeAlert(settingsManager.currentColorScheme),settingsManager.isOfficialWebsite&&ga("send","event","ColorScheme Menu","Countries","Selected")}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),N.hideSideMenus()}),N.useCurrentGeolocationAsSensor=function(){db.log("uiManager.legendColorsChange"),"https:"===location.protocol&&!settingsManager.geolocationUsed&&settingsManager.isMobileModeEnabled&&navigator.geolocation.getCurrentPosition(function(e){settingsManager.geolocation.lat=e.coords.latitude,settingsManager.geolocation.long=e.coords.longitude,settingsManager.geolocation.obshei=0,settingsManager.geolocation.minaz=0,settingsManager.geolocation.maxaz=360,settingsManager.geolocation.minel=30,settingsManager.geolocation.maxel=90,settingsManager.geolocation.minrange=0,settingsManager.geolocation.maxrange=1e5,sensorManager.whichRadar="CUSTOM",$("#cs-lat").val(settingsManager.geolocation.lat).trigger("change"),$("#cs-lon").val(settingsManager.geolocation.long).trigger("change"),$("#cs-hei").val(settingsManager.geolocation.obshei).trigger("change"),$("#cs-telescope").attr("checked","checked"),$("#cs-minaz").attr("disabled",!0),$("#cs-maxaz").attr("disabled",!0),$("#cs-minel").attr("disabled",!0),$("#cs-maxel").attr("disabled",!0),$("#cs-minrange").attr("disabled",!0),$("#cs-maxrange").attr("disabled",!0),$("#cs-minaz-div").hide(),$("#cs-maxaz-div").hide(),$("#cs-minel-div").hide(),$("#cs-maxel-div").hide(),$("#cs-minrange-div").hide(),$("#cs-maxrange-div").hide(),$("#cs-minaz").val(0),$("#cs-maxaz").val(360),$("#cs-minel").val(10),$("#cs-maxel").val(90),$("#cs-minrange").val(100),$("#cs-maxrange").val(5e4),$("#sensor-type").html("Telescope"),$("#sensor-info-title").html("Custom Sensor"),$("#sensor-country").html("Custom Sensor");var t=settingsManager.geolocation.long,a=settingsManager.geolocation.lat,s=settingsManager.geolocation.obshei,n=settingsManager.geolocation.minaz,o=settingsManager.geolocation.maxaz,r=settingsManager.geolocation.minel,i=settingsManager.geolocation.maxel,l=settingsManager.geolocation.minrange,c=settingsManager.geolocation.maxrange;satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+timeManager.propRate.toString(),setlatlong:!0,sensor:{lat:a,long:t,obshei:s,obsminaz:n,obsmaxaz:o,obsminel:r,obsmaxel:i,obsminrange:l,obsmaxrange:c}}),satellite.setobs({lat:a,long:t,obshei:s,obsminaz:n,obsmaxaz:o,obsminel:r,obsmaxel:i,obsminrange:l,obsmaxrange:c}),selectSat(-1),a*=1,t*=1,c>6e3?changeZoom("geo"):changeZoom("leo"),camSnap(latToPitch(a),longToYaw(t))})},N.showCSObjects=(()=>{$("#loading-screen").fadeIn(1e3,function(){satellite.findCloseObjects(),$("#loading-screen").fadeOut("slow")})}),N.legendColorsChange=function(){db.log("uiManager.legendColorsChange"),ColorScheme.resetObjectTypeFlags(),$(".legend-payload-box").css("background",l(settingsManager.colors.payload)),$(".legend-rocketBody-box").css("background",l(settingsManager.colors.rocketBody)),$(".legend-debris-box").css("background",l(settingsManager.colors.debris)),$(".legend-inFOV-box").css("background",l(settingsManager.colors.inview)),$(".legend-facility-box").css("background",l(settingsManager.colors.facility)),$(".legend-sensor-box").css("background",l(settingsManager.colors.sensor)),settingsManager.trusatMode||settingsManager.isExtraSatellitesAdded?$(".legend-trusat-box").css("background",l(settingsManager.colors.trusat)):($(".legend-trusat-box")[1].parentElement.style.display="none",$(".legend-trusat-box")[2].parentElement.style.display="none",$(".legend-trusat-box")[3].parentElement.style.display="none"),$(".legend-velocityFast-box").css("background",l([.75,.75,0,1])),$(".legend-velocityMed-box").css("background",l([.75,.25,0,1])),$(".legend-velocitySlow-box").css("background",l([1,0,0,1])),$(".legend-inviewAlt-box").css("background",l(settingsManager.colors.inviewAlt)),$(".legend-rcsSmall-box").css("background",l(settingsManager.colors.rcsSmall)),$(".legend-rcsMed-box").css("background",l(settingsManager.colors.rcsMed)),$(".legend-rcsLarge-box").css("background",l(settingsManager.colors.rcsLarge)),$(".legend-rcsUnknown-box").css("background",l(settingsManager.colors.rcsUnknown)),$(".legend-ageNew-box").css("background",l(settingsManager.colors.ageNew)),$(".legend-ageMed-box").css("background",l(settingsManager.colors.ageMed)),$(".legend-ageOld-box").css("background",l(settingsManager.colors.ageOld)),$(".legend-ageLost-box").css("background",l(settingsManager.colors.ageLost)),$(".legend-satLEO-box").css("background",l(settingsManager.colors.satLEO)),$(".legend-satGEO-box").css("background",l(settingsManager.colors.satGEO)),$(".legend-satSmall-box").css("background",l(settingsManager.colors.satSmall)),$(".legend-countryUS-box").css("background",l(settingsManager.colors.countryUS)),$(".legend-countryCIS-box").css("background",l(settingsManager.colors.countryCIS)),$(".legend-countryPRC-box").css("background",l(settingsManager.colors.countryPRC)),$(".legend-countryOther-box").css("background",l(settingsManager.colors.countryOther))},N.legendMenuChange=function(e){switch(db.log("uiManager.legendMenuChange"),db.log(e),$("#legend-list-default").hide(),$("#legend-list-default-sensor").hide(),$("#legend-list-rcs").hide(),$("#legend-list-sunlight").hide(),$("#legend-list-small").hide(),$("#legend-list-near").hide(),$("#legend-list-deep").hide(),$("#legend-list-velocity").hide(),$("#legend-list-countries").hide(),$("#legend-list-planetarium").hide(),$("#legend-list-astronomy").hide(),$("#legend-list-ageOfElset").hide(),N.legendColorsChange(),e){case"default":objectManager.isSensorManagerLoaded&&sensorManager.checkSensorSelected()?$("#legend-list-default-sensor").show():$("#legend-list-default").show();break;case"rcs":$("#legend-list-rcs").show();break;case"small":$("#legend-list-small").show();break;case"near":$("#legend-list-near").show();break;case"deep":$("#legend-list-deep").show();break;case"velocity":$("#legend-list-velocity").show();break;case"sunlight":$("#legend-list-sunlight").show();break;case"ageOfElset":$("#legend-list-ageOfElset").show();break;case"countries":$("#legend-list-countries").show();break;case"planetarium":$("#legend-list-planetarium").show();break;case"astronomy":$("#legend-list-astronomy").show();break;case"clear":$("#legend-hover-menu").hide(),objectManager.isSensorManagerLoaded&&sensorManager.checkSensorSelected()?$("#legend-list-default-sensor").show():$("#legend-list-default").show()}settingsManager.currentLegend!==e&&($(".legend-payload-box").css("background",settingsManager.colors.payload),ColorScheme.objectTypeFlags.payload=!0,$(".legend-rocketBody-box").css("background",settingsManager.colors.rocketBodyBody),ColorScheme.objectTypeFlags.rocketBody=!0,$(".legend-debris-box").css("background",settingsManager.colors.debris),ColorScheme.objectTypeFlags.debris=!0,$(".legend-sensor-box").css("background",settingsManager.colors.sensor),ColorScheme.objectTypeFlags.sensor=!0,$(".legend-facility-box").css("background",settingsManager.colors.facility),ColorScheme.objectTypeFlags.facility=!0,$(".legend-missile-box").css("background",settingsManager.colors.missile),ColorScheme.objectTypeFlags.missile=!0,$(".legend-missileInview-box").css("background",settingsManager.colors.missileInview),ColorScheme.objectTypeFlags.missileInview=!0,$(".legend-trusat-box").css("background",settingsManager.colors.trusat),ColorScheme.objectTypeFlags.trusat=!0,$(".legend-inFOV-box").css("background",settingsManager.colors.inview),ColorScheme.objectTypeFlags.inFOV=!0,$(".legend-starLow-box").css("background",settingsManager.colors.starLow),ColorScheme.objectTypeFlags.starLow=!0,$(".legend-starMed-box").css("background",settingsManager.colors.starMed),ColorScheme.objectTypeFlags.starMed=!0,$(".legend-starHi-box").css("background",settingsManager.colors.starHi),ColorScheme.objectTypeFlags.starHi=!0,$(".legend-satLow-box").css("background",settingsManager.colors.sunlight60),ColorScheme.objectTypeFlags.satLow=!0,$(".legend-satMed-box").css("background",settingsManager.colors.sunlight80),ColorScheme.objectTypeFlags.satMed=!0,$(".legend-satHi-box").css("background",settingsManager.colors.sunlight100),ColorScheme.objectTypeFlags.satHi=!0,$(".legend-rcsSmall-box").css("background",settingsManager.colors.rcsSmall),ColorScheme.objectTypeFlags.satSmall=!0,$(".legend-satSmall-box").css("background",settingsManager.colors.satSmall),ColorScheme.objectTypeFlags.rcsSmall=!0,$(".legend-rcsMed-box").css("background",settingsManager.colors.rcsMed),ColorScheme.objectTypeFlags.rcsMed=!0,$(".legend-rcsLarge-box").css("background",settingsManager.colors.rcsLarge),ColorScheme.objectTypeFlags.rcsLarge=!0,$(".legend-rcsUnknown-box").css("background",settingsManager.colors.rcsUnknown),ColorScheme.objectTypeFlags.rcsUnknown=!0,$(".legend-velocitySlow-box").css("background",[1,0,0,1]),ColorScheme.objectTypeFlags.velocitySlow=!0,$(".legend-velocityMed-box").css("background",[.5,.5,0,1]),ColorScheme.objectTypeFlags.velocityMed=!0,$(".legend-velocityFast-box").css("background",[0,1,0,1]),ColorScheme.objectTypeFlags.velocityFast=!0,$(".legend-inviewAlt-box").css("background",settingsManager.colors.inviewAlt),ColorScheme.objectTypeFlags.inviewAlt=!0,$(".legend-satLEO-box").css("background",settingsManager.colors.satLEO),ColorScheme.objectTypeFlags.satLEO=!0,$(".legend-satGEO-box").css("background",settingsManager.colors.satGEO),ColorScheme.objectTypeFlags.satGEO=!0,$(".legend-countryUS-box").css("background",settingsManager.colors.countryUS),ColorScheme.objectTypeFlags.countryUS=!0,$(".legend-countryCIS-box").css("background",settingsManager.colors.countryCIS),ColorScheme.objectTypeFlags.countryCIS=!0,$(".legend-countryPRC-box").css("background",settingsManager.colors.countryPRC),ColorScheme.objectTypeFlags.countryPRC=!0,$(".legend-countryOther-box").css("background",settingsManager.colors.countryOther),ColorScheme.objectTypeFlags.countryOther=!0,$(".legend-ageNew-box").css("background",settingsManager.colors.ageNew),ColorScheme.objectTypeFlags.ageNew=!0,$(".legend-ageMed-box").css("background",settingsManager.colors.ageMed),ColorScheme.objectTypeFlags.ageMed=!0,$(".legend-ageOld-box").css("background",settingsManager.colors.ageOld),ColorScheme.objectTypeFlags.ageOld=!0,$(".legend-ageLost-box").css("background",settingsManager.colors.ageLost),ColorScheme.objectTypeFlags.ageLost=!0),settingsManager.currentLegend=e},N.colorSchemeChangeAlert=(e=>{if(void 0===N.lastColorScheme&&e.default)N.lastColorScheme=e;else if(N.lastColorScheme!=e){N.lastColorScheme=e;for(var t=0;t<Object.keys(ColorScheme).length;t++)e==ColorScheme[Object.keys(ColorScheme)[t]]&&M.toast({html:`Color Scheme changed to ${Object.keys(ColorScheme)[t]}`})}}),$("#editSat>div>input").on({keydown:function(e){_validateNumOnly(e)}}),$("#es-ecen").on({keydown:function(e){190===e.keyCode&&e.preventDefault()}}),$("#es-day").on("keyup",function(){$("#es-day").val()<0&&$("#es-day").val("000.00000000"),$("#es-day").val()>367&&$("#es-day").val("365.00000000")}),$("#es-inc").on("keyup",function(){$("#es-inc").val()<0&&$("#es-inc").val("000.0000"),$("#es-inc").val()>180&&$("#es-inc").val("180.0000")}),$("#es-rasc").on("keyup",function(){$("#es-rasc").val()<0&&$("#es-rasc").val("000.0000"),$("#es-rasc").val()>360&&$("#es-rasc").val("360.0000")}),$("#es-meanmo").on("keyup",function(){$("#es-meanmo").val()<0&&$("#es-meanmo").val("00.00000000"),$("#es-meanmo").val()>18&&$("#es-meanmo").val("18.00000000")}),$("#es-argPe").on("keyup",function(){$("#es-argPe").val()<0&&$("#es-argPe").val("000.0000"),$("#es-argPe").val()>360&&$("#es-argPe").val("360.0000")}),$("#es-meana").on("keyup",function(){$("#es-meana").val()<0&&$("#es-meana").val("000.0000"),$("#es-meana").val()>360&&$("#es-meana").val("360.0000")}),$("#ms-lat").on("keyup",function(){$("#ms-lat").val()<-90&&$("#ms-lat").val("-90.000"),$("#ms-lat").val()>90&&$("#ms-lat").val("90.000")}),$("#ms-lon").on("keyup",function(){$("#ms-lon").val()<-180&&$("#ms-lon").val("-180.000"),$("#ms-lon").val()>180&&$("#ms-lon").val("180.000")}),_validateNumOnly=function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>=35&&e.keyCode<=40||190===e.keyCode||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()};var A=$("#search");$("#country-menu>ul>li").on("click",function(){var e=$(this).data("group");switch(e){case"Canada":void 0===groups.Canada&&(groups.Canada=new groups.SatGroup("countryRegex",/CA/));break;case"China":void 0===groups.China&&(groups.China=new groups.SatGroup("countryRegex",/PRC/));break;case"France":void 0===groups.France&&(groups.France=new groups.SatGroup("countryRegex",/FR/));break;case"India":void 0===groups.India&&(groups.India=new groups.SatGroup("countryRegex",/IND/));break;case"Israel":void 0===groups.Israel&&(groups.Israel=new groups.SatGroup("countryRegex",/ISRA/));break;case"Japan":void 0===groups.Japan&&(groups.Japan=new groups.SatGroup("countryRegex",/JPN/));break;case"Russia":void 0===groups.Russia&&(groups.Russia=new groups.SatGroup("countryRegex",/CIS/));break;case"UnitedKingdom":void 0===groups.UnitedKingdom&&(groups.UnitedKingdom=new groups.SatGroup("countryRegex",/UK/));break;case"UnitedStates":void 0===groups.UnitedStates&&(groups.UnitedStates=new groups.SatGroup("countryRegex",/US/))}_groupSelected(e)}),$("#constellation-menu>ul>li").on("click",function(){var e=$(this).data("group");switch(e){case"SpaceStations":void 0===groups.SpaceStations&&(groups.SpaceStations=new groups.SatGroup("objNum",[25544,41765]));break;case"GlonassGroup":void 0===groups.GlonassGroup&&(groups.GlonassGroup=new groups.SatGroup("nameRegex",/GLONASS/));break;case"GalileoGroup":void 0===groups.GalileoGroup&&(groups.GalileoGroup=new groups.SatGroup("nameRegex",/GALILEO/));break;case"GPSGroup":void 0===groups.GPSGroup&&(groups.GPSGroup=new groups.SatGroup("nameRegex",/NAVSTAR/));break;case"AmatuerRadio":void 0===groups.AmatuerRadio&&(groups.AmatuerRadio=new groups.SatGroup("objNum",[7530,14781,20442,22826,24278,25338,25397,25544,26931,27607,27844,27848,28895,32785,32788,32789,32791,33493,33498,33499,35932,35933,35935,37224,37839,37841,37855,38760,39090,39134,39136,39161,39417,39430,39436,39439,39440,39444,39469,39770,40014,40021,40024,40025,40030,40032,40042,40043,40057,40071,40074,40377,40378,40379,40380,40654,40719,40900,40903,40906,40907,40908,40910,40911,40912,40926,40927,40928,40931,40967,40968,41168,41171,41340,41459,41460,41465,41474,41600,41619,41789,41932,41935,42017]));break;case"aehf":void 0===groups.aehf&&(groups.aehf=new groups.SatGroup("objNum",satSet.convertIdArrayToSatnumArray(satLinkManager.aehf))),$("#loading-screen").fadeIn(1e3,function(){drawLineList=[],satLinkManager.showLinks("aehf"),settingsManager.isOfficialWebsite&&ga("send","event","SatLink Menu","aehf","Selected"),$("#loading-screen").fadeOut("slow")});break;case"wgs":void 0===groups.wgs&&(groups.wgs=new groups.SatGroup("objNum",satSet.convertIdArrayToSatnumArray(satLinkManager.wgs.concat(satLinkManager.dscs)))),$("#loading-screen").fadeIn(1e3,function(){drawLineList=[];try{satLinkManager.showLinks("wgs")}catch(e){}settingsManager.isOfficialWebsite&&ga("send","event","SatLink Menu","wgs","Selected"),$("#loading-screen").fadeOut("slow")});break;case"starlink":void 0===groups.starlink&&(groups.starlink=new groups.SatGroup("objNum",satSet.convertIdArrayToSatnumArray(satLinkManager.starlink))),$("#loading-screen").fadeIn(1e3,function(){drawLineList=[];try{satLinkManager.showLinks("starlink")}catch(e){}settingsManager.isOfficialWebsite&&ga("send","event","SatLink Menu","starlink","Selected"),$("#loading-screen").fadeOut("slow")});break;case"sbirs":void 0===groups.sbirs&&(groups.sbirs=new groups.SatGroup("objNum",satSet.convertIdArrayToSatnumArray(satLinkManager.sbirs))),$("#loading-screen").fadeIn(1e3,function(){drawLineList=[];try{satLinkManager.showLinks("sbirs")}catch(e){}settingsManager.isOfficialWebsite&&ga("send","event","SatLink Menu","sbirs","Selected"),$("#loading-screen").fadeOut("slow")})}_groupSelected(e),searchBox.doSearch($("#search").val())}),_groupSelected=function(e){if(void 0!==e&&void 0!==groups[e]){groups.selectGroup(groups[e]),A.val("");for(var t=groups[e].sats,a=0;a<t.length;a++){var s=groups[e].sats[a].satId,n=satSet.getSat(s).SCC_NUM;a===t.length-1?A.val(A.val()+n):A.val(A.val()+n+",")}searchBox.fillResultBox(groups[e].sats),selectSat(-1),settingsManager.isMobileModeEnabled&&mobile.searchToggle(!0),N.hideSideMenus()}},_resetSensorSelected=function(){satellite.setobs(void 0),sensorManager.setSensor(null,null),satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+timeManager.propRate.toString(),setlatlong:!0,resetObserverGd:!0,sensor:sensorManager.defaultSensor}),satCruncher.postMessage({isShowFOVBubble:"reset",isShowSurvFence:"disable"}),settingsManager.isFOVBubbleModeOn=!1,settingsManager.isShowSurvFence=!1,$("#menu-sensor-info").removeClass("bmenu-item-selected"),$("#menu-fov-bubble").removeClass("bmenu-item-selected"),$("#menu-surveillance").removeClass("bmenu-item-selected"),$("#menu-lookangles").removeClass("bmenu-item-selected"),$("#menu-planetarium").removeClass("bmenu-item-selected"),$("#menu-astronomy").removeClass("bmenu-item-selected"),$("#menu-sensor-info").addClass("bmenu-item-disabled"),$("#menu-fov-bubble").addClass("bmenu-item-disabled"),$("#menu-surveillance").addClass("bmenu-item-disabled"),$("#menu-lookangles").addClass("bmenu-item-disabled"),$("#menu-planetarium").addClass("bmenu-item-disabled"),$("#menu-astronomy").addClass("bmenu-item-disabled"),setTimeout(function(){satSet.resetSatInView(),satSet.setColorScheme(settingsManager.currentColorScheme,!0)},2e3)},_offlineMessage=function(){settingsManager.loadStr("easterEgg")};var P=!0;N.updateURL=(()=>{db.log("uiManager.updateURL",!0);var e=window.location.href.split("?"),t=e[0],a=[];settingsManager.trusatMode&&a.push("trusat"),-1!==objectManager.selectedSat&&void 0!==satSet.getSatExtraOnly(objectManager.selectedSat).SCC_NUM&&a.push("sat="+satSet.getSatExtraOnly(objectManager.selectedSat).SCC_NUM);var s=searchBox.getCurrentSearch();null!=s&&a.push("search="+s),(timeManager.propRate<.99||timeManager.propRate>1.01)&&a.push("rate="+timeManager.propRate),(timeManager.propOffset<-1e3||timeManager.propOffset>1e3)&&a.push("date="+(timeManager.propRealTime+timeManager.propOffset).toString()),a.length>0&&(t+="?"+a.join("&")),window.history.replaceState(null,"Keeptrack",t)}),N.footerToggle=function(){db.log("uiManager.footerToggle"),P?(P=!1,$("#sat-infobox").addClass("sat-infobox-fullsize"),$("#nav-footer").removeClass("footer-slide-up"),$("#nav-footer").addClass("footer-slide-down"),$("#nav-footer-toggle").html("&#x25B2;")):(P=!0,$("#sat-infobox").removeClass("sat-infobox-fullsize"),$("#nav-footer").removeClass("footer-slide-down"),$("#nav-footer").addClass("footer-slide-up"),$("#nav-footer-toggle").html("&#x25BC;"))},N.getsensorinfo=(()=>{$("#sensor-latitude").html(sensorManager.currentSensor.lat),$("#sensor-longitude").html(sensorManager.currentSensor.long),$("#sensor-minazimuth").html(sensorManager.currentSensor.obsminaz),$("#sensor-maxazimuth").html(sensorManager.currentSensor.obsmaxaz),$("#sensor-minelevation").html(sensorManager.currentSensor.obsminel),$("#sensor-maxelevation").html(sensorManager.currentSensor.obsmaxel),$("#sensor-minrange").html(sensorManager.currentSensor.obsminrange),$("#sensor-maxrange").html(sensorManager.currentSensor.obsmaxrange)}),N.startLowPerf=function(){db.log("uiManager.startLowPerf"),window.location.replace("index.htm?lowperf")},N.isTimeMachineRunning=!1,N.toast=((e,t,a)=>{let s=M.toast({html:e});switch(a&&(s.timeRemaining=1e5),t){case"standby":s.$el[0].style.background="#2dccff";break;case"normal":s.$el[0].style.background="#56f000";break;case"caution":s.$el[0].style.background="#fce83a";break;case"serious":s.$el[0].style.background="#ffb302";break;case"critical":s.$el[0].style.background="#ff3838"}}),N.saveHiResPhoto=(e=>{switch(e){case"hd":settingsManager.hiResWidth=1920,settingsManager.hiResHeight=1080;break;case"4k":settingsManager.hiResWidth=3840,settingsManager.hiResHeight=2160;break;case"8k":settingsManager.hiResWidth=7680,settingsManager.hiResHeight=4320}settingsManager.screenshotMode=!0}),N.currentTEARR={},N.panToStar=function(e){db.log("uiManager.panToStar"),db.log(`c: ${e}`,!0);var t=satSet.getIdFromStarName(e.pname),a=satSet.getSat(t);null==a&&(t=satSet.getIdFromStarName(e.bf),a=satSet.getSat(t)),null!=a?(drawLineList=[],objectManager.isStarManagerLoaded&&(starManager.isAllConstellationVisible=!1),debugDrawLine("ref",[a.position.x,a.position.y,a.position.z],[1,.4,0,1]),cameraType.current=cameraType.offset,console.log(a),camSnap(-1*latToPitch(a.dec),longToYaw(a.ra*DEG2RAD)),setTimeout(function(){console.log(`pitch ${camPitch*RAD2DEG} -- yaw ${camYaw*RAD2DEG}`)},2e3)):console.warn("sat is null!")},N.updateMap=function(){if(db.log("uiManager.updateMap"),-1!==objectManager.selectedSat&&settingsManager.isMapMenuOpen){var e,t=satSet.getSat(objectManager.selectedSat);t.getTEARR(),e=mapManager.braun({lon:satellite.degreesLong(N.currentTEARR.lon),lat:satellite.degreesLat(N.currentTEARR.lat)},{meridian:0,latLimit:90}),e.x=e.x*settingsManager.mapWidth-10,e.y=e.y/.6366197723675813*settingsManager.mapHeight-10,$("#map-sat").attr("style","left:"+e.x+"px;top:"+e.y+"px;"),sensorManager.checkSensorSelected()&&(e=mapManager.braun({lon:sensorManager.currentSensor.long,lat:sensorManager.currentSensor.lat},{meridian:0,latLimit:90}),e.x=e.x*settingsManager.mapWidth-10,e.y=e.y/.6366197723675813*settingsManager.mapHeight-10,$("#map-sensor").attr("style","left:"+e.x+"px;top:"+e.y+"px;z-index:11;"));for(var a=1;a<=50;a++)e=mapManager.braun({lon:satellite.map(t,a).lon,lat:satellite.map(t,a).lat},{meridian:0,latLimit:90}),e.x=e.x*settingsManager.mapWidth-3.5,e.y=e.y/.6366197723675813*settingsManager.mapHeight-3.5,e.y>settingsManager.mapHeight/2?$("#map-look"+a).tooltip({delay:50,html:satellite.map(t,a).time,position:"top"}):$("#map-look"+a).tooltip({delay:50,html:satellite.map(t,a).time,position:"bottom"}),1===satellite.map(t,a).inview?$("#map-look"+a).attr("src","images/yellow-square.png"):$("#map-look"+a).attr("src","images/red-square.png"),$("#map-look"+a).attr("style","left:"+e.x+"px;top:"+e.y+"px;"),$("#map-look"+a).attr("time",satellite.map(t,a).time)}},window.uiManager=N})();
!function(){var e,t,s={},n=!1,r=-1,a=!1;s.isResultBoxOpen=function(){return a},s.getLastResultGroup=function(){return t},s.getCurrentSearch=function(){return a?$("#search").val():null},s.isHovering=function(){return n},s.getHoverSat=function(){return r},s.hideResults=function(){$("#search-results").slideUp(),groups.clearSelect(),a=!1,settingsManager.currentColorScheme===ColorScheme.group?satSet.setColorScheme(ColorScheme.default,!0):satSet.setColorScheme(settingsManager.currentColorScheme,!0)},s.doSearch=function(n,r){if(0===n.length)return $("#search").val(""),s.hideResults(),void selectSat(-1);for(var a=(n=n.toUpperCase()).split(","),i=[],l=0;l<satSet.missileSats;l++)for(var c=e[l],o=0;o<a.length;o++){if((n=a[o]).length<=settingsManager.minimumSearchCharacters&&"RV_"!==n)return;var u=a[o].length;if(!c.static){if(c.marker)break;if(!(settingsManager.isSatOverflyModeOn&&c.OT>1)&&(!c.missile||c.active)&&"ANALSAT"!=c.C&&c.ON)if(-1===c.ON.toUpperCase().indexOf(n))if(c.desc){if(-1!==c.desc.toUpperCase().indexOf(n)){i.push({strIndex:c.desc.indexOf(n),isMissile:!0,patlen:u,satId:l});continue}}else-1===c.SCC_NUM.indexOf(n)?-1===c.intlDes.indexOf(n)?-1===c.LV.toUpperCase().indexOf(n)||i.push({strIndex:c.LV.indexOf(n),isLV:!0,patlen:u,satId:l}):i.push({strIndex:c.intlDes.indexOf(n),isIntlDes:!0,patlen:u,satId:l}):i.push({strIndex:c.SCC_NUM.indexOf(n),isSCC_NUM:!0,patlen:u,satId:l});else i.push({strIndex:c.ON.indexOf(n),isON:!0,patlen:u,satId:l})}}i.length>settingsManager.searchLimit&&(i.length=settingsManager.searchLimit);var d=[];for(l=0;l<i.length;l++)d.push(i[l].satId);var h=new groups.SatGroup("idList",d);t=h,selectSat(-1),settingsManager.isSatOverflyModeOn&&satCruncher.postMessage({satelliteSelected:d}),groups.selectGroup(h),uiController.legendMenuChange("clear"),r||s.fillResultBox(i),updateUrl(),settingsManager.themes.retheme()},s.fillResultBox=function(t){for(var s=$("#search-results"),n="",r=0;r<t.length;r++){var i=e[t[r].satId];n+='<div class="search-result" data-sat-id="'+i.id+'">',n+='<div class="truncate-search">',i.missile?n+=i.ON:t[r].isON?(n+=i.ON.substring(0,t[r].strIndex),n+='<span class="search-hilight">',n+=i.ON.substring(t[r].strIndex,t[r].strIndex+t[r].patlen),n+="</span>",n+=i.ON.substring(t[r].strIndex+t[r].patlen)):n+=i.ON,n+="</div>",n+='<div class="search-result-scc">',i.missile?n+=i.desc:t[r].isSCC_NUM?(t[r].strIndex=t[r].strIndex||0,t[r].patlen=t[r].patlen||5,n+=i.SCC_NUM.substring(0,t[r].strIndex),n+='<span class="search-hilight">',n+=i.SCC_NUM.substring(t[r].strIndex,t[r].strIndex+t[r].patlen),n+="</span>",n+=i.SCC_NUM.substring(t[r].strIndex+t[r].patlen)):t[r].isIntlDes?(t[r].strIndex=t[r].strIndex||0,t[r].patlen=t[r].patlen||5,n+=i.intlDes.substring(0,t[r].strIndex),n+='<span class="search-hilight">',n+=i.intlDes.substring(t[r].strIndex,t[r].strIndex+t[r].patlen),n+="</span>",n+=i.intlDes.substring(t[r].strIndex+t[r].patlen)):n+=i.SCC_NUM,n+="</div></div>"}s[0].innerHTML=n,s.slideDown(),settingsManager.themes.retheme(),a=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)},s.init=function(t){e=t,$("#search-results").on("click",".search-result",function(e){var t=$(this).data("sat-id");selectSat(t)}),$("#search-results").on("mouseover",".search-result",function(e){var t=$(this).data("sat-id");orbitDisplay.setHoverOrbit(t),satSet.setHover(t),n=!0,r=t}),$("#search-results").mouseout(function(){orbitDisplay.clearHoverOrbit(),satSet.setHover(-1),n=!1}),$("#search").on("input",function(){var e=$("#search").val();s.doSearch(e)}),$("#all-objects-link").click(function(){if(-1!==selectedSat){var e=satSet.getSatExtraOnly(selectedSat).intlDes.slice(0,8);s.doSearch(e),$("#search").val(e)}}),$("#near-objects-link").click(function(){if(-1!==selectedSat){var e=selectedSat,t=[],n=satSet.getSatPosOnly(e).position,r=n.x-100,a=n.x+100,i=n.y-100,l=n.y+100,c=n.z-100,o=n.z+100;$("#search").val("");for(var u=0;u<satSet.numSats;u++)(n=satSet.getSatPosOnly(u).position).x<a&&n.x>r&&n.y<l&&n.y>i&&n.z<o&&n.z>c&&t.push(satSet.getSatExtraOnly(u).SCC_NUM);for(u=0;u<t.length;u++)u<t.length-1?$("#search").val($("#search").val()+t[u]+","):$("#search").val($("#search").val()+t[u]);s.doSearch($("#search").val())}})},window.searchBox=s}();
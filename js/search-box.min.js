!function(){var e,t,s={},a=!1,n=-1,r=!1;s.isResultBoxOpen=function(){return r},s.getLastResultGroup=function(){return t},s.getCurrentSearch=function(){return r?$("#search").val():null},s.isHovering=function(){return a},s.getHoverSat=function(){return n},s.hideResults=function(){$("#search-results").slideUp(),groups.clearSelect(),r=!1,settingsManager.currentColorScheme===ColorScheme.group?satSet.setColorScheme(ColorScheme.default,!0):satSet.setColorScheme(settingsManager.currentColorScheme,!0)},s.doSearch=function(a,n){if(0===a.length)return $("#search").val(""),s.hideResults(),void selectSat(-1);for(var r=(a=a.toUpperCase()).split(","),i=[],l=0;l<satSet.missileSats;l++)for(var c=e[l],o=0;o<r.length;o++){if((a=r[o]).length<=settingsManager.minimumSearchCharacters&&"RV_"!==a)return;var u=r[o].length;if(!c.static){if(c.marker)break;if(!(settingsManager.isSatOverflyModeOn&&c.OT>1)&&(!c.missile||c.active)&&c.ON)if(-1===c.ON.toUpperCase().indexOf(a))if(c.desc){if(-1!==c.desc.toUpperCase().indexOf(a)){i.push({strIndex:c.desc.indexOf(a),isMissile:!0,patlen:u,satId:l});continue}}else c.active&&(-1===c.SCC_NUM.indexOf(a)?-1===c.intlDes.indexOf(a)?-1===c.LV.toUpperCase().indexOf(a)||i.push({strIndex:c.LV.indexOf(a),isLV:!0,patlen:u,satId:l}):i.push({strIndex:c.intlDes.indexOf(a),isIntlDes:!0,patlen:u,satId:l}):i.push({strIndex:c.SCC_NUM.indexOf(a),isSCC_NUM:!0,patlen:u,satId:l}));else i.push({strIndex:c.ON.indexOf(a),isON:!0,patlen:u,satId:l})}}i.length>settingsManager.searchLimit&&(i.length=settingsManager.searchLimit);var d=[];for(l=0;l<i.length;l++)d.push(i[l].satId);var h=new groups.SatGroup("idList",d);t=h,selectSat(-1),settingsManager.isSatOverflyModeOn&&satCruncher.postMessage({satelliteSelected:d}),groups.selectGroup(h),uiController.legendMenuChange("clear"),n||s.fillResultBox(i),updateUrl(),settingsManager.themes.retheme()},s.fillResultBox=function(t){for(var s=$("#search-results"),a="",n=0;n<t.length;n++){var i=e[t[n].satId];a+='<div class="search-result" data-sat-id="'+i.id+'">',a+='<div class="truncate-search">',i.missile?a+=i.ON:t[n].isON?(a+=i.ON.substring(0,t[n].strIndex),a+='<span class="search-hilight">',a+=i.ON.substring(t[n].strIndex,t[n].strIndex+t[n].patlen),a+="</span>",a+=i.ON.substring(t[n].strIndex+t[n].patlen)):a+=i.ON,a+="</div>",a+='<div class="search-result-scc">',i.missile?a+=i.desc:t[n].isSCC_NUM?(t[n].strIndex=t[n].strIndex||0,t[n].patlen=t[n].patlen||5,a+=i.SCC_NUM.substring(0,t[n].strIndex),a+='<span class="search-hilight">',a+=i.SCC_NUM.substring(t[n].strIndex,t[n].strIndex+t[n].patlen),a+="</span>",a+=i.SCC_NUM.substring(t[n].strIndex+t[n].patlen)):t[n].isIntlDes?(t[n].strIndex=t[n].strIndex||0,t[n].patlen=t[n].patlen||5,a+=i.intlDes.substring(0,t[n].strIndex),a+='<span class="search-hilight">',a+=i.intlDes.substring(t[n].strIndex,t[n].strIndex+t[n].patlen),a+="</span>",a+=i.intlDes.substring(t[n].strIndex+t[n].patlen)):a+=i.SCC_NUM,a+="</div></div>"}s[0].innerHTML=a,s.slideDown(),settingsManager.themes.retheme(),r=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)},s.init=function(t){e=t,$("#search-results").on("click",".search-result",function(e){var t=$(this).data("sat-id");selectSat(t)}),$("#search-results").on("mouseover",".search-result",function(e){var t=$(this).data("sat-id");orbitDisplay.setHoverOrbit(t),satSet.setHover(t),a=!0,n=t}),$("#search-results").mouseout(function(){orbitDisplay.clearHoverOrbit(),satSet.setHover(-1),a=!1}),$("#search").on("input",function(){var e=$("#search").val();s.doSearch(e)}),$("#all-objects-link").click(function(){if(-1!==selectedSat){var e=satSet.getSatExtraOnly(selectedSat).intlDes.slice(0,8);s.doSearch(e),$("#search").val(e)}}),$("#near-objects-link").click(function(){if(-1!==selectedSat){var e=selectedSat,t=[],a=satSet.getSatPosOnly(e).position,n=a.x-100,r=a.x+100,i=a.y-100,l=a.y+100,c=a.z-100,o=a.z+100;$("#search").val("");for(var u=0;u<satSet.numSats;u++)(a=satSet.getSatPosOnly(u).position).x<r&&a.x>n&&a.y<l&&a.y>i&&a.z<o&&a.z>c&&t.push(satSet.getSatExtraOnly(u).SCC_NUM);for(u=0;u<t.length;u++)u<t.length-1?$("#search").val($("#search").val()+t[u]+","):$("#search").val($("#search").val()+t[u]);s.doSearch($("#search").val())}})},window.searchBox=s}();
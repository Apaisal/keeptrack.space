!function(){var e={missilesInUse:0,lastMissileError:"",RussianICBM:[52.5000001,82.75000015,"Aleysk (SS-18)",16e3,50.75000015,59.5000001,"Dombarovskiy (SS-18)",16e3,55.3333334,89.80000016,"Uzhur (SS-18)",16e3,53+58*.01666667,57.8333335,"Kartaly (SS-18)",16e3,52.31666673,104.23333338,"Irkutsk (SS-25)",10500,56.36666674,95.46666676,"Kansk (SS-25)",10500,54.03333334,35.76666682,"Kozel`sk (SS-19)",1e4,56.36666674,92.41666675,"Krasnoyarsk (SS-25)",10500,58.06666668,60.55000011,"Nizhniy Tagil (SS-25)",10500,55.3333334,83,"Novosibirsk (SS-25)",10500,51.6666668,45.56666678,"Tatishchevo (SS-19)",1e4,51.6666668,45.56666678,"Tatishchevo (SS-27)",10500,56.85000017,40.53333344,"Teykovo (SS-25)",10500,56.63333346,47.85000017,"Yoshkar Ola (SS-25)",10500,72.039545,42.696683,"Verkhoturye (SS-N-23A)",8300,73.902056,3.133463,"Ekaterinburg (SS-N-23A)",8300,76.502284,-158.871984,"Tula (SS-N-23A)",8300,82.25681,-10.161045,"Bryansk (SS-N-23A)",8300,81.564646,32.553796,"Karelia (SS-N-23A)",8300,74.67366,6.538173,"Novomoskovsk (SS-N-23A)",8300,71.920763,41.039876,"Borei Sub (Bulava)",9300,71.920763,41.039876,"Delta IV Sub (Sineva)",8300,71.920763,41.039876,"Delta IV Sub (Layner)",12e3],ChinaICBM:[32.997534,112.537904,"Nanyang (DF-31)",8e3,36.621398,101.773908,"Xining (DF-31)",8e3,37.797257,97.079547,"Delingha (DF-31A)",11e3,37.07045,100.805779,"Haiyan (DF-31A)",11e3,40.079969,113.29994,"Datong (DF-31A)",11e3,34.583156,105.724525,"Tainshui (DF-31A)",11e3,38.552936,106.020538,"Xixia (DF-31A)",11e3,27.242253,111.465223,"Shaoyang (DF-31A)",11e3,24.34658,102.527838,"Yuxi (DF-31A)",11e3,34.345845,111.491062,"Luoyang (DF-5A/B)",13e3,38.917086,111.847057,"Wuzhai (DF-5A/B)",13e3,40.615707,115.107604,"Xuanhua (DF-5A/B)",13e3,26.163848,109.790408,"Tongdao (DF-5A/B)",13e3,34.061291,111.054379,"Lushi (DF-5A/B)",13e3,30.691542,118.437169,"Jingxian (DF-5A/B)",13e3,37.707532,116.271994,"Jingxian (DF-5A/B)",13e3,27.415932,111.792471,"Hunan (DF-5A/B)",13e3,46.585153,125.104037,"Daqing City (DF-41)",13500,32.154153,114.099875,"Xinyang City (DF-41)",13500,40.4417,85.530745,"Xinjiang Province (DF-41)",13500,31.271257,88.699152,"Tibet Province (DF-41)",13500,29.573548,122.923151,"Type 092 Sub (JL-2)",8e3],NorthKoreanBM:[40,128.3,"Sinpo Sub (Pukkŭksŏng-1)",2500,40.019,128.193,"Sinpo (KN-14)",8e3,39.365,126.165,"P`yong`an (KN-20)",1e4,39.046,125.667,"Pyongyang (KN-22)",13e3],UsaICBM:[48.420079,-101.33356,"Ohio Sub (Trident II)",12e3,48.420079,-101.33356,"Minot (Minuteman III)",13e3,47.505958,-111.181776,"Malmstrom (Minuteman III)",13e3,41.149931,-104.860645,"F.E. Warren (Minuteman III)",13e3],FraSLBM:[47.878,-4.263,"Triomphant Sub (M51)",1e4,47.878,-4.263,"Triomphant Sub (M51)",1e4],ukSLBM:[56.066111,-4.8175,"Vanguard Sub (Trident II)",12e3,56.066111,-4.8175,"HMNB Clyde (Trident II)",12e3],globalBMTargets:[38.951,-77.013,"Washington DC",40.679,-73.947,"New York City",34.073,-118.248,"Los Angeles",41.877,-87.622,"Chicago",42.361,-71.058,"Boston",47.749,-122.317,"Seattle",25.784,-80.196,"Miami",32.828,-96.759,"Dallas",38.765,-104.837,"Colorado Springs",41.33,-96.054,"Omaha",19.832,-155.491,"Hawaii",13.588,144.922,"Guam",51.50634,-.097485,"London",48.874195,2.378987,"Paris",24.503,-66.127,"French Caribean",40.449889,-3.717309,"Madrid",41.931955,12.520198,"Rome",52.501746,13.416486,"Berlin",43.706946,-79.423854,"Toronto",55.750246,37.691525,"Moscow",59.887535,30.38409,"St. Petersburg",55.017165,82.965879,"Novosibirsk",39.974338,116.396057,"Beijing",39.044051,125.735244,"Pyongyang"]};window.missileManager=e;var a,t,s,i,n,r,o,h,u=[40.679,-73.947,42.361,-71.058,41.755,-70.539,41.763,-72.684,42.101,-72.59,39.408,-74.441,39.191,-75.534,39.331,-76.671,38.951,-77.013,37.608,-77.378,42.36,-83.048,39.844,-86.172,40.008,-83,40.538,-79.934,40.034,-75.131,47.749,-122.317,45.7,-122.581,47.732,-117.389,37.889,-122.562,36.257,-115.159,48.034,-101.295,49.134,-101.495,48.234,-100.295,48.334,-101.095,48.434,-101.295,47.948,-97.027,45.107,-93.306,47.092,-110.334,47.292,-111.834,47.592,-111.934,46.792,-111.334,47.992,-111.534,47.792,-110.734,48.592,-111.534,47.292,-111.334,46.092,-111.134,47.592,-110.034,40.21,-104.811,41.51,-105.811,41.21,-104.211,40.51,-104.211,41.21,-105.611,41.51,-104.611,41.21,-103.011,42.21,-104.011,41.91,-104.811,41.91,-104.811,34.048,-118.28,19.832,-155.491,13.588,144.922,36.318,-86.718,32.782,-97.343,32.584,-99.707,35.208,-101.837,35.188,-106.595,33.603,-111.965,38.765,-104.837,38.737,-104.883,39.847,-104.902,40.684,-105.059,40.852,-111.827,61.343,-150.187,64.94,-147.881,58.488,-134.238,30.46,-86.549,41.33,-96.054,39.113276,-121.356137,64.303735,-149.148768,76.534322,-68.718288,41.875523,-87.634038,35.145865,-89.979153,43.663448,-70.278127,43.612156,-116.231845],l=[];e.missileArray=l;function M(e){return 101325*Math.exp(-.2841957*e/2394.57888)}function p(e,u,l,p,g,m,c,d,f,S,v,I){var b;b=p<12e5?.0174533*(90-I*(1.5336118956+.00443173537387*p-9.30373890848*Math.pow(10,-8)*Math.pow(p,2)+8.37838197732*Math.pow(10,-13)*Math.pow(p,3)-2.71228576626*Math.pow(10,-18)*Math.pow(p,4))):30;var C=a+p,B=Math.atan2(c,d);if(u>0){var w=s*e*i;u+=(v-w)*h}else u=0;var L=u+g+n,D=function(e){return(e/=1e3)<12.5?276.642857143-5.02285714286*e:e<20?213:e<47.5?171.224358974+2.05384615385*e:e<52.5?270:e<80?435.344405594-3.13916083916*e:e<90?183:e<110?4.47*e-221.111111111:e<120?10.6*e-894:e>=120?378:void 0}(p),T=M(p),A=T/(r*D),R=Math.pow(1.4*r*D,.5),y=Math.sqrt(Math.pow(c,2)+Math.pow(d,2))/R,U=function(e){return e<.5?.125:e<1.1875?2.30117394072*e-.329086061307+-4.06597222013*Math.pow(e,2)+3.01851851676*Math.pow(e,3)+-.666666666129*Math.pow(e,4):e<1.625?.10937644721+-4.61979595244*e+9.72917139612*Math.pow(e,2)+-6.33333563852*Math.pow(e,3)+1.33333375211*Math.pow(e,4):e<3.625?.97916002909+-.540978181863*e+.125235817144*Math.pow(e,2)+-.00666103733277*Math.pow(e,3)+-.000558009790208*Math.pow(e,4):e>3.625?.25:void 0}(Math.abs(y)),k=0;u>0&&(k=function(e,a,t,s){var i=1.2,n=25*Math.pow(10,6),r=e,o=M(s),h=M(a),u=r/Math.pow(1.1*n,-i/(i-1))*Math.sqrt(1059349.509986226),l=Math.sqrt(2/(i-1)*Math.pow(n/o,(i-1)/i-1)),p=u/l*Math.pow(1+(i-1)/2*Math.pow(l,2)/1.1,2.2/(2*(i-1)));p>t&&(p=t);var g=16780096.238181822*Math.pow(1-h/n,(i-1)/i);return r*Math.sqrt(g)+(h-o)*p}(w,p,e,m));var E=.5*A*(Math.pow(c,2)+Math.pow(d,2))*l*U,N=o*t*L/Math.pow(C,2),x=(k*Math.sin(b)-E*Math.sin(B)-N)/L+C*Math.pow(d/C,2);p+=(c+=x*h)*h,f+=d*h;var z=d*a/C;S+=z*h;var F=(k*Math.cos(b)-E*Math.cos(B))/L-2*c*(d/C);return[u,L,D,T,A,R,y,U,k,E,N,x,c,p,f,z,S,F,d+=F*h]}function g(e,a,t,i,n,r,o,h,u,l,M,g,m,c,d,f){for(var S,v,I=[],b=[];t/s/i>.4&&r>=0;)t=(I=p(e,t,n,r,o,l,M,g,m,c,d,f))[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],M=I[12],r=I[13],b.push(r),m=I[14],I[15],c=I[16],I[17],g=I[18],S=r;for(;t/s/i>.19&&r>=0;)t=(I=p(e,t,n,r,h,S,M,g,m,c,d,f))[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],M=I[12],r=I[13],b.push(r),m=I[14],I[15],c=I[16],I[17],g=I[18],v=r;for(;t/s/i>0&&r>=0;)t=(I=p(a,t,n,r,u,v,M,g,m,c,d,f))[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],M=I[12],r=I[13],b.push(r),m=I[14],I[15],c=I[16],I[17],g=I[18];for(;r>0;)t=(I=p(a,t=0,n,r,u,v,M,g,m,c,d,f))[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],M=I[12],r=I[13],b.push(r),m=I[14],I[15],c=I[16],I[17],g=I[18];for(var C=0,B=0;B<b.length;B++)b[B]>C&&(C=b[B]);return m}e.MassRaidPre=function(a,t){!function(){e.missilesInUse=0,searchBox.hideResults();for(var a=satSet.getSatData().length,t=0;t<500;t++){var s=a-500+t,i=satSet.getSat(s);i.active=!1,satCruncher.postMessage({id:i.id,typ:"newMissile",ON:"RV_"+i.name,satId:i.id,static:i.static,missile:i.missile,active:i.active,type:i.type,name:i.name,latList:i.latList,lonList:i.lonList,altList:i.altList,startTime:i.startTime})}}(),$.get(t,function(t){t;for(var s=satSet.missileSats,i=0;i<t.length;i++){var n=s-500+i;t[i].startTime=a,satSet.setSat(n,t[i]);var r=satSet.getSat(n);r&&(r.id=s-500+i,satCruncher.postMessage({id:r.id,typ:"newMissile",ON:"M00"+r.name,satId:r.id,static:r.static,missile:r.missile,active:r.active,type:r.type,name:r.name,latList:r.latList,lonList:r.lonList,altList:r.altList,startTime:r.startTime}),orbitDisplay.updateOrbitBuffer(r.id,null,null,null,!0,r.latList,r.lonList,r.altList,r.startTime))}e.missileArray=t})},e.MassRaid=function(a,t,s){var i=0,n=500-e.missilesInUse,r=0,o=0,h=!1,l=0,M=0;if("Russia"===s)for(console.info("Russian Mass Raid Start: "+Date.now()),h=!1,o=0,i=0;i<e.RussianICBM.length/4;i++){for(h&&(o=0,h=!1),r=0;r<u.length/2;r++)n<=100||8300!==e.RussianICBM[4*i+3]&&o>19||8300===e.RussianICBM[4*i+3]&&o>11||Math.random()<.3&&(l=1*a+240*Math.random()*1e3,o+=M=e.Missile(e.RussianICBM[4*i],e.RussianICBM[4*i+1],u[2*r],u[2*r+1],3,satSet.getSatData().length-n,l,e.RussianICBM[4*i+2],30,2.9,t,e.RussianICBM[4*i+3],"Russia"),n-=M,console.info("Missiles Launched: "+(500-n)+" - "+e.RussianICBM[4*i+2]));n<=100||(8300!==e.RussianICBM[4*i+3]&&o<=18&&r>=u.length/2||8300===e.RussianICBM[4*i+3]&&o<=10&&r>=u.length/2?(i--,h=!1):h=!0)}else if("China"===s)for(console.info("Chinese Mass Raid Start: "+Date.now()),h=!1,o=0,i=0;i<e.ChinaICBM.length/4;i++){for(h&&(o=0,h=!1),r=0;r<u.length/2;r++)n<=248||o>12||Math.random()<.3&&(l=a+240*Math.random()*1e3,o+=M=e.Missile(e.ChinaICBM[4*i],e.ChinaICBM[4*i+1],u[2*r],u[2*r+1],3,satSet.getSatData().length-n,l,e.ChinaICBM[4*i+2],30,2.9,t,e.ChinaICBM[4*i+3],"China"),n-=M,console.info("Missiles Launched: "+(500-n)));n<=248||(o<=11&&r>=u.length/2?(i--,h=!1):h=!0)}else if("North Korea"===s)for(console.info("North Korea Mass Raid Start: "+Date.now()),h=!1,o=0,i=0;i<e.NorthKoreanBM.length/4;i++){for(h&&(o=0,h=!1),r=0;r<u.length/2;r++)n<=470||o>12||Math.random()<.3&&(l=a+240*Math.random()*1e3,o+=M=e.Missile(e.NorthKoreanBM[4*i],e.NorthKoreanBM[4*i+1],u[2*r],u[2*r+1],3,satSet.getSatData().length-n,l,e.NorthKoreanBM[4*i+2],30,2.9,t,e.NorthKoreanBM[4*i+3],"North Korea"),n-=M,console.info("Missiles Launched: "+(500-n)));n<=470||(o<=4&&r>=u.length/2?(i--,h=!1):h=!0)}else if("USA2Russia"===s||"USA2China"===s||"USA2NorthKorea"===s){for(console.info("USA Mass Raid Start: "+Date.now()),h=!1,o=0,i=0;i<e.UsaICBM.length/4;i++)if(r=0,h&&(o=0,h=!1),"USA2Russia"===s){for(r=0;r<e.RussianICBM.length/4;r++)n<=150||o>50||Math.random()<.3&&(l=a+240*Math.random()*1e3,o+=M=e.Missile(e.UsaICBM[4*i],e.UsaICBM[4*i+1],e.RussianICBM[4*r],e.RussianICBM[4*r+1],3,satSet.getSatData().length-n,l,e.UsaICBM[4*i+2],30,2.9,t,e.UsaICBM[4*i+3],"United States"),n-=M,console.info("Missiles Launched: "+(500-n)));n>150&&(o<=50?(i--,h=!1):h=!0)}else if("USA2China"===s){for(r=0;r<e.ChinaICBM.length/4;r++)n<=150||o>50||Math.random()<.3&&(l=a+240*Math.random()*1e3,o+=M=e.Missile(e.UsaICBM[4*i],e.UsaICBM[4*i+1],e.ChinaICBM[4*r],e.ChinaICBM[4*r+1],3,satSet.getSatData().length-n,l,e.UsaICBM[4*i+2],30,2.9,t,e.UsaICBM[4*i+3],"United States"),n-=M,console.info("Missiles Launched: "+(500-n)));n>150&&(o<=50?(i--,h=!1):h=!0)}else if("USA2NorthKorea"===s){for(r=0;r<e.NorthKoreanBM.length/4;r++)n<=482||o>5||Math.random()<.3&&(l=a+240*Math.random()*1e3,o+=M=e.Missile(e.UsaICBM[4*i],e.UsaICBM[4*i+1],e.NorthKoreanBM[4*r],e.NorthKoreanBM[4*r+1],3,satSet.getSatData().length-n,l,e.UsaICBM[4*i+2],30,2.9,t,e.UsaICBM[4*i+3],"United States"),n-=M,console.info("Missiles Launched: "+(500-n)));n>150&&(o<=5?(i--,h=!1):h=!0)}e.missilesInUse=500-n}},e.Missile=function(u,M,m,c,d,f,S,v,I,b,C,B,w,L){var D,T=satSet.getSat(f);if(I=I||17,b=b||3.1,u>90||u<-90)return console.error("Error: Current Latitude must be between 90 and -90 degrees"),0;if(M>180||M<-180)return console.error("Error: Current Longitude must be between 180 and -180 degrees"),0;if(m>90||m<-90)return e.lastMissileError="Error: Target Latitude must be<br>between 90 and -90 degrees",0;if(c>180||c<-180)return e.lastMissileError="Error: Target Longitude must be<br>between 90 and -90 degrees",0;if(d>12)return console.error("Error: Rocket can hold up to 12 warheads"),0;if(parseFloat(d)%1>0)return console.error("Error: The number of warheads must be a whole number"),0;void 0===L&&(L=0),a=6371e3,r=287,o=6.67384*Math.pow(10,-11),t=5.9726*Math.pow(10,24);var A,R,y,U,k=[],E=[];if(R=(U=function(e,t,s,i){var n,r=a,o=e*Math.PI/180,h=t*Math.PI/180,u=s*Math.PI/180,l=i*Math.PI/180;l-h>=-180&&l-h<=180&&(n=l-h);l-h>180&&(n=l-h-2*Math.PI);l-h<-180&&(n=l-h+2*Math.PI);for(var M,p=Math.atan2(Math.sin(n),Math.cos(o)*Math.tan(u)-Math.sin(o)*Math.cos(n)),g=Math.acos(Math.sin(o)*Math.sin(u)+Math.cos(o)*Math.cos(u)*Math.cos(n)),m=g*r,c=Math.asin(Math.sin(p)*Math.cos(o)),d=Math.atan2(Math.tan(o),Math.cos(p)),f=d+g,S=Math.atan2(Math.sin(c)*Math.sin(d),Math.cos(d)),v=h-S,I=[],b=[],C=[],B=[],w=[],L=[],D=[],T=[],A=[],R=0;R<=2400;R++){var y=d+R*(f-d)/2e3,U=180*Math.asin(Math.cos(c)*Math.sin(y))/Math.PI,k=180*(v+Math.atan2(Math.sin(c)*Math.sin(y),Math.cos(y)))/Math.PI;2e3===R&&(M=(y-d)*r),A.push((y-d)*r/1e3),k>=-180&&k<=180?(L.push(k),b.push(U)):k<-180?(T.push(k+360),B.push(U)):k>180&&(D.push(k-360),C.push(U))}for(R=0;R<b.length;R++)I.push(b[R]);for(R=0;R<C.length;R++)I.push(C[R]);for(R=0;R<B.length;R++)I.push(B[R]);for(R=0;R<L.length;R++)w.push(L[R]);for(R=0;R<D.length;R++)w.push(D[R]);for(R=0;R<T.length;R++)w.push(T[R]);return[I,w,180*p/Math.PI,m,A,M]}(u,M,m,c))[0],y=U[1],U[2],pe=U[3],A=U[4],D=U[5],pe<32e4)return e.lastMissileError="Error: This missile has a minimum distance of 320 km.",0;if(pe>1e3*B)return e.lastMissileError="Error: This missile has a maximum distance of "+B+" km.",0;var N=L*(Math.min(3,B/(pe/1e3))/2);n=500*d;var x=.050389573*b,z=.25*Math.PI*Math.pow(b,2),F=1628.75*(.25*Math.PI*I*(Math.pow(b,2)-Math.pow(b-x,2))),P=407.1875*Math.PI*(.4937*I)*(Math.pow(b,2)-Math.pow(b-x,2)),K=407.1875*Math.PI*(.157*I)*(Math.pow(.75*b,2)-(Math.pow(x/2),2));i=C||.042,s=1750;var O=.25*Math.PI*Math.pow(b-x,2),G=.25*Math.PI*Math.pow(.75*b-x,2),_=O*(.651*I)+G*(.178*I),H=s*_,V=H+F+n,q=.001,j=.001,X=0,Y=0,J=0,W=0;h=1;for(var $=[],Q=[],Z=[],ee=[],ae=[],te=[],se=[],ie=[],ne=[],re=[],oe=[],he=[],ue=[],le=0;le<1e5;le++)ue.push(le);for(var Me,pe,ge,me,ce,de,fe,Se,ve,Ie,be,Ce,Be=[],we=[],Le=[],De=[],Te=[],Ae=[],Re=[],ye=[],Ue=[],ke=[],Ee=[],Ne=[],xe=[],ze=[],Fe=[],Pe=[],Ke=[],Oe=function(e,a,t,s,i,n,r,o,h,u,l,M,p,m,c,d,f){for(var S=[],v=0;v<500;v++){var I=1*v/500/2+.5;S.push(g(e,a,t,s,i,n,r,o,h,u,l,M,p,m,c,I))}var b=S[0],C=Math.abs(S[0]-f);for(v=0;v<S.length;v++){var B=Math.abs(S[v]-f);B<C&&(C=B,b=S[v])}for(v=0;v<500;v++)if(S[v]===b){var w=v;break}I=1*w/500/2+.5;var L=g(e,a,t,s,i,n,r,o,h,u,l,M,p,m,c,T=((R=(w-2)/500/2+.5)+(A=(w+2)/500/2+.5))/2),D=100*Math.abs((f-L)/f);for(;D>.01&&Math.abs(A-R)>=1e-4;){var T=(R+A)/2;if(D=100*Math.abs((f-g(e,a,t,s,i,n,r,o,h,u,l,M,p,m,c,T))/f),g(e,a,t,s,i,n,r,o,h,u,l,M,p,m,c,T)>f)var A=T;else var R=T}return I=T}(O,G,H,_,z,X,F,P,K,0,j,q,Y,J,0,0,D);H/s/_>.4&&X>=0;){var Ge=p(O,H,z,X,F,0,j,q,Y,J,0,Oe);H=Ge[0],V=Ge[1],Ce=Ge[2],be=Ge[3],Ie=Ge[4],ve=Ge[5],Se=Ge[6],fe=Ge[7],de=Ge[8],ce=Ge[9],me=Ge[10],ge=Ge[11],j=Ge[12],X=Ge[13],Y=Ge[14],Ge[15],J=Ge[16],Me=Ge[17],q=Ge[18];var _e,He=X;for(Q.push(Math.cos(J/a)*(X+a)),$.push(Math.sin(J/a)*(X+a)),Z.push(me/V),he.push(de/1e3),ne.push(Se),ee.push(Math.round(X/1e3*100)/100),ae.push(Y/1e3),te.push(J/1e3),le=0;le<A.length;le++)if(A[le]<=Y/1e3&&!(A[le+1]<=Y/1e3)){k.push(Math.round(100*R[le])/100),E.push(Math.round(100*y[le])/100);break}for(se.push(j),ie.push(q),le=0;le<oe.length;le++)_e+=oe[le];oe.push(h+_e),we.push(ge),Le.push(Me),X<12e4&&De.push(ce/1e3),X<1e5&&Te.push(ve),X<12e4&&Ae.push(Ie),X<12e4&&Re.push(be/101325),X<1e5&&ye.push(Ce),X<1e5&&Be.push(fe),H>0&&re.push(H),Ke.push(W),W+=1}for(;H/s/_>.19&&X>=0;){H=(Ge=p(O,H,z,X,P,He,j,q,Y,J,0,Oe))[0],V=Ge[1],Ce=Ge[2],be=Ge[3],Ie=Ge[4],ve=Ge[5],Se=Ge[6],fe=Ge[7],de=Ge[8],ce=Ge[9],me=Ge[10],ge=Ge[11],j=Ge[12],X=Ge[13],Y=Ge[14],Ge[15],J=Ge[16],Me=Ge[17],q=Ge[18];var Ve=X;for(Q.push(Math.cos(J/a)*(X+a)),$.push(Math.sin(J/a)*(X+a)),Z.push(me/V),he.push(de/1e3),ne.push(Se),ee.push(Math.round(X/1e3*100)/100),ae.push(Y/1e3),te.push(J/1e3),le=0;le<A.length;le++)if(A[le]<=Y/1e3&&!(A[le+1]<=Y/1e3)){k.push(Math.round(100*R[le])/100),E.push(Math.round(100*y[le])/100);break}for(se.push(j),ie.push(q),le=0;le<oe.length;le++)_e+=oe[le];oe.push(h+_e),we.push(ge),Le.push(Me),X<12e4&&De.push(ce/1e3),X<1e5&&Te.push(ve),X<12e4&&Ae.push(Ie),X<12e4&&Re.push(be/101325),X<1e5&&ye.push(Ce),X<1e5&&Be.push(fe),H>0&&re.push(H),Ke.push(W),W+=1}for(;H/s/_>0&&X>=0;){for(H=(Ge=p(G,H,z,X,K,Ve,j,q,Y,J,0,Oe))[0],V=Ge[1],Ce=Ge[2],be=Ge[3],Ie=Ge[4],ve=Ge[5],Se=Ge[6],fe=Ge[7],de=Ge[8],ce=Ge[9],me=Ge[10],ge=Ge[11],j=Ge[12],X=Ge[13],Y=Ge[14],Ge[15],J=Ge[16],Me=Ge[17],q=Ge[18],Q.push(Math.cos(J/a)*(X+a)),$.push(Math.sin(J/a)*(X+a)),Z.push(me/V),he.push(de/1e3),ne.push(Se),ee.push(Math.round(X/1e3*100)/100),ae.push(Y/1e3),te.push(J/1e3),le=0;le<A.length;le++)if(A[le]<=Y/1e3&&!(A[le+1]<=Y/1e3)){k.push(Math.round(100*R[le])/100),E.push(Math.round(100*y[le])/100);break}for(se.push(j),ie.push(q),le=0;le<oe.length;le++)_e+=oe[le];oe.push(h+_e),we.push(ge),Le.push(Me),X<12e4&&De.push(ce/1e3),X<1e5&&Te.push(ve),X<12e4&&Ae.push(Ie),X<12e4&&Re.push(be/101325),X<1e5&&ye.push(Ce),X<1e5&&Be.push(fe),H>0&&re.push(H),Ke.push(W),W+=1}for(;X>0;){for(H=(Ge=p(G,H=0,z,X,K,Ve,j,q,Y,J,0,Oe))[0],V=Ge[1],Ce=Ge[2],be=Ge[3],Ie=Ge[4],ve=Ge[5],Se=Ge[6],fe=Ge[7],de=Ge[8],ce=Ge[9],me=Ge[10],ge=Ge[11],j=Ge[12],X=Ge[13],Y=Ge[14],Ge[15],J=Ge[16],Me=Ge[17],q=Ge[18],Q.push(Math.cos(J/a)*(X+a)),$.push(Math.sin(J/a)*(X+a)),Z.push(me/V),ne.push(Se),ee.push(Math.round(X/1e3*100)/100),ae.push(Y/1e3),te.push(J/1e3),le=0;le<A.length;le++)if(A[le]<=Y/1e3&&!(A[le+1]<=Y/1e3)){k.push(Math.round(100*R[le])/100),E.push(Math.round(100*y[le])/100);break}se.push(j),ie.push(q),X<12e4&&Ne.push(ce/1e3),X<12e4&&Pe.push(ve),X<12e4&&xe.push(Ie),X<12e4&&ze.push(be/101325),X<12e4&&Fe.push(Ce),X<12e4&&ke.push(ge),X<12e4&&Ee.push(Me),X<12e4&&Ue.push(fe),Ke.push(W),W+=1}var qe=we.reduce(function(e,a){return Math.max(e,a)}),je=Le.reduce(function(e,a){return Math.max(e,a)}),Xe=se.reduce(function(e,a){return Math.max(e,a)}),Ye=ie.reduce(function(e,a){return Math.max(e,a)}),Je=ee.reduce(function(e,a){return Math.max(e,a)});if(Je<N){let a=Math.min(3,N/Je);return e.Missile(u,M,m,c,d,f,S,v,I,b,C*a,B,w,L),0}if(N==3*L/2)return e.lastMissileError="Error: This distance is too close for the selected missile.",0;for(le=0;le<ee.length;le++)if(ee[le]===Je);for(le=0;le<se.length;le++)if(se[le]===Xe);for(le=0;le<ie.length;le++){if(ie[le]===Ye);ie[le]}for(le=0;le<we.length;le++)if(we[le]===qe);for(le=0;le<Le.length;le++)if(Le[le]===je);return T&&(T.static=!1,T.altList=ee,T.latList=k,T.lonList=E,T.active=!0,T.missile=!0,T.type="",T.ON="RV_"+T.name,T.satId=f,T.id=f,T.maxAlt=Je,T.startTime=S,w&&(T.C=w),T.apogee&&delete T.apogee,T.argPe&&delete T.argPe,T.eccentricity&&delete T.eccentricity,T.inclination&&delete T.inclination,T.meanMotion&&delete T.meanMotion,T.perigee&&delete T.perigee,T.period&&delete T.period,T.raan&&delete T.raan,T.semiMajorAxis&&delete T.semiMajorAxis,T.semiMinorAxis&&delete T.semiMinorAxis,v&&(T.desc=v),l.push(T),satCruncher.postMessage({id:T.id,typ:"newMissile",ON:"RV_"+T.name,satId:T.id,static:T.static,missile:T.missile,active:T.active,type:T.type,name:T.name,latList:T.latList,lonList:T.lonList,altList:T.altList,startTime:T.startTime}),orbitDisplay.updateOrbitBuffer(f,null,null,null,!0,T.latList,T.lonList,T.altList,T.startTime),e.missileArray=l),e.missilesInUse++,e.lastMissileError="Missile Named RV_"+T.name+"<br>has been created.",1},e.getMissileTEARR=function(e,a){var t={};timeManager.propRealTime=Date.now();var s=timeManager.getPropOffset(),i=timeManager.propTimeCheck(s,timeManager.propRealTime),n=timeManager.jday(i.getUTCFullYear(),i.getUTCMonth()+1,i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds());n+=i.getUTCMilliseconds()*MILLISECONDS_PER_DAY;var r=satellite.gstime(n);if(void 0===a){if(void 0===sensorManager.currentSensor)throw"getTEARR requires a sensor or for a sensor to be currently selected.";a=sensorManager.currentSensor}if(void 0===a.observerGd)try{a.observerGd={height:a.obshei,latitude:a.lat,longitude:a.long}}catch(e){throw"observerGd is not set and could not be guessed."}timeManager.propRealTime=Date.now(),s=timeManager.getPropOffset();for(var o=e.altList.length,h=0;h<o;h++)if(e.startTime+1e3*h>i){curMissileTime=h;break}cosLat=Math.cos(e.latList[curMissileTime]*DEG2RAD),sinLat=Math.sin(e.latList[curMissileTime]*DEG2RAD),cosLon=Math.cos(e.lonList[curMissileTime]*DEG2RAD+r),sinLon=Math.sin(e.lonList[curMissileTime]*DEG2RAD+r),x=(RADIUS_OF_EARTH+e.altList[curMissileTime])*cosLat*cosLon,y=(RADIUS_OF_EARTH+e.altList[curMissileTime])*cosLat*sinLon,z=(RADIUS_OF_EARTH+e.altList[curMissileTime])*sinLat;try{gpos=satellite.eciToGeodetic({x:x,y:y,z:z},r),t.alt=gpos.height,t.lon=gpos.longitude,t.lat=gpos.latitude,positionEcf=satellite.eciToEcf({x:x,y:y,z:z},r),lookAngles=satellite.ecfToLookAngles(a.observerGd,positionEcf),t.azimuth=lookAngles.azimuth*RAD2DEG,t.elevation=lookAngles.elevation*RAD2DEG,t.range=lookAngles.rangeSat}catch(e){t.alt=0,t.lon=0,t.lat=0,positionEcf=0,lookAngles=0,t.azimuth=0,t.elevation=0,t.range=0}return a.obsminaz>a.obsmaxaz?(t.azimuth>=a.obsminaz||t.azimuth<=a.obsmaxaz)&&t.elevation>=a.obsminel&&t.elevation<=a.obsmaxel&&t.range<=a.obsmaxrange&&t.range>=a.obsminrange||(t.azimuth>=a.obsminaz2||t.azimuth<=a.obsmaxaz2)&&t.elevation>=a.obsminel2&&t.elevation<=a.obsmaxel2&&t.range<=a.obsmaxrange2&&t.range>=a.obsminrange2?t.inview=!0:t.inview=!1:t.azimuth>=a.obsminaz&&t.azimuth<=a.obsmaxaz&&t.elevation>=a.obsminel&&t.elevation<=a.obsmaxel&&t.range<=a.obsmaxrange&&t.range>=a.obsminrange||t.azimuth>=a.obsminaz2&&t.azimuth<=a.obsmaxaz2&&t.elevation>=a.obsminel2&&t.elevation<=a.obsmaxel2&&t.range<=a.obsmaxrange2&&t.range>=a.obsminrange2?t.inview=!0:t.inview=!1,uiManager.currentTEARR=t,t}}();
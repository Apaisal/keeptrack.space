!function(){var e={missilesInUse:0,lastMissileError:"",RussianICBM:[52.5000001,82.75000015,"Aleysk (SS-18)",16e3,50.75000015,59.5000001,"Dombarovskiy (SS-18)",16e3,55.3333334,89.80000016,"Uzhur (SS-18)",16e3,53+58*.01666667,57.8333335,"Kartaly (SS-18)",16e3,52.31666673,104.23333338,"Irkutsk (SS-25)",10500,56.36666674,95.46666676,"Kansk (SS-25)",10500,54.03333334,35.76666682,"Kozel`sk (SS-19)",1e4,56.36666674,92.41666675,"Krasnoyarsk (SS-25)",10500,58.06666668,60.55000011,"Nizhniy Tagil (SS-25)",10500,55.3333334,83,"Novosibirsk (SS-25)",10500,51.6666668,45.56666678,"Tatishchevo (SS-19)",1e4,51.6666668,45.56666678,"Tatishchevo (SS-27)",10500,56.85000017,40.53333344,"Teykovo (SS-25)",10500,56.63333346,47.85000017,"Yoshkar Ola (SS-25)",10500,72.039545,42.696683,"Verkhoturye (SS-N-23A)",8300,73.902056,3.133463,"Ekaterinburg (SS-N-23A)",8300,76.502284,-158.871984,"Tula (SS-N-23A)",8300,82.25681,-10.161045,"Bryansk (SS-N-23A)",8300,81.564646,32.553796,"Karelia (SS-N-23A)",8300,74.67366,6.538173,"Novomoskovsk (SS-N-23A)",8300,71.920763,41.039876,"Borei Sub (Bulava)",9300,71.920763,41.039876,"Delta IV Sub (Sineva)",8300,71.920763,41.039876,"Delta IV Sub (Layner)",12e3],ChinaICBM:[32.997534,112.537904,"Nanyang (DF-31)",8e3,36.621398,101.773908,"Xining (DF-31)",8e3,37.797257,97.079547,"Delingha (DF-31A)",11e3,37.07045,100.805779,"Haiyan (DF-31A)",11e3,40.079969,113.29994,"Datong (DF-31A)",11e3,34.583156,105.724525,"Tainshui (DF-31A)",11e3,38.552936,106.020538,"Xixia (DF-31A)",11e3,27.242253,111.465223,"Shaoyang (DF-31A)",11e3,24.34658,102.527838,"Yuxi (DF-31A)",11e3,34.345845,111.491062,"Luoyang (DF-5A/B)",13e3,38.917086,111.847057,"Wuzhai (DF-5A/B)",13e3,40.615707,115.107604,"Xuanhua (DF-5A/B)",13e3,26.163848,109.790408,"Tongdao (DF-5A/B)",13e3,34.061291,111.054379,"Lushi (DF-5A/B)",13e3,30.691542,118.437169,"Jingxian (DF-5A/B)",13e3,37.707532,116.271994,"Jingxian (DF-5A/B)",13e3,27.415932,111.792471,"Hunan (DF-5A/B)",13e3,46.585153,125.104037,"Daqing City (DF-41)",13500,32.154153,114.099875,"Xinyang City (DF-41)",13500,40.4417,85.530745,"Xinjiang Province (DF-41)",13500,31.271257,88.699152,"Tibet Province (DF-41)",13500,29.573548,122.923151,"Type 092 Sub (JL-2)",8e3],NorthKoreanBM:[40,128.3,"Sinpo Sub (Pukkŭksŏng-1)",2500,40.019,128.193,"Sinpo (KN-14)",8e3,39.365,126.165,"P`yong`an (KN-20)",1e4,39.046,125.667,"Pyongyang (KN-22)",13e3],UsaICBM:[48.420079,-101.33356,"Ohio Sub (Trident II)",12e3,48.420079,-101.33356,"Minot (Minuteman III)",13e3,47.505958,-111.181776,"Malmstrom (Minuteman III)",13e3,41.149931,-104.860645,"F.E. Warren (Minuteman III)",13e3],FraSLBM:[47.878,-4.263,"Triomphant Class Sub (M51)",1e4,47.878,-4.263,"Triomphant Class Sub (M51)",1e4],ukSLBM:[56.066111,-4.8175,"Vanguard Sub (Trident II)",12e3,56.066111,-4.8175,"HMNB Clyde (Trident II)",12e3],globalBMTargets:[38.951,-77.013,"Washington DC",40.679,-73.947,"New York City",34.073,-118.248,"Los Angeles",41.877,-87.622,"Chicago",42.361,-71.058,"Boston",47.749,-122.317,"Seattle",25.784,-80.196,"Miami",32.828,-96.759,"Dallas",38.765,-104.837,"Colorado Springs",41.33,-96.054,"Omaha",19.832,-155.491,"Hawaii",13.588,144.922,"Guam",51.50634,-.097485,"London",48.874195,2.378987,"Paris",24.503,-66.127,"French Caribean",40.449889,-3.717309,"Madrid",41.931955,12.520198,"Rome",52.501746,13.416486,"Berlin",43.706946,-79.423854,"Toronto",55.750246,37.691525,"Moscow",59.887535,30.38409,"St. Petersburg",55.017165,82.965879,"Novosibirsk",39.974338,116.396057,"Beijing",39.044051,125.735244,"Pyongyang"]};window.missileManager=e;var a,t,s,i,n,o,r,h,u=[40.679,-73.947,42.361,-71.058,41.755,-70.539,41.763,-72.684,42.101,-72.59,39.408,-74.441,39.191,-75.534,39.331,-76.671,38.951,-77.013,37.608,-77.378,42.36,-83.048,39.844,-86.172,40.008,-83,40.538,-79.934,40.034,-75.131,47.749,-122.317,45.7,-122.581,47.732,-117.389,37.889,-122.562,36.257,-115.159,48.034,-101.295,49.134,-101.495,48.234,-100.295,48.334,-101.095,48.434,-101.295,47.948,-97.027,45.107,-93.306,47.092,-110.334,47.292,-111.834,47.592,-111.934,46.792,-111.334,47.992,-111.534,47.792,-110.734,48.592,-111.534,47.292,-111.334,46.092,-111.134,47.592,-110.034,40.21,-104.811,41.51,-105.811,41.21,-104.211,40.51,-104.211,41.21,-105.611,41.51,-104.611,41.21,-103.011,42.21,-104.011,41.91,-104.811,41.91,-104.811,34.048,-118.28,19.832,-155.491,13.588,144.922,36.318,-86.718,32.782,-97.343,32.584,-99.707,35.208,-101.837,35.188,-106.595,33.603,-111.965,38.765,-104.837,38.737,-104.883,39.847,-104.902,40.684,-105.059,40.852,-111.827,61.343,-150.187,64.94,-147.881,58.488,-134.238,30.46,-86.549,41.33,-96.054,39.113276,-121.356137,64.303735,-149.148768,76.534322,-68.718288,41.875523,-87.634038,35.145865,-89.979153,43.663448,-70.278127,43.612156,-116.231845],l=[];e.missileArray=l;function M(e){return 101325*Math.exp(-.2841957*e/2394.57888)}function p(e,u,l,p,g,m,c,d,f,S,v,I){var b;b=p<12e5?.0174533*(90-I*(1.5336118956+.00443173537387*p-9.30373890848*Math.pow(10,-8)*Math.pow(p,2)+8.37838197732*Math.pow(10,-13)*Math.pow(p,3)-2.71228576626*Math.pow(10,-18)*Math.pow(p,4))):30;var C=a+p,B=Math.atan2(c,d);if(u>0){var w=s*e*i;u+=(v-w)*h}else u=0;var L=u+g+n,D=function(e){return(e/=1e3)<12.5?276.642857143-5.02285714286*e:e<20?213:e<47.5?171.224358974+2.05384615385*e:e<52.5?270:e<80?435.344405594-3.13916083916*e:e<90?183:e<110?4.47*e-221.111111111:e<120?10.6*e-894:e>=120?378:void 0}(p),A=M(p),T=A/(o*D),R=Math.pow(1.4*o*D,.5),y=Math.sqrt(Math.pow(c,2)+Math.pow(d,2))/R,U=function(e){return e<.5?.125:e<1.1875?2.30117394072*e-.329086061307+-4.06597222013*Math.pow(e,2)+3.01851851676*Math.pow(e,3)+-.666666666129*Math.pow(e,4):e<1.625?.10937644721+-4.61979595244*e+9.72917139612*Math.pow(e,2)+-6.33333563852*Math.pow(e,3)+1.33333375211*Math.pow(e,4):e<3.625?.97916002909+-.540978181863*e+.125235817144*Math.pow(e,2)+-.00666103733277*Math.pow(e,3)+-.000558009790208*Math.pow(e,4):e>3.625?.25:void 0}(Math.abs(y)),k=0;u>0&&(k=function(e,a,t,s){var i=1.2,n=25*Math.pow(10,6),o=e,r=M(s),h=M(a),u=o/Math.pow(1.1*n,-i/(i-1))*Math.sqrt(1059349.509986226),l=Math.sqrt(2/(i-1)*Math.pow(n/r,(i-1)/i-1)),p=u/l*Math.pow(1+(i-1)/2*Math.pow(l,2)/1.1,2.2/(2*(i-1)));p>t&&(p=t);var g=16780096.238181822*Math.pow(1-h/n,(i-1)/i);return o*Math.sqrt(g)+(h-r)*p}(w,p,e,m));var N=.5*T*(Math.pow(c,2)+Math.pow(d,2))*l*U,x=r*t*L/Math.pow(C,2),E=(k*Math.sin(b)-N*Math.sin(B)-x)/L+C*Math.pow(d/C,2);p+=(c+=E*h)*h,f+=d*h;var z=d*a/C;S+=z*h;var F=(k*Math.cos(b)-N*Math.cos(B))/L-2*c*(d/C);return[u,L,D,A,T,R,y,U,k,N,x,E,c,p,f,z,S,F,d+=F*h]}function g(e,a,t,i,n,o,r,h,u,l,M,g,m,c,d,f){for(var S,v,I=[],b=[];t/s/i>.4&&o>=0;)t=(I=p(e,t,n,o,r,l,M,g,m,c,d,f))[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],M=I[12],o=I[13],b.push(o),m=I[14],I[15],c=I[16],I[17],g=I[18],S=o;for(;t/s/i>.19&&o>=0;)t=(I=p(e,t,n,o,h,S,M,g,m,c,d,f))[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],M=I[12],o=I[13],b.push(o),m=I[14],I[15],c=I[16],I[17],g=I[18],v=o;for(;t/s/i>0&&o>=0;)t=(I=p(a,t,n,o,u,v,M,g,m,c,d,f))[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],M=I[12],o=I[13],b.push(o),m=I[14],I[15],c=I[16],I[17],g=I[18];for(;o>0;)t=(I=p(a,t=0,n,o,u,v,M,g,m,c,d,f))[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],M=I[12],o=I[13],b.push(o),m=I[14],I[15],c=I[16],I[17],g=I[18];for(var C=0,B=0;B<b.length;B++)b[B]>C&&(C=b[B]);return m}e.MassRaidPre=function(a,t){!function(){$("#search").val(""),e.missilesInUse=0,searchBox.hideResults();for(var a=satSet.getSatData().length,t=0;t<500;t++){var s=a-500+t,i=satSet.getSat(s);i.active=!1,satCruncher.postMessage({id:i.id,typ:"newMissile",ON:"RV_"+i.name,satId:i.id,static:i.static,missile:i.missile,active:i.active,type:i.type,name:i.name,latList:i.latList,lonList:i.lonList,altList:i.altList,startTime:i.startTime})}}(),$.get(t,function(t){t;for(var s=satSet.missileSats,i=0;i<t.length;i++){var n=s-500+i;t[i].startTime=a,satSet.setSat(n,t[i]);var o=satSet.getSat(n);o&&(o.id=s-500+i,satCruncher.postMessage({id:o.id,typ:"newMissile",ON:"M00"+o.name,satId:o.id,static:o.static,missile:o.missile,active:o.active,type:o.type,name:o.name,latList:o.latList,lonList:o.lonList,altList:o.altList,startTime:o.startTime}),orbitDisplay.updateOrbitBuffer(o.id,null,null,null,!0,o.latList,o.lonList,o.altList,o.startTime))}e.missileArray=t})},e.MassRaid=function(a,t,s){var i=0,n=500-e.missilesInUse,o=0,r=0,h=!1,l=0,M=0;if("Russia"===s)for(console.info("Russian Mass Raid Start: "+Date.now()),h=!1,r=0,i=0;i<e.RussianICBM.length/4;i++){for(h&&(r=0,h=!1),o=0;o<u.length/2;o++)n<=100||8300!==e.RussianICBM[4*i+3]&&r>19||8300===e.RussianICBM[4*i+3]&&r>11||Math.random()<.3&&(l=1*a+240*Math.random()*1e3,r+=M=e.Missile(e.RussianICBM[4*i],e.RussianICBM[4*i+1],u[2*o],u[2*o+1],3,satSet.getSatData().length-n,l,e.RussianICBM[4*i+2],30,2.9,t,e.RussianICBM[4*i+3],"Russia"),n-=M,console.info("Missiles Launched: "+(500-n)+" - "+e.RussianICBM[4*i+2]));n<=100||(8300!==e.RussianICBM[4*i+3]&&r<=18&&o>=u.length/2||8300===e.RussianICBM[4*i+3]&&r<=10&&o>=u.length/2?(i--,h=!1):h=!0)}else if("China"===s)for(console.info("Chinese Mass Raid Start: "+Date.now()),h=!1,r=0,i=0;i<e.ChinaICBM.length/4;i++){for(h&&(r=0,h=!1),o=0;o<u.length/2;o++)n<=248||r>12||Math.random()<.3&&(l=a+240*Math.random()*1e3,r+=M=e.Missile(e.ChinaICBM[4*i],e.ChinaICBM[4*i+1],u[2*o],u[2*o+1],3,satSet.getSatData().length-n,l,e.ChinaICBM[4*i+2],30,2.9,t,e.ChinaICBM[4*i+3],"China"),n-=M,console.info("Missiles Launched: "+(500-n)));n<=248||(r<=11&&o>=u.length/2?(i--,h=!1):h=!0)}else if("North Korea"===s)for(console.info("North Korea Mass Raid Start: "+Date.now()),h=!1,r=0,i=0;i<e.NorthKoreanBM.length/4;i++){for(h&&(r=0,h=!1),o=0;o<u.length/2;o++)n<=470||r>12||Math.random()<.3&&(l=a+240*Math.random()*1e3,r+=M=e.Missile(e.NorthKoreanBM[4*i],e.NorthKoreanBM[4*i+1],u[2*o],u[2*o+1],3,satSet.getSatData().length-n,l,e.NorthKoreanBM[4*i+2],30,2.9,t,e.NorthKoreanBM[4*i+3],"North Korea"),n-=M,console.info("Missiles Launched: "+(500-n)));n<=470||(r<=4&&o>=u.length/2?(i--,h=!1):h=!0)}else if("USA2Russia"===s||"USA2China"===s||"USA2NorthKorea"===s){for(console.info("USA Mass Raid Start: "+Date.now()),h=!1,r=0,i=0;i<e.UsaICBM.length/4;i++)if(o=0,h&&(r=0,h=!1),"USA2Russia"===s){for(o=0;o<e.RussianICBM.length/4;o++)n<=150||r>50||Math.random()<.3&&(l=a+240*Math.random()*1e3,r+=M=e.Missile(e.UsaICBM[4*i],e.UsaICBM[4*i+1],e.RussianICBM[4*o],e.RussianICBM[4*o+1],3,satSet.getSatData().length-n,l,e.UsaICBM[4*i+2],30,2.9,t,e.UsaICBM[4*i+3],"United States"),n-=M,console.info("Missiles Launched: "+(500-n)));n>150&&(r<=50?(i--,h=!1):h=!0)}else if("USA2China"===s){for(o=0;o<e.ChinaICBM.length/4;o++)n<=150||r>50||Math.random()<.3&&(l=a+240*Math.random()*1e3,r+=M=e.Missile(e.UsaICBM[4*i],e.UsaICBM[4*i+1],e.ChinaICBM[4*o],e.ChinaICBM[4*o+1],3,satSet.getSatData().length-n,l,e.UsaICBM[4*i+2],30,2.9,t,e.UsaICBM[4*i+3],"United States"),n-=M,console.info("Missiles Launched: "+(500-n)));n>150&&(r<=50?(i--,h=!1):h=!0)}else if("USA2NorthKorea"===s){for(o=0;o<e.NorthKoreanBM.length/4;o++)n<=482||r>5||Math.random()<.3&&(l=a+240*Math.random()*1e3,r+=M=e.Missile(e.UsaICBM[4*i],e.UsaICBM[4*i+1],e.NorthKoreanBM[4*o],e.NorthKoreanBM[4*o+1],3,satSet.getSatData().length-n,l,e.UsaICBM[4*i+2],30,2.9,t,e.UsaICBM[4*i+3],"United States"),n-=M,console.info("Missiles Launched: "+(500-n)));n>150&&(r<=5?(i--,h=!1):h=!0)}e.missilesInUse=500-n}},e.Missile=function(u,M,m,c,d,f,S,v,I,b,C,B,w,L){var D,A=satSet.getSat(f);if(I=I||17,b=b||3.1,u>90||u<-90)return console.error("Error: Current Latitude must be between 90 and -90 degrees"),0;if(M>180||M<-180)return console.error("Error: Current Longitude must be between 180 and -180 degrees"),0;if(m>90||m<-90)return e.lastMissileError="Error: Target Latitude must be<br>between 90 and -90 degrees",0;if(c>180||c<-180)return e.lastMissileError="Error: Target Longitude must be<br>between 90 and -90 degrees",0;if(d>12)return console.error("Error: Rocket can hold up to 12 warheads"),0;if(parseFloat(d)%1>0)return console.error("Error: The number of warheads must be a whole number"),0;void 0===L&&(L=0),a=6371e3,o=287,r=6.67384*Math.pow(10,-11),t=5.9726*Math.pow(10,24);var T,R,y,U,k=[],N=[];if(R=(U=function(e,t,s,i){var n,o=a,r=e*Math.PI/180,h=t*Math.PI/180,u=s*Math.PI/180,l=i*Math.PI/180;l-h>=-180&&l-h<=180&&(n=l-h);l-h>180&&(n=l-h-2*Math.PI);l-h<-180&&(n=l-h+2*Math.PI);for(var M,p=Math.atan2(Math.sin(n),Math.cos(r)*Math.tan(u)-Math.sin(r)*Math.cos(n)),g=Math.acos(Math.sin(r)*Math.sin(u)+Math.cos(r)*Math.cos(u)*Math.cos(n)),m=g*o,c=Math.asin(Math.sin(p)*Math.cos(r)),d=Math.atan2(Math.tan(r),Math.cos(p)),f=d+g,S=Math.atan2(Math.sin(c)*Math.sin(d),Math.cos(d)),v=h-S,I=[],b=[],C=[],B=[],w=[],L=[],D=[],A=[],T=[],R=0;R<=2400;R++){var y=d+R*(f-d)/2e3,U=180*Math.asin(Math.cos(c)*Math.sin(y))/Math.PI,k=180*(v+Math.atan2(Math.sin(c)*Math.sin(y),Math.cos(y)))/Math.PI;2e3===R&&(M=(y-d)*o),T.push((y-d)*o/1e3),k>=-180&&k<=180?(L.push(k),b.push(U)):k<-180?(A.push(k+360),B.push(U)):k>180&&(D.push(k-360),C.push(U))}for(R=0;R<b.length;R++)I.push(b[R]);for(R=0;R<C.length;R++)I.push(C[R]);for(R=0;R<B.length;R++)I.push(B[R]);for(R=0;R<L.length;R++)w.push(L[R]);for(R=0;R<D.length;R++)w.push(D[R]);for(R=0;R<A.length;R++)w.push(A[R]);return[I,w,180*p/Math.PI,m,T,M]}(u,M,m,c))[0],y=U[1],U[2],Me=U[3],T=U[4],D=U[5],Me<32e4)return e.lastMissileError="Error: This missile has a minimum distance of 320 km.",0;if(Me>1e3*B)return e.lastMissileError="Error: This missile has a maximum distance of "+B+" km.",0;n=500*d;var x=.050389573*b,E=.25*Math.PI*Math.pow(b,2),z=1628.75*(.25*Math.PI*I*(Math.pow(b,2)-Math.pow(b-x,2))),F=407.1875*Math.PI*(.4937*I)*(Math.pow(b,2)-Math.pow(b-x,2)),P=407.1875*Math.PI*(.157*I)*(Math.pow(.75*b,2)-(Math.pow(x/2),2));i=C||.042,s=1750;var K=.25*Math.PI*Math.pow(b-x,2),O=.25*Math.PI*Math.pow(.75*b-x,2),G=K*(.651*I)+O*(.178*I),_=s*G,H=_+z+n,V=.001,q=.001,j=0,X=0,Y=0,J=0;h=1;for(var W=[],$=[],Q=[],Z=[],ee=[],ae=[],te=[],se=[],ie=[],ne=[],oe=[],re=[],he=[],ue=0;ue<1e5;ue++)he.push(ue);for(var le,Me,pe,ge,me,ce,de,fe,Se,ve,Ie,be,Ce=[],Be=[],we=[],Le=[],De=[],Ae=[],Te=[],Re=[],ye=[],Ue=[],ke=[],Ne=[],xe=[],Ee=[],ze=[],Fe=[],Pe=[],Ke=function(e,a,t,s,i,n,o,r,h,u,l,M,p,m,c,d,f){for(var S=[],v=0;v<500;v++){var I=1*v/500/2+.5;S.push(g(e,a,t,s,i,n,o,r,h,u,l,M,p,m,c,I))}var b=S[0],C=Math.abs(S[0]-f);for(v=0;v<S.length;v++){var B=Math.abs(S[v]-f);B<C&&(C=B,b=S[v])}for(v=0;v<500;v++)if(S[v]===b){var w=v;break}I=1*w/500/2+.5;var L=g(e,a,t,s,i,n,o,r,h,u,l,M,p,m,c,A=((R=(w-2)/500/2+.5)+(T=(w+2)/500/2+.5))/2),D=100*Math.abs((f-L)/f);for(;D>.01&&Math.abs(T-R)>=1e-4;){var A=(R+T)/2;if(D=100*Math.abs((f-g(e,a,t,s,i,n,o,r,h,u,l,M,p,m,c,A))/f),g(e,a,t,s,i,n,o,r,h,u,l,M,p,m,c,A)>f)var T=A;else var R=A}return I=A}(K,O,_,G,E,j,z,F,P,0,q,V,X,Y,0,0,D);_/s/G>.4&&j>=0;){var Oe=p(K,_,E,j,z,0,q,V,X,Y,0,Ke);_=Oe[0],H=Oe[1],be=Oe[2],Ie=Oe[3],ve=Oe[4],Se=Oe[5],fe=Oe[6],de=Oe[7],ce=Oe[8],me=Oe[9],ge=Oe[10],pe=Oe[11],q=Oe[12],j=Oe[13],X=Oe[14],Oe[15],Y=Oe[16],le=Oe[17],V=Oe[18];var Ge,_e=j;for($.push(Math.cos(Y/a)*(j+a)),W.push(Math.sin(Y/a)*(j+a)),Q.push(ge/H),re.push(ce/1e3),ie.push(fe),Z.push(Math.round(j/1e3*100)/100),ee.push(X/1e3),ae.push(Y/1e3),ue=0;ue<T.length;ue++)if(T[ue]<=X/1e3&&!(T[ue+1]<=X/1e3)){k.push(Math.round(100*R[ue])/100),N.push(Math.round(100*y[ue])/100);break}for(te.push(q),se.push(V),ue=0;ue<oe.length;ue++)Ge+=oe[ue];oe.push(h+Ge),Be.push(pe),we.push(le),j<12e4&&Le.push(me/1e3),j<1e5&&De.push(Se),j<12e4&&Ae.push(ve),j<12e4&&Te.push(Ie/101325),j<1e5&&Re.push(be),j<1e5&&Ce.push(de),_>0&&ne.push(_),Pe.push(J),J+=1}for(;_/s/G>.19&&j>=0;){_=(Oe=p(K,_,E,j,F,_e,q,V,X,Y,0,Ke))[0],H=Oe[1],be=Oe[2],Ie=Oe[3],ve=Oe[4],Se=Oe[5],fe=Oe[6],de=Oe[7],ce=Oe[8],me=Oe[9],ge=Oe[10],pe=Oe[11],q=Oe[12],j=Oe[13],X=Oe[14],Oe[15],Y=Oe[16],le=Oe[17],V=Oe[18];var He=j;for($.push(Math.cos(Y/a)*(j+a)),W.push(Math.sin(Y/a)*(j+a)),Q.push(ge/H),re.push(ce/1e3),ie.push(fe),Z.push(Math.round(j/1e3*100)/100),ee.push(X/1e3),ae.push(Y/1e3),ue=0;ue<T.length;ue++)if(T[ue]<=X/1e3&&!(T[ue+1]<=X/1e3)){k.push(Math.round(100*R[ue])/100),N.push(Math.round(100*y[ue])/100);break}for(te.push(q),se.push(V),ue=0;ue<oe.length;ue++)Ge+=oe[ue];oe.push(h+Ge),Be.push(pe),we.push(le),j<12e4&&Le.push(me/1e3),j<1e5&&De.push(Se),j<12e4&&Ae.push(ve),j<12e4&&Te.push(Ie/101325),j<1e5&&Re.push(be),j<1e5&&Ce.push(de),_>0&&ne.push(_),Pe.push(J),J+=1}for(;_/s/G>0&&j>=0;){for(_=(Oe=p(O,_,E,j,P,He,q,V,X,Y,0,Ke))[0],H=Oe[1],be=Oe[2],Ie=Oe[3],ve=Oe[4],Se=Oe[5],fe=Oe[6],de=Oe[7],ce=Oe[8],me=Oe[9],ge=Oe[10],pe=Oe[11],q=Oe[12],j=Oe[13],X=Oe[14],Oe[15],Y=Oe[16],le=Oe[17],V=Oe[18],$.push(Math.cos(Y/a)*(j+a)),W.push(Math.sin(Y/a)*(j+a)),Q.push(ge/H),re.push(ce/1e3),ie.push(fe),Z.push(Math.round(j/1e3*100)/100),ee.push(X/1e3),ae.push(Y/1e3),ue=0;ue<T.length;ue++)if(T[ue]<=X/1e3&&!(T[ue+1]<=X/1e3)){k.push(Math.round(100*R[ue])/100),N.push(Math.round(100*y[ue])/100);break}for(te.push(q),se.push(V),ue=0;ue<oe.length;ue++)Ge+=oe[ue];oe.push(h+Ge),Be.push(pe),we.push(le),j<12e4&&Le.push(me/1e3),j<1e5&&De.push(Se),j<12e4&&Ae.push(ve),j<12e4&&Te.push(Ie/101325),j<1e5&&Re.push(be),j<1e5&&Ce.push(de),_>0&&ne.push(_),Pe.push(J),J+=1}for(;j>0;){for(_=(Oe=p(O,_=0,E,j,P,He,q,V,X,Y,0,Ke))[0],H=Oe[1],be=Oe[2],Ie=Oe[3],ve=Oe[4],Se=Oe[5],fe=Oe[6],de=Oe[7],ce=Oe[8],me=Oe[9],ge=Oe[10],pe=Oe[11],q=Oe[12],j=Oe[13],X=Oe[14],Oe[15],Y=Oe[16],le=Oe[17],V=Oe[18],$.push(Math.cos(Y/a)*(j+a)),W.push(Math.sin(Y/a)*(j+a)),Q.push(ge/H),ie.push(fe),Z.push(Math.round(j/1e3*100)/100),ee.push(X/1e3),ae.push(Y/1e3),ue=0;ue<T.length;ue++)if(T[ue]<=X/1e3&&!(T[ue+1]<=X/1e3)){k.push(Math.round(100*R[ue])/100),N.push(Math.round(100*y[ue])/100);break}te.push(q),se.push(V),j<12e4&&Ne.push(me/1e3),j<12e4&&Fe.push(Se),j<12e4&&xe.push(ve),j<12e4&&Ee.push(Ie/101325),j<12e4&&ze.push(be),j<12e4&&Ue.push(pe),j<12e4&&ke.push(le),j<12e4&&ye.push(de),Pe.push(J),J+=1}var Ve=Be.reduce(function(e,a){return Math.max(e,a)}),qe=we.reduce(function(e,a){return Math.max(e,a)}),je=te.reduce(function(e,a){return Math.max(e,a)}),Xe=se.reduce(function(e,a){return Math.max(e,a)}),Ye=Z.reduce(function(e,a){return Math.max(e,a)});if(!(Ye<L)){for(ue=0;ue<Z.length;ue++)if(Z[ue]===Ye);for(ue=0;ue<te.length;ue++)if(te[ue]===je);for(ue=0;ue<se.length;ue++){if(se[ue]===Xe);se[ue]}for(ue=0;ue<Be.length;ue++)if(Be[ue]===Ve);for(ue=0;ue<we.length;ue++)if(we[ue]===qe);return A&&(A.static=!1,A.altList=Z,A.latList=k,A.lonList=N,A.active=!0,A.missile=!0,A.type="",A.ON="RV_"+A.name,A.satId=f,A.id=f,A.maxAlt=Ye,A.startTime=S,w&&(A.C=w),A.apogee&&delete A.apogee,A.argPe&&delete A.argPe,A.eccentricity&&delete A.eccentricity,A.inclination&&delete A.inclination,A.meanMotion&&delete A.meanMotion,A.perigee&&delete A.perigee,A.period&&delete A.period,A.raan&&delete A.raan,A.semiMajorAxis&&delete A.semiMajorAxis,A.semiMinorAxis&&delete A.semiMinorAxis,v&&(A.desc=v),console.log(A),l.push(A),satCruncher.postMessage({id:A.id,typ:"newMissile",ON:"RV_"+A.name,satId:A.id,static:A.static,missile:A.missile,active:A.active,type:A.type,name:A.name,latList:A.latList,lonList:A.lonList,altList:A.altList,startTime:A.startTime}),orbitDisplay.updateOrbitBuffer(f,null,null,null,!0,A.latList,A.lonList,A.altList,A.startTime),e.missileArray=l),e.missilesInUse++,e.lastMissileError="Missile Named RV_"+A.name+"<br>has been created.",1}{let a=Math.min(2,L/Ye);e.Missile(u,M,m,c,d,f,S,v,I,b,C*a,B,w,L)}},e.getMissileTEARR=function(e,a){var t={};timeManager.propRealTime=Date.now();var s=timeManager.getPropOffset(),i=timeManager.propTimeCheck(s,timeManager.propRealTime),n=timeManager.jday(i.getUTCFullYear(),i.getUTCMonth()+1,i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds());n+=i.getUTCMilliseconds()*MILLISECONDS_PER_DAY;var o=satellite.gstime(n);if(void 0===a){if(void 0===sensorManager.currentSensor)throw"getTEARR requires a sensor or for a sensor to be currently selected.";a=sensorManager.currentSensor}if(void 0===a.observerGd)try{a.observerGd={height:a.obshei,latitude:a.lat,longitude:a.long}}catch(e){throw"observerGd is not set and could not be guessed."}timeManager.propRealTime=Date.now(),s=timeManager.getPropOffset();for(var r=e.altList.length,h=0;h<r;h++)if(e.startTime+1e3*h>i){curMissileTime=h;break}cosLat=Math.cos(e.latList[curMissileTime]*DEG2RAD),sinLat=Math.sin(e.latList[curMissileTime]*DEG2RAD),cosLon=Math.cos(e.lonList[curMissileTime]*DEG2RAD+o),sinLon=Math.sin(e.lonList[curMissileTime]*DEG2RAD+o),x=(RADIUS_OF_EARTH+e.altList[curMissileTime])*cosLat*cosLon,y=(RADIUS_OF_EARTH+e.altList[curMissileTime])*cosLat*sinLon,z=(RADIUS_OF_EARTH+e.altList[curMissileTime])*sinLat;try{gpos=satellite.eciToGeodetic({x:x,y:y,z:z},o),t.alt=gpos.height,t.lon=gpos.longitude,t.lat=gpos.latitude,positionEcf=satellite.eciToEcf({x:x,y:y,z:z},o),lookAngles=satellite.ecfToLookAngles(a.observerGd,positionEcf),t.azimuth=lookAngles.azimuth*RAD2DEG,t.elevation=lookAngles.elevation*RAD2DEG,t.range=lookAngles.rangeSat}catch(e){t.alt=0,t.lon=0,t.lat=0,positionEcf=0,lookAngles=0,t.azimuth=0,t.elevation=0,t.range=0}return a.obsminaz>a.obsmaxaz?(t.azimuth>=a.obsminaz||t.azimuth<=a.obsmaxaz)&&t.elevation>=a.obsminel&&t.elevation<=a.obsmaxel&&t.range<=a.obsmaxrange&&t.range>=a.obsminrange||(t.azimuth>=a.obsminaz2||t.azimuth<=a.obsmaxaz2)&&t.elevation>=a.obsminel2&&t.elevation<=a.obsmaxel2&&t.range<=a.obsmaxrange2&&t.range>=a.obsminrange2?t.inview=!0:t.inview=!1:t.azimuth>=a.obsminaz&&t.azimuth<=a.obsmaxaz&&t.elevation>=a.obsminel&&t.elevation<=a.obsmaxel&&t.range<=a.obsmaxrange&&t.range>=a.obsminrange||t.azimuth>=a.obsminaz2&&t.azimuth<=a.obsmaxaz2&&t.elevation>=a.obsminel2&&t.elevation<=a.obsmaxel2&&t.range<=a.obsmaxrange2&&t.range>=a.obsminrange2?t.inview=!0:t.inview=!1,uiManager.currentTEARR=t,t}}();
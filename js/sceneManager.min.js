!function(){let a=mat4.create(),t=mat3.create(),e={};function r(a,t,e,r,n,i){var o={};o.latitude=r,o.longitude=n,o.height=i;var l,g,s,u=satellite.geodeticToEcf(o);l=u.x,g=u.y,s=u.z;var m=Math.sin(r),M=Math.sin(n),c=Math.cos(r),v=Math.cos(n),f=DEG2RAD*a,d=DEG2RAD*t,x=-e*Math.cos(d)*Math.cos(f),h=e*Math.cos(d)*Math.sin(f),R=e*Math.sin(d);return{x:m*v*x+-M*h+c*v*R+l,y:m*M*x+v*h+c*M*R+g,z:-c*x+m*R+s}}!function(){var a,t,r,n,i,o,l,g,s,u,m,M={},c=!1,v=!1,f=mat4.create(),d=mat3.create();M.earthJ=0,M.earthEra=0,M.timeTextStr="",M.timeTextStrEmpty="",M.lightDirection=[],M.propRateDOM=$("#propRate-status-box"),M.pos=[0,0,0];var x=!1,h=!1;function R(){x&&h&&M.bumpMap.isReady&&M.specularMap.isReady&&(!0,M.loaded=!0)}M.loaded=!1,M.isDayNightToggle=!1,M.init=function(){let o=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(o,e.shaders.earth.frag),gl.compileShader(o);let l=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(l,e.shaders.earth.vert),gl.compileShader(l),s=gl.createProgram(),gl.attachShader(s,l),gl.attachShader(s,o),gl.linkProgram(s),s.aVertexPosition=gl.getAttribLocation(s,"aVertexPosition"),s.aTexCoord=gl.getAttribLocation(s,"aTexCoord"),s.aVertexNormal=gl.getAttribLocation(s,"aVertexNormal"),s.uPMatrix=gl.getUniformLocation(s,"uPMatrix"),s.uCamMatrix=gl.getUniformLocation(s,"uCamMatrix"),s.uMvMatrix=gl.getUniformLocation(s,"uMvMatrix"),s.uNormalMatrix=gl.getUniformLocation(s,"uNormalMatrix"),s.uLightDirection=gl.getUniformLocation(s,"uLightDirection"),s.uAmbientLightColor=gl.getUniformLocation(s,"uAmbientLightColor"),s.uDirectionalLightColor=gl.getUniformLocation(s,"uDirectionalLightColor"),s.uSampler=gl.getUniformLocation(s,"uSampler"),s.uNightSampler=gl.getUniformLocation(s,"uNightSampler"),s.uBumpMap=gl.getUniformLocation(s,"uBumpMap"),s.uSpecMap=gl.getUniformLocation(s,"uSpecMap"),u=gl.createTexture();var g=new Image;g.onload=function(){$("#loader-text").text("Painting the Earth..."),gl.bindTexture(gl.TEXTURE_2D,u),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,g),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT),x=!0,R()},g.src=settingsManager.installDirectory+"textures/earthmap512.jpg",M.loadHiRes=(()=>{var a=new Image;a.src=settingsManager.installDirectory+"textures/earthmap4k.jpg",settingsManager.nasaImages&&(a.src=settingsManager.installDirectory+"textures/mercator-tex.jpg"),settingsManager.trusatImages&&(g.src=settingsManager.installDirectory+"textures/trusatvector-4096.jpg"),settingsManager.blueImages&&(a.src=settingsManager.installDirectory+"textures/world_blue-2048.png"),settingsManager.vectorImages&&(a.src=settingsManager.installDirectory+"textures/dayearthvector-4096.jpg"),settingsManager.hiresImages&&(a.src=settingsManager.installDirectory+"textures/earthmap8k.jpg"),settingsManager.hiresNoCloudsImages&&(a.src=settingsManager.installDirectory+"textures/earthmap8k.jpg"),a.onload=function(){gl.bindTexture(gl.TEXTURE_2D,u),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,a),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT),x=!0,R()}}),m=gl.createTexture();var c=new Image;c.onload=function(){gl.bindTexture(gl.TEXTURE_2D,m),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,c),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT),h=!0,R()},c.src=settingsManager.installDirectory+"textures/earthlights512.jpg",M.loadHiResNight=(()=>{var a=new Image;settingsManager.smallImages||(a.src=settingsManager.installDirectory+"textures/earthlights4k.jpg"),settingsManager.vectorImages&&(a.src=settingsManager.installDirectory+"textures/dayearthvector-4096.jpg"),settingsManager.hiresImages&&(a.src=settingsManager.installDirectory+"textures/earthlights10k.jpg"),a.onload=function(){gl.bindTexture(gl.TEXTURE_2D,m),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,a),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT),h=!0,R()}}),M.bumpMap={},M.bumpMap.isReady=!1,M.bumpMap.texture=gl.createTexture(),M.bumpMap.img=new Image,M.bumpMap.img.onload=function(){gl.bindTexture(gl.TEXTURE_2D,M.bumpMap.texture),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,M.bumpMap.img),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT),M.bumpMap.isReady=!0,R()},M.bumpMap.img.src=settingsManager.installDirectory+"textures/earthbump8k.jpg",settingsManager.smallImages&&(M.bumpMap.img.src=settingsManager.installDirectory+"textures/earthbump256.jpg"),M.specularMap={},M.specularMap.isReady=!1,M.specularMap.texture=gl.createTexture(),M.specularMap.img=new Image,M.specularMap.img.onload=function(){gl.bindTexture(gl.TEXTURE_2D,M.specularMap.texture),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,M.specularMap.img),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT),M.specularMap.isReady=!0,R()},M.specularMap.img.src=settingsManager.installDirectory+"textures/earthspec8k.jpg",settingsManager.smallImages&&(M.specularMap.img.src=settingsManager.installDirectory+"textures/earthspec256.jpg");var v=[],f=[],d=[];for(let a=0;a<=64;a++){var E=Math.PI/64*a-Math.PI/2,p=Math.cos(Math.abs(E)),A=Math.sin(E);for(let t=0;t<=64;t++){var T=2*Math.PI/64*t,D=Math.cos(T)*p,_=Math.sin(T)*p,S=1-a/64,b=.5+t/64;v.push(D*RADIUS_OF_EARTH),v.push(_*RADIUS_OF_EARTH),v.push(A*RADIUS_OF_EARTH),d.push(b),d.push(S),f.push(D),f.push(_),f.push(A)}}var U=[];for(let a=0;a<64;a++)for(let t=0;t<64;t++){var P=65*a+t,C=P+1,F=65*(a+1)+t,N=F+1;U.push(P),U.push(C),U.push(F),U.push(F),U.push(N),U.push(C)}i=U.length,a=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,a),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(v),gl.STATIC_DRAW),t=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,t),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(f),gl.STATIC_DRAW),r=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,r),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(d),gl.STATIC_DRAW),n=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,n),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(U),gl.STATIC_DRAW),M.loaded=!0},M.update=(()=>{if(M.lastTime=o,o=timeManager.propTime(),timeManager.selectedDate=o,M.lastTime-o<300){for(M.tDS=o.toJSON(),M.timeTextStr=M.timeTextStrEmpty,M.iText=11;M.iText<20;M.iText++)M.iText>11&&(M.timeTextStr+=M.tDS[M.iText-1]);settingsManager.isPropRateChange&&!settingsManager.isAlwaysHidePropRate&&(timeManager.propRate>1.01||timeManager.propRate<.99?(timeManager.propRate<10&&M.propRateDOM.html("Propagation Speed: "+timeManager.propRate.toFixed(1)+"x"),timeManager.propRate>=10&&M.propRateDOM.html("Propagation Speed: "+timeManager.propRate.toFixed(2)+"x"),M.propRateDOM.show(),v=!0):v&&(M.propRateDOM.hide(),v=!1),settingsManager.isPropRateChange=!1),settingsManager.disableUI||(c?document.getElementById("datetime-text").childNodes[0].nodeValue=`${M.timeTextStr}`:(document.getElementById("datetime-text").innerText=`${M.timeTextStr}`,c=!0))}!settingsManager.isEditTime&&settingsManager.cruncherReady||$("#datetime-input-tb").val(timeManager.selectedDate.toISOString().slice(0,10)+" "+timeManager.selectedDate.toISOString().slice(11,19)),M.earthJ=timeManager.jday(o.getUTCFullYear(),o.getUTCMonth()+1,o.getUTCDate(),o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds()),M.earthJ+=o.getUTCMilliseconds()*MILLISECONDS_PER_DAY,M.earthEra=satellite.gstime(M.earthJ),sun.currentDirection(),vec3.normalize(M.lightDirection,M.lightDirection),l=f,mat4.identity(l),mat4.rotateZ(l,l,M.earthEra),mat4.translate(l,l,M.pos),g=d,mat3.normalFromMat4(g,l)}),M.draw=function(e,o){if(M.loaded)return gl.useProgram(s),gl.bindFramebuffer(gl.FRAMEBUFFER,null),gl.uniformMatrix3fv(s.uNormalMatrix,!1,g),gl.uniformMatrix4fv(s.uMvMatrix,!1,l),gl.uniformMatrix4fv(s.uPMatrix,!1,e),gl.uniformMatrix4fv(s.uCamMatrix,!1,o),gl.uniform3fv(s.uLightDirection,M.lightDirection),gl.uniform3fv(s.uAmbientLightColor,[.1,.1,.1]),gl.uniform3fv(s.uDirectionalLightColor,[1,1,1]),gl.uniform1i(s.uSampler,0),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,u),gl.uniform1i(s.uNightSampler,1),gl.activeTexture(gl.TEXTURE1),M.isDayNightToggle?gl.bindTexture(gl.TEXTURE_2D,u):gl.bindTexture(gl.TEXTURE_2D,m),gl.uniform1i(s.uBumpMap,2),gl.activeTexture(gl.TEXTURE2),gl.bindTexture(gl.TEXTURE_2D,M.bumpMap.texture),gl.uniform1i(s.uSpecMap,3),gl.activeTexture(gl.TEXTURE3),gl.bindTexture(gl.TEXTURE_2D,M.specularMap.texture),gl.bindBuffer(gl.ARRAY_BUFFER,r),gl.enableVertexAttribArray(s.aTexCoord),gl.vertexAttribPointer(s.aTexCoord,2,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,a),gl.enableVertexAttribArray(s.aVertexPosition),gl.vertexAttribPointer(s.aVertexPosition,3,gl.FLOAT,!1,0,0),gl.vertexAttribPointer(gl.pickShaderProgram.aPos,3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,t),gl.enableVertexAttribArray(s.aVertexNormal),gl.vertexAttribPointer(s.aVertexNormal,3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,n),gl.drawElements(gl.TRIANGLES,i,gl.UNSIGNED_SHORT,0),gl.disableVertexAttribArray(s.aTexCoord),gl.disableVertexAttribArray(s.aVertexPosition),gl.disableVertexAttribArray(s.aVertexNormal),gl.useProgram(gl.pickShaderProgram),gl.bindFramebuffer(gl.FRAMEBUFFER,gl.pickFb),gl.uniformMatrix4fv(gl.pickShaderProgram.uMvMatrix,!1,l),gl.disableVertexAttribArray(gl.pickShaderProgram.aColor),gl.enableVertexAttribArray(gl.pickShaderProgram.aPos),gl.drawElements(gl.TRIANGLES,i,gl.UNSIGNED_SHORT,0),!0},window.earth=M}(),function(){var r={};let n,i,o,l;r.latSegs=64,r.lonSegs=64,r.lightDirection=[],r.init=function(){let a=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(a,e.shaders.atmosphere.frag),gl.compileShader(a);let t=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(t,e.shaders.atmosphere.vert),gl.compileShader(t),l=gl.createProgram(),gl.attachShader(l,t),gl.attachShader(l,a),gl.linkProgram(l),l.aVertexPosition=gl.getAttribLocation(l,"aVertexPosition"),l.aVertexNormal=gl.getAttribLocation(l,"aVertexNormal"),l.uPMatrix=gl.getUniformLocation(l,"uPMatrix"),l.uCamMatrix=gl.getUniformLocation(l,"uCamMatrix"),l.uMvMatrix=gl.getUniformLocation(l,"uMvMatrix"),l.uNormalMatrix=gl.getUniformLocation(l,"uNormalMatrix"),l.uLightDirection=gl.getUniformLocation(l,"uLightDirection");let g=[],s=[];for(let a=0;a<=r.latSegs;a++){let t=Math.PI/r.latSegs*a-Math.PI/2,e=Math.cos(Math.abs(t)),n=Math.sin(t);for(let a=0;a<=r.lonSegs;a++){let t=2*Math.PI/r.lonSegs*a,i=Math.cos(t)*e,o=Math.sin(t)*e;g.push(i*settingsManager.atmosphereSize),g.push(o*settingsManager.atmosphereSize),g.push(n*settingsManager.atmosphereSize),s.push(i),s.push(o),s.push(n)}}let u=[];for(let a=0;a<r.latSegs;a++)for(let t=0;t<r.lonSegs;t++){var m=a*(r.lonSegs+1)+t,M=m+1,c=(a+1)*(r.lonSegs+1)+t,v=c+1;u.push(m),u.push(M),u.push(c),u.push(c),u.push(v),u.push(M)}r.vertCount=u.length,n=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,n),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(g),gl.STATIC_DRAW),i=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,i),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(s),gl.STATIC_DRAW),o=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,o),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(u),gl.STATIC_DRAW),r.loaded=!0},r.update=(()=>{r.mvMatrix=a,mat4.identity(r.mvMatrix),mat4.rotateY(r.mvMatrix,r.mvMatrix,90*DEG2RAD-camPitch),mat4.translate(r.mvMatrix,r.mvMatrix,[0,0,0]),r.nMatrix=t,mat3.normalFromMat4(r.nMatrix,r.mvMatrix)}),r.draw=function(a,t){if(r.loaded)return gl.enable(gl.BLEND),gl.disable(gl.DEPTH_TEST),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),gl.useProgram(l),gl.bindFramebuffer(gl.FRAMEBUFFER,null),gl.uniformMatrix3fv(l.uNormalMatrix,!1,r.nMatrix),gl.uniformMatrix4fv(l.uMvMatrix,!1,r.mvMatrix),gl.uniformMatrix4fv(l.uPMatrix,!1,a),gl.uniformMatrix4fv(l.uCamMatrix,!1,t),gl.uniform3fv(l.uLightDirection,earth.lightDirection),gl.bindBuffer(gl.ARRAY_BUFFER,n),gl.enableVertexAttribArray(l.aVertexPosition),gl.vertexAttribPointer(l.aVertexPosition,3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,i),gl.enableVertexAttribArray(l.aVertexNormal),gl.vertexAttribPointer(l.aVertexNormal,3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,o),gl.drawElements(gl.TRIANGLES,r.vertCount,gl.UNSIGNED_SHORT,0),gl.disableVertexAttribArray(l.aVertexPosition),gl.disableVertexAttribArray(l.aVertexNormal),gl.disable(gl.BLEND),gl.enable(gl.DEPTH_TEST),!0},window.atmosphere=r}(),function(){var n={};n.sunvar={},n.currentDirection=function(){return n.sunvar.now=timeManager.propTime(),n.sunvar.j=timeManager.jday(n.sunvar.now.getUTCFullYear(),n.sunvar.now.getUTCMonth()+1,n.sunvar.now.getUTCDate(),n.sunvar.now.getUTCHours(),n.sunvar.now.getUTCMinutes(),n.sunvar.now.getUTCSeconds()),n.sunvar.j+=n.sunvar.now.getUTCMilliseconds()*MILLISECONDS_PER_DAY,n.getDirection(n.sunvar.j)},n.getDirection=function(a){n.sunvar.n=a-2451545,n.sunvar.L=280.46+.9856474*n.sunvar.n,n.sunvar.g=357.528+.9856003*n.sunvar.n,n.sunvar.L=n.sunvar.L%360,n.sunvar.g=n.sunvar.g%360,n.sunvar.ecLon=n.sunvar.L+1.915*Math.sin(n.sunvar.g*DEG2RAD)+.02*Math.sin(2*n.sunvar.g*DEG2RAD),n.sunvar.ob=function(a){return n.sunvar.t=(a-2451545)/3652500,n.sunvar.obliq=84381.448-4680.93*n.sunvar.t-1.55*Math.pow(n.sunvar.t,2)+1999.25*Math.pow(n.sunvar.t,3)-51.38*Math.pow(n.sunvar.t,4)-249.67*Math.pow(n.sunvar.t,5)-39.05*Math.pow(n.sunvar.t,6)+7.12*Math.pow(n.sunvar.t,7)+27.87*Math.pow(n.sunvar.t,8)+5.79*Math.pow(n.sunvar.t,9)+2.45*Math.pow(n.sunvar.t,10),n.sunvar.obliq/3600}(a),earth.lightDirection[0]=Math.cos(n.sunvar.ecLon*DEG2RAD),earth.lightDirection[1]=Math.cos(n.sunvar.ob*DEG2RAD)*Math.sin(n.sunvar.ecLon*DEG2RAD),earth.lightDirection[2]=Math.sin(n.sunvar.ob*DEG2RAD)*Math.sin(n.sunvar.ecLon*DEG2RAD)},n.getXYZ=function(){var a=timeManager.propTime();j=timeManager.jday(a.getUTCFullYear(),a.getUTCMonth()+1,a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds()),j+=a.getUTCMilliseconds()*MILLISECONDS_PER_DAY;var t=satellite.gstime(j),e=new A.JulianDay(j),i=A.EclCoord.fromWgs84(0,0,0),o=A.Solar.topocentricPosition(e,i,!1);azimuth=o.hz.az*RAD2DEG+180,elevation=o.hz.alt*RAD2DEG%360;var l=new A.JulianDay(A.JulianDay.dateToJD(timeManager.propTime())).jdJ2000Century();return n.sunvar.g=180*A.Solar.meanAnomaly(l)/Math.PI,n.sunvar.g=n.sunvar.g%360,n.sunvar.R=1.00014-.01671*Math.cos(n.sunvar.g)-14e-5*Math.cos(2*n.sunvar.g),range=149597870700*n.sunvar.R/1e3,n.eci=satellite.ecfToEci(r(azimuth,elevation,range,0,0,0),t),{x:n.eci.x,y:n.eci.y,z:n.eci.z}};let i,o,l,g,s,u,m;n.pos=[0,0,0],n.pos2=[0,0,0];let M;n.init=function(){let a=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(a,e.shaders.sun.frag),gl.compileShader(a);let t=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(t,e.shaders.sun.vert),gl.compileShader(t),m=gl.createProgram(),gl.attachShader(m,t),gl.attachShader(m,a),gl.linkProgram(m),m.aVertexPosition=gl.getAttribLocation(m,"aVertexPosition"),m.aTexCoord=gl.getAttribLocation(m,"aTexCoord"),m.aVertexNormal=gl.getAttribLocation(m,"aVertexNormal"),m.uPMatrix=gl.getUniformLocation(m,"uPMatrix"),m.uCamMatrix=gl.getUniformLocation(m,"uCamMatrix"),m.uMvMatrix=gl.getUniformLocation(m,"uMvMatrix"),m.uNormalMatrix=gl.getUniformLocation(m,"uNormalMatrix"),m.uLightDirection=gl.getUniformLocation(m,"uLightDirection");var r=[],s=[],u=[];for(let a=0;a<=64;a++){var M=Math.PI/64*a-Math.PI/2,c=Math.cos(Math.abs(M)),v=Math.sin(M);for(let t=0;t<=64;t++){var f=2*Math.PI/64*t,d=Math.cos(f)*c,x=Math.sin(f)*c,h=1-a/64,R=.5+t/64;r.push(d*RADIUS_OF_DRAW_SUN),r.push(x*RADIUS_OF_DRAW_SUN),r.push(v*RADIUS_OF_DRAW_SUN),u.push(R),u.push(h),s.push(d),s.push(x),s.push(v)}}var E=[];for(let a=0;a<64;a++)for(let t=0;t<64;t++){var p=65*a+t,A=p+1,T=65*(a+1)+t,D=T+1;E.push(p),E.push(A),E.push(T),E.push(T),E.push(D),E.push(A)}g=E.length,i=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,i),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(r),gl.STATIC_DRAW),o=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,o),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(s),gl.STATIC_DRAW),l=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,l),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(E),gl.STATIC_DRAW),n.loaded=!0},n.draw=function(e,r){if(n.loaded)return n.realXyz=n.getXYZ(),M=Math.max(Math.max(Math.abs(n.realXyz.x),Math.abs(n.realXyz.y)),Math.abs(n.realXyz.z)),n.pos[0]=n.realXyz.x/M*SUN_SCALAR_DISTANCE,n.pos[1]=n.realXyz.y/M*SUN_SCALAR_DISTANCE,n.pos[2]=n.realXyz.z/M*SUN_SCALAR_DISTANCE,n.pos2[0]=100*n.pos[0],n.pos2[1]=100*n.pos[1],n.pos2[2]=100*n.pos[2],s=a,mat4.identity(s),mat4.translate(s,s,n.pos),mat4.rotateX(s,s,-camPitch),mat4.rotateZ(s,s,-camYaw),u=t,mat3.normalFromMat4(u,s),gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),gl.useProgram(m),gl.bindFramebuffer(gl.FRAMEBUFFER,null),gl.uniformMatrix3fv(m.uNormalMatrix,!1,u),gl.uniformMatrix4fv(m.uMvMatrix,!1,s),gl.uniformMatrix4fv(m.uPMatrix,!1,e),gl.uniformMatrix4fv(m.uCamMatrix,!1,r),gl.uniform3fv(m.uLightDirection,earth.lightDirection),gl.bindBuffer(gl.ARRAY_BUFFER,i),gl.enableVertexAttribArray(m.aVertexPosition),gl.vertexAttribPointer(m.aVertexPosition,3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,o),gl.enableVertexAttribArray(m.aVertexNormal),gl.vertexAttribPointer(m.aVertexNormal,3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,l),gl.drawElements(gl.TRIANGLES,g,gl.UNSIGNED_SHORT,0),!0},window.sun=n}(),function(){let n,i,o,l,g,s,u;var m;moon={},moon.pos=[0,0,0];moon.getXYZ=(()=>{var a=timeManager.propTime();j=timeManager.jday(a.getUTCFullYear(),a.getUTCMonth()+1,a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds()),j+=a.getUTCMilliseconds()*MILLISECONDS_PER_DAY;var t=satellite.gstime(j);return moon.moonPos=SunCalc.getMoonPosition(timeManager.propTime(),0,0),moon.position=satellite.ecfToEci(r(180+moon.moonPos.azimuth*RAD2DEG,moon.moonPos.altitude*RAD2DEG,moon.moonPos.distance,0,0,0),t),{x:moon.position.x,y:moon.position.y,z:moon.position.z}}),moon.init=function(){let a=gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(a,e.shaders.moon.frag),gl.compileShader(a);let t=gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(t,e.shaders.moon.vert),gl.compileShader(t),u=gl.createProgram(),gl.attachShader(u,t),gl.attachShader(u,a),gl.linkProgram(u),u.aVertexPosition=gl.getAttribLocation(u,"aVertexPosition"),u.aTexCoord=gl.getAttribLocation(u,"aTexCoord"),u.aVertexNormal=gl.getAttribLocation(u,"aVertexNormal"),u.uPMatrix=gl.getUniformLocation(u,"uPMatrix"),u.uCamMatrix=gl.getUniformLocation(u,"uCamMatrix"),u.uMvMatrix=gl.getUniformLocation(u,"uMvMatrix"),u.uNormalMatrix=gl.getUniformLocation(u,"uNormalMatrix"),u.uSunPos=gl.getUniformLocation(u,"uSunPos"),u.uMoonDis=gl.getUniformLocation(u,"uMoonDis"),u.uSampler=gl.getUniformLocation(u,"uSampler"),m=gl.createTexture();var r=new Image;r.onload=function(){gl.bindTexture(gl.TEXTURE_2D,m),gl.texImage2D(gl.TEXTURE_2D,0,gl.RGBA,gl.RGBA,gl.UNSIGNED_BYTE,r),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MAG_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_MIN_FILTER,gl.LINEAR),gl.texParameteri(gl.TEXTURE_2D,gl.TEXTURE_WRAP_S,gl.REPEAT);let a=moon.getXYZ(),t=Math.max(Math.max(Math.abs(a.x),Math.abs(a.y)),Math.abs(a.z));moon.pos[0]=a.x/t*MOON_SCALAR_DISTANCE,moon.pos[1]=a.y/t*MOON_SCALAR_DISTANCE,moon.pos[2]=a.z/t*MOON_SCALAR_DISTANCE,!0&&(moon.loaded=!0)},r.src=settingsManager.installDirectory+"textures/moon-1024.jpg";var g=[],s=[],M=[];for(let a=0;a<=32;a++){var c=Math.PI/32*a-Math.PI/2,v=Math.cos(Math.abs(c)),f=Math.sin(c);for(let t=0;t<=32;t++){var d=2*Math.PI/32*t,x=Math.cos(d)*v,h=Math.sin(d)*v,R=1-a/32,E=.5+t/32;g.push(x*RADIUS_OF_DRAW_MOON),g.push(h*RADIUS_OF_DRAW_MOON),g.push(f*RADIUS_OF_DRAW_MOON),M.push(E),M.push(R),s.push(x),s.push(h),s.push(f)}}var p=[];for(let a=0;a<32;a++)for(let t=0;t<32;t++){var A=33*a+t,T=A+1,D=33*(a+1)+t,_=D+1;p.push(A),p.push(T),p.push(D),p.push(D),p.push(_),p.push(T)}l=p.length,n=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,n),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(g),gl.STATIC_DRAW),i=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,i),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(s),gl.STATIC_DRAW),texCoordBuf=gl.createBuffer(),gl.bindBuffer(gl.ARRAY_BUFFER,texCoordBuf),gl.bufferData(gl.ARRAY_BUFFER,new Float32Array(M),gl.STATIC_DRAW),o=gl.createBuffer(),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,o),gl.bufferData(gl.ELEMENT_ARRAY_BUFFER,new Uint16Array(p),gl.STATIC_DRAW)},moon.draw=function(e,r){if(!moon.loaded)return;let M=moon.getXYZ(),c=Math.max(Math.max(Math.abs(M.x),Math.abs(M.y)),Math.abs(M.z));return moon.pos[0]=M.x/c*MOON_SCALAR_DISTANCE,moon.pos[1]=M.y/c*MOON_SCALAR_DISTANCE,moon.pos[2]=M.z/c*MOON_SCALAR_DISTANCE,g=a,mat4.identity(g),mat4.translate(g,g,moon.pos),s=t,mat3.normalFromMat4(s,g),gl.enable(gl.BLEND),gl.blendFunc(gl.SRC_ALPHA,gl.ONE_MINUS_SRC_ALPHA),gl.useProgram(u),gl.bindFramebuffer(gl.FRAMEBUFFER,null),gl.uniformMatrix3fv(u.uNormalMatrix,!1,s),gl.uniformMatrix4fv(u.uMvMatrix,!1,g),gl.uniformMatrix4fv(u.uPMatrix,!1,e),gl.uniformMatrix4fv(u.uCamMatrix,!1,r),gl.uniform3fv(u.uSunPos,sun.pos2),gl.uniform1f(u.uMoonDis,Math.sqrt(moon.pos[0]**2+moon.pos[1]**2+moon.pos[2]**2)),gl.uniform1i(u.uSampler,0),gl.activeTexture(gl.TEXTURE0),gl.bindTexture(gl.TEXTURE_2D,m),gl.bindBuffer(gl.ARRAY_BUFFER,texCoordBuf),gl.enableVertexAttribArray(u.aTexCoord),gl.vertexAttribPointer(u.aTexCoord,2,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,n),gl.enableVertexAttribArray(u.aVertexPosition),gl.vertexAttribPointer(u.aVertexPosition,3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ARRAY_BUFFER,i),gl.enableVertexAttribArray(u.aVertexNormal),gl.vertexAttribPointer(u.aVertexNormal,3,gl.FLOAT,!1,0,0),gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER,o),gl.drawElements(gl.TRIANGLES,l,gl.UNSIGNED_SHORT,0),gl.disableVertexAttribArray(u.aTexCoord),gl.disableVertexAttribArray(u.aVertexPosition),gl.disableVertexAttribArray(u.aVertexNormal),!0},window.moon=moon}(),e.shaders={earth:{frag:"\n        precision mediump float;\n\n        uniform vec3 uAmbientLightColor;\n        uniform vec3 uDirectionalLightColor;\n        uniform vec3 uLightDirection;\n\n        varying vec2 vUv;\n        varying vec3 vNormal;\n\n        uniform sampler2D uSampler;\n        uniform sampler2D uNightSampler;\n        uniform sampler2D uBumpMap;\n        uniform sampler2D uSpecMap;\n\n        void main(void) {\n          // float shininess = 1.0;\n          // float diffuse = pow(max(dot(vNormal, uLightDirection), 0.0),shininess);\n          // float diffuseLight = 0.7;\n          float diffuse = max(dot(vNormal, uLightDirection), 0.0);\n          vec3 bumpTexColor = texture2D(uBumpMap, vUv).rgb * diffuse * 0.4;\n          vec3 specLightColor = texture2D(uSpecMap, vUv).rgb * diffuse * 0.1;\n\n          vec3 dayColor = uAmbientLightColor + (uDirectionalLightColor * diffuse);\n          vec3 dayTexColor = texture2D(uSampler, vUv).rgb * dayColor;\n          vec3 nightColor = texture2D(uNightSampler, vUv).rgb * pow(1.0 - diffuse, 2.0);\n\n          gl_FragColor = vec4(dayTexColor + nightColor + bumpTexColor + specLightColor, 1.0);\n        }\n        ",vert:"\n        attribute vec3 aVertexPosition;\n\n        attribute vec2 aTexCoord;\n        attribute vec3 aVertexNormal;\n        uniform mat4 uPMatrix;\n        uniform mat4 uCamMatrix;\n        uniform mat4 uMvMatrix;\n        uniform mat3 uNormalMatrix;\n\n        varying vec2 vUv;\n        varying vec3 vNormal;\n\n        void main(void) {\n          gl_Position = uPMatrix * uCamMatrix * uMvMatrix * vec4(aVertexPosition, 1.0);\n          vUv = aTexCoord;\n\n          vNormal = uNormalMatrix * aVertexNormal;\n        }\n        "},sun:{frag:"\n        precision mediump float;\n        uniform vec3 uLightDirection;\n\n        varying vec3 vNormal;\n        varying float vDist;\n\n        void main(void) {\n          // Hide the Back Side of the Sphere to prevent duplicate suns\n          float darkAmount = max(dot(vNormal, -uLightDirection), 0.1);\n          // Create blur effect\n          float a = pow(vDist / 2.0 * -1.0 + 1.1, 10.0) * darkAmount;\n          // Set colors\n          float r = 1.0 * a;\n          float g = 1.0 * a;\n          float b = 0.4 * a;\n          gl_FragColor = vec4(vec3(r,g,b), a);\n        }\n      ",vert:`\n        attribute vec3 aVertexPosition;\n        attribute vec3 aVertexNormal;\n\n        uniform mat4 uPMatrix;\n        uniform mat4 uCamMatrix;\n        uniform mat4 uMvMatrix;\n        uniform mat3 uNormalMatrix;\n\n        varying vec3 vNormal;\n        varying float vDist;\n\n        void main(void) {\n          vec4 position1 = uCamMatrix * uMvMatrix * vec4(aVertexPosition, 1.0);\n          vec4 position0 = uCamMatrix * uMvMatrix * vec4(vec3(0.0,0.0,0.0), 1.0);\n          gl_Position = uPMatrix * position1;\n          vDist = distance(position0.xz,position1.xz) / ${RADIUS_OF_DRAW_SUN}.0;\n          vNormal = uNormalMatrix * aVertexNormal;\n        }`},moon:{frag:"\n        #extension GL_EXT_frag_depth : enable\n        precision mediump float;\n\n        uniform vec3 uLightDirection;\n        varying vec2 vUv;\n        varying vec3 vNormal;\n\n        uniform sampler2D uSampler;\n        uniform vec3 uSunPos;\n\n        varying float vDist;\n\n        void main(void) {\n          // Moon Position - Sun Position\n          vec3 LightDirection = uSunPos - vec3(0.0,0.0,0.0);\n          LightDirection = normalize(LightDirection);\n\n          float diffuse = max(dot(vNormal, LightDirection), 0.0);\n          vec3 ambientLight = vec3(0.05,0.05,0.05);\n\n          vec3 litTexColor = texture2D(uSampler, vUv).rgb * (ambientLight + diffuse * 1.5);\n\n          if (vDist > 1.0) {\n            discard;\n            // litTexColor = vec3(1.0,0.0,0.0);\n          }\n\n          // gl_FragColor = vec4(vec3(vDist - 1.0,0.0,0.0), 1.0);\n          gl_FragColor = vec4(litTexColor, 1.0);\n\n          // gl_FragDepthEXT = gl_FragCoord.z - 0.000001;\n          // gl_FragDepthEXT = 0.999999 + (0.0000001 * gl_FragCoord.z); //min(gl_FragCoord.z, 0.999999);\n        }\n      ",vert:"\n        attribute vec3 aVertexPosition;\n\n        attribute vec2 aTexCoord;\n        attribute vec3 aVertexNormal;\n\n        uniform mat4 uPMatrix;\n        uniform mat4 uCamMatrix;\n        uniform mat4 uMvMatrix;\n        uniform mat3 uNormalMatrix;\n        uniform float uMoonDis;\n\n        varying vec2 vUv;\n        varying vec3 vNormal;\n        varying float vDist;\n\n        void main(void) {\n          vec4 position = uMvMatrix * vec4(aVertexPosition, 1.0);\n          gl_Position = uPMatrix * uCamMatrix * position;\n          vDist = distance(position.xyz,vec3(0.0,0.0,0.0)) / uMoonDis;\n          vUv = aTexCoord;\n\n          vNormal = uNormalMatrix * aVertexNormal;\n        }\n      "},atmosphere:{frag:"\n        precision mediump float;\n\n        uniform vec3 uLightDirection;\n        varying vec3 vNormal;\n        varying float vDist;\n\n        void main () {\n          float sunAmount = max(dot(vNormal, uLightDirection), 0.1);\n          float darkAmount = max(dot(vNormal, -uLightDirection), 0.0);\n          float a4 = pow(1.1 - vDist / 2.0, 1.1) * 2.0;\n          float r = 1.0 - sunAmount;\n          float g = max(1.0 - sunAmount, 0.8) - darkAmount;\n          float b = max(sunAmount, 0.8) - darkAmount;\n          float a1 = min(sunAmount, 0.8) * 2.0;\n          float a2 = min(pow(darkAmount / 1.15, 2.0),0.2);\n          float a3 = pow(vDist,2.0) * -1.0 + 1.0;\n          float a = min(a1 - a2, a3) * a4;\n          gl_FragColor    = vec4(vec3(r,g,b), a);\n        }\n      ",vert:`\n        attribute vec3 aVertexPosition;\n        attribute vec3 aVertexNormal;\n\n        uniform mat4 uPMatrix;\n        uniform mat4 uCamMatrix;\n        uniform mat4 uMvMatrix;\n        uniform mat3 uNormalMatrix;\n\n        varying vec3 vNormal;\n        varying float vDist;\n\n        void main(void) {\n          vec4 position1 = uCamMatrix * uMvMatrix * vec4(aVertexPosition, 1.0);\n          vec4 position0 = uCamMatrix * uMvMatrix * vec4(vec3(0.0,0.0,0.0), 1.0);\n          gl_Position = uPMatrix * position1;\n          vDist = distance(position0.xz,position1.xz) / ${settingsManager.atmosphereSize}.0;\n          vNormal = normalize( uNormalMatrix * aVertexNormal );\n        }\n      `}},window.sceneManager=e}(),function(){var a={};a.shaderData=[{name:"dot-fragment.glsl",code:`\n      precision mediump float;\n\n      varying vec4 vColor;\n      varying float vStar;\n      varying float vDist;\n\n      float when_lt(float x, float y) {\n        return max(sign(y - x), 0.0);\n      }\n      float when_ge(float x, float y) {\n        return 1.0 - when_lt(x, y);\n      }\n\n      void main(void) {\n\n        vec2 ptCoord = gl_PointCoord * 2.0 - vec2(1.0, 1.0);\n        float r = 0.0;\n        float alpha = 0.0;\n        // If not a star and not on the ground\n        r += (${settingsManager.satShader.blurFactor1} - min(abs(length(ptCoord)), 1.0)) * when_lt(vDist, 200000.0) * when_ge(vDist, 6421.0);\n        alpha += (pow(2.0 * r + ${settingsManager.satShader.blurFactor2}, 3.0)) * when_lt(vDist, 200000.0) * when_ge(vDist, 6421.0);\n\n        // If on the ground\n        r += (${settingsManager.satShader.blurFactor1} - min(abs(length(ptCoord)), 1.0)) * when_lt(vDist, 6421.0);\n        alpha += (pow(2.0 * r + ${settingsManager.satShader.blurFactor2}, 3.0)) * when_lt(vDist, 6471.0);\n\n        // If a star\n        r += (${settingsManager.satShader.blurFactor3} - min(abs(length(ptCoord)), 1.0)) * when_ge(vDist, 200000.0);\n        alpha += (pow(2.0 * r + ${settingsManager.satShader.blurFactor4}, 3.0)) * when_ge(vDist, 200000.0);\n\n        alpha = min(alpha, 1.0);\n        if (alpha == 0.0) discard;\n        gl_FragColor = vec4(vColor.rgb, vColor.a * alpha);\n      }\n    `},{name:"dot-vertex-var.glsl",code:`\n        #extension GL_EXT_frag_depth : enable\n        attribute vec3 aPos;\n        attribute vec4 aColor;\n        attribute float aStar;\n\n        uniform float minSize;\n        uniform float maxSize;\n\n        uniform mat4 uCamMatrix;\n        uniform mat4 uMvMatrix;\n        uniform mat4 uPMatrix;\n\n        varying vec4 vColor;\n        varying float vStar;\n        varying float vDist;\n\n        float when_lt(float x, float y) {\n          return max(sign(y - x), 0.0);\n        }\n        float when_ge(float x, float y) {\n          return 1.0 - when_lt(x, y);\n        }\n\n        void main(void) {\n          vec4 position = uPMatrix * uCamMatrix *  uMvMatrix * vec4(aPos, 1.0);\n          float drawSize = 0.0;\n          float dist = distance(vec3(0.0, 0.0, 0.0),aPos.xyz);\n\n          // Satellite\n          drawSize +=\n            when_lt(aStar, 0.5) *\n            (min(max(pow(${settingsManager.satShader.distanceBeforeGrow} / position.z, 2.1), minSize * 0.9), maxSize) * 1.0);\n\n          // Something on the ground\n          drawSize +=\n            when_ge(aStar, 0.5) * when_lt(dist, 6421.0) *\n            (min(max(pow(${settingsManager.satShader.distanceBeforeGrow} / position.z, 2.1), minSize * 0.75), maxSize) * 1.0);\n\n          // Star or Searched Object\n          drawSize +=\n            when_ge(aStar, 0.5) * when_ge(dist, 6421.0) *\n            (min(max(${settingsManager.satShader.starSize} * 100000.0 / dist, ${settingsManager.satShader.starSize}),${settingsManager.satShader.starSize} * 1.0));\n\n          gl_PointSize = drawSize;\n          gl_Position = position;\n          vColor = aColor;\n          vStar = aStar * 1.0;\n          vDist = dist;\n        }\n      `},{name:"dot-fragment-rm.glsl",code:`\n          precision mediump float;\n\n          void main(void) {\n\n            vec2 ptCoord = gl_PointCoord * 2.0 - vec2(1.0, 1.0);\n\n            float r = (${settingsManager.satShader.blurFactor1} - min(abs(length(ptCoord)), 1.0));\n            float alpha = (pow(2.0 * r + ${settingsManager.satShader.blurFactor2}, 3.0));\n\n            alpha = min(alpha, 1.0);\n            gl_FragColor = vec4(1.0, 0.0, 1.0, alpha);\n          }\n        `},{name:"dot-vertex-rm.glsl",code:`\n            attribute vec3 aPos;\n\n            uniform mat4 uCamMatrix;\n            uniform mat4 uMvMatrix;\n            uniform mat4 uPMatrix;\n\n            void main(void) {\n              vec4 position = uPMatrix * uCamMatrix *  uMvMatrix * vec4(aPos, 1.0);\n              float drawSize = 0.0;\n              float dist = distance(vec3(0.0, 0.0, 0.0),aPos.xyz);\n\n              drawSize = (min(max(pow(${settingsManager.satShader.distanceBeforeGrow} / position.z, 2.1), 4.0 * 0.75), 80.0) * 1.0);\n\n              gl_PointSize = drawSize;\n              gl_Position = position;\n            }\n          `},{name:"pick-fragment.glsl",code:"\n            #extension GL_EXT_frag_depth : enable\n            precision mediump float;\n\n            varying vec3 vColor;\n\n            void main(void) {\n              gl_FragColor = vec4(vColor, 1.0);\n            }\n          "},{name:"pick-vertex.glsl",code:"\n              attribute vec3 aPos;\n              attribute vec3 aColor;\n              attribute float aPickable;\n\n              uniform mat4 uCamMatrix;\n              uniform mat4 uMvMatrix;\n              uniform mat4 uPMatrix;\n\n              varying vec3 vColor;\n\n              void main(void) {\n                float dotSize = 16.0;\n                vec4 position = uPMatrix * uCamMatrix *  uMvMatrix * vec4(aPos, 1.0);\n                gl_Position = position;\n                gl_PointSize = dotSize * aPickable;\n                vColor = aColor * aPickable;\n              }\n            "},{name:"path-fragment.glsl",code:"\n              #extension GL_EXT_frag_depth : enable\n              precision mediump float;\n\n              varying vec4 vColor;\n\n              void main(void) {\n                gl_FragColor = vColor;\n              }\n            "},{name:"path-vertex.glsl",code:"\n            #extension GL_EXT_frag_depth : enable\n            attribute vec3 aPos;\n\n            uniform mat4 uCamMatrix;\n            uniform mat4 uMvMatrix;\n            uniform mat4 uPMatrix;\n            uniform vec4 uColor;\n\n            varying vec4 vColor;\n\n            void main(void) {\n              vec4 position = uPMatrix * uCamMatrix *  uMvMatrix * vec4(aPos, 1.0);\n              gl_Position = position;\n              vColor = uColor;\n            }\n          "}],a.shaderDataLen=a.shaderData.length;var t=0;a.getShaderCode=function(e){for(t=0;t<a.shaderDataLen;t++)if(a.shaderData[t].name===e)return a.shaderData[t].code;return null},window.shaderLoader=a}(),radarDataManager={},radarDataManager.radarData=[],radarDataManager.drawT1=0,radarDataManager.init=(()=>{$.getScript("radarData/radarData.json",function(a){radarDataManager.setup(a)})}),radarDataManager.findFirstDataTime=(()=>{let a=Date.now();for(let t=0;t<radarDataManager.radarData.length;t++)if(radarDataManager.radarData[t].t>a-3e3)return t}),radarDataManager.setup=(a=>{db.log("radarDataManager.init"),radarDataManager.radarData=JSON.parse(a),satSet.updateRadarData(),settingsManager.radarDataReady=!0}),radarDataManager.createFakeData=(()=>{let a=[],t=Date.now(),e=0;for(var r=0;r<36e5;r+=56)for(let n=0;n<1;n++){let n=240*Math.random()-18,i=2+2*Math.random();e<2&&(i=2+83*Math.random()),10==++e&&(e=0),a.push({t:t+r,name:`Radar Measurement ${Math.round(1e5*Math.random())}`,dataType:1,r:150+5556*Math.random(),a:n,e:i,ae:3*Math.random(),ee:3*Math.random(),rc:40*Math.random()/10})}return a}),window.radarDataManager=radarDataManager;
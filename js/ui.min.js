var canvasDOM=$("#canvas");try{var recorder=new CanvasRecorder(document.getElementById("canvas"))}catch(e){console.log(e)}var dropdownInstance,bodyDOM=$("#bodyDOM"),mapImageDOM=$("#map-image"),mapMenuDOM=$("#map-menu"),satHoverBoxDOM=$("#sat-hoverbox"),rightBtnMenuDOM=$("#right-btn-menu"),rightBtnViewDOM=$("#view-rmb"),rightBtnEditDOM=$("#edit-rmb"),rightBtnCreateDOM=$("#create-rmb"),rightBtnDrawDOM=$("#draw-rmb"),rightBtnColorsDOM=$("#colors-rmb"),rightBtnEarthDOM=$("#earth-rmb"),rightBtnViewMenuDOM=$("#view-rmb-menu"),rightBtnEditMenuDOM=$("#edit-rmb-menu"),rightBtnCreateMenuDOM=$("#create-rmb-menu"),rightBtnDrawMenuDOM=$("#draw-rmb-menu"),rightBtnColorsMenuDOM=$("#colors-rmb-menu"),rightBtnEarthMenuDOM=$("#earth-rmb-menu"),satHoverBoxNode1=document.getElementById("sat-hoverbox1"),satHoverBoxNode2=document.getElementById("sat-hoverbox2"),satHoverBoxNode3=document.getElementById("sat-hoverbox3"),lkpassed=!1,isDayNightToggle=!1,clickedSat=0;function saveVariable(e){e=JSON.stringify(e);var t=new Blob([e],{type:"text/plain;charset=utf-8"});saveAs(t,"variable.txt")}$.ajaxSetup({cache:!1}),function(){var e,t=0,a=0,s=!1,n=!1,r=!1,i=!1,o=!1,l=!1,c=!1,g=!1,m=!1,d=!1,u=!1,h=!1,p=!1,S=!1,b=!1,f=[],v=[],C=[],k=!1,w=1e3,y=1,O={},T="";function D(e,t){return e.length<t?D("0"+e,t):e}$(document).ready(function(){var F,E;function R(){rightBtnViewMenuDOM.hide(),rightBtnEditMenuDOM.hide(),rightBtnCreateMenuDOM.hide(),rightBtnColorsMenuDOM.hide(),rightBtnDrawMenuDOM.hide(),rightBtnEarthMenuDOM.hide()}mobile.checkMobileMode(),settingsManager.offline&&(w=250),"undefined"==typeof satel&&(satel=null),settingsManager.offline&&!function(){if(lk1=new Date(lk1),"undefined"==lk1)return!1;if(settingsManager.lkVerify>lk1)return!1;var e=0;for(x=0;x<settingsManager.offlineLocation.length;x++)e+=41690*settingsManager.offlineLocation.charCodeAt(x);return e===lk2}()&&(_offlineMessage(),$("#license-watermark").removeClass("start-hidden"),$("#license-watermark").show(),console.warn("Please Contact Theodore Kruczek To Renew Your License <br> theodore.kruczek@gmail.com"),console.warn("You will be redirected to the online version of keeptrack in 2 minutes."),setTimeout(function(){window.location.replace("http://s4ts.com")},12e4)),O.resize2DMap(),"https:"!==location.protocol&&($("#cs-geolocation").hide(),$("#geolocation-btn").hide()),F=!1,$(window).resize(function(){O.resize2DMap(),mobile.checkMobileMode(),F||window.setTimeout(function(){F=!1,webGlInit()},500),F=!0}),drawLoopCallback=function(){L(),function(){if(!(f.length<=0)){for(var e=0;e<f.length;e++){var t=satSet.getSat(f[e]);1===t.inview&&!1===v[e]&&(v[e]=!0,orbitDisplay.addInViewOrbit(f[e])),0===t.inview&&!0===v[e]&&(v[e]=!1,orbitDisplay.removeInViewOrbit(f[e]))}for(e=0;e<v.length;e++)if(!0===v[e])return void settingsManager.themes.redTheme();settingsManager.themes.blueTheme()}}(),function(){if(-1!==selectedSat){var e=satSet.getSat(selectedSat);if(!e.static&&timeManager.now>1*t+w){e.missile?missileManager.getMissileTEARR(e):satellite.getTEARR(e),satellite.degreesLong(satellite.currentTEARR.lon)>=0?$("#sat-longitude").html(satellite.degreesLong(satellite.currentTEARR.lon).toFixed(3)+"°E"):$("#sat-longitude").html((-1*satellite.degreesLong(satellite.currentTEARR.lon)).toFixed(3)+"°W"),satellite.degreesLat(satellite.currentTEARR.lat)>=0?$("#sat-latitude").html(satellite.degreesLat(satellite.currentTEARR.lat).toFixed(3)+"°N"):$("#sat-latitude").html((-1*satellite.degreesLat(satellite.currentTEARR.lat)).toFixed(3)+"°S");var a="JDAY: "+timeManager.getDayOfYear(timeManager.propTime());$("#jday").html(a),settingsManager.isMapMenuOpen&&timeManager.now>settingsManager.lastMapUpdateTime+3e4&&(O.updateMap(),settingsManager.lastMapUpdateTime=timeManager.now),$("#sat-altitude").html(satellite.currentTEARR.alt.toFixed(2)+" km"),$("#sat-velocity").html(e.velocity.toFixed(2)+" km/s"),satellite.currentTEARR.inview?($("#sat-azimuth").html(satellite.currentTEARR.azimuth.toFixed(0)+"°"),$("#sat-elevation").html(satellite.currentTEARR.elevation.toFixed(1)+"°"),$("#sat-range").html(satellite.currentTEARR.range.toFixed(2)+" km")):($("#sat-azimuth").html("Out of Bounds"),$("#sat-azimuth").prop("title","Azimuth: "+satellite.currentTEARR.azimuth.toFixed(0)+"°"),$("#sat-elevation").html("Out of Bounds"),$("#sat-elevation").prop("title","Elevation: "+satellite.currentTEARR.elevation.toFixed(1)+"°"),$("#sat-range").html("Out of Bounds"),$("#sat-range").prop("title","Range: "+satellite.currentTEARR.range.toFixed(2)+" km")),satellite.sensorSelected()?(selectedSat===lastSelectedSat||e.missile||$("#sat-nextpass").html(satellite.nextpass(e)),lastSelectedSat=selectedSat):$("#sat-nextpass").html("Unavailable"),t=timeManager.now}}}(),""!==T&&("zoom-in"===T&&(zoomTarget-=.0025,zoomTarget<0&&(zoomTarget=0)),"zoom-out"===T&&(zoomTarget+=.0025,zoomTarget>1&&(zoomTarget=1)))},E="JDAY: "+timeManager.getDayOfYear(timeManager.propTime()),$("#jday").html(E),E=null,$("head").append('<link rel="stylesheet" type="text/css" href="css/style.css?v='+settingsManager.versionNumber+'"">'),$("head").append('<link rel="stylesheet" type="text/css" href="css/responsive.css?v='+settingsManager.versionNumber+'"">'),$("img").each(function(){$(this).attr("src",$(this).attr("delayedsrc"))}),$(".dropdown-button").dropdown(),$(".tooltipped").tooltip({delay:50}),M.AutoInit(),dropdownInstance=M.Dropdown.getInstance($(".dropdown-trigger")),$("#search-results").perfectScrollbar(),$("#datetime-input-tb").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",timezone:"+0000",gotoCurrent:!0,addSliderAccess:!0,sliderAccessArgs:{touchonly:!1}}).on("change.dp",function(e){$("#datetime-input").fadeOut(),L(!0),settingsManager.isEditTime=!1}),window.oncontextmenu=function(e){return e.preventDefault(),e.stopPropagation(),!1},$(document).bind("cbox_closed",function(){c&&(c=!1,$("#menu-launches").removeClass("bmenu-item-selected"))}),function(){var e;function t(t){var a=t.target.id;switch("A"==t.target.tagName&&(a=t.target.parentNode.id),"UL"==t.target.tagName&&(a=t.target.firstChild.id),a){case"view-info-rmb":M.toast({html:"Lat: "+e.latitude.toFixed(3)+"<br/>Lon: "+e.longitude.toFixed(3)});break;case"view-sat-info-rmb":selectSat(clickedSat);break;case"view-sensor-info-rmb":selectSat(clickedSat),$("#menu-sensor-info").click();break;case"view-related-sats-rmb":var s=satSet.getSatExtraOnly(clickedSat).intlDes.slice(0,8);searchBox.doSearch(s),$("#search").val(s);break;case"view-curdops-rmb":var n=satellite.getDOPs(e.latitude,e.longitude,0);M.toast({html:"HDOP: "+n.HDOP+"<br/>VDOP: "+n.VDOP+"<br/>PDOP: "+n.PDOP+"<br/>GDOP: "+n.GDOP+"<br/>TDOP: "+n.TDOP});break;case"view-24dops-rmb":isDOPMenuOpen?(O.hideSideMenus(),isDOPMenuOpen=!0,$("#loading-screen").fadeIn("slow",function(){$("#dops-lat").val(e.latitude.toFixed(3)),$("#dops-lon").val(e.longitude.toFixed(3)),$("#dops-alt").val(0),$("#dops-el").val(settingsManager.gpsElevationMask);var t=1*$("#dops-lat").val(),a=1*$("#dops-lon").val(),s=1*$("#dops-alt").val();$("#dops-el").val();satellite.getDOPsTable(t,a,s),$("#menu-dops").addClass("bmenu-item-selected"),$("#loading-screen").fadeOut(),$("#dops-menu").effect("slide",{direction:"left",mode:"show"},1e3)})):($("#dops-lat").val(e.latitude.toFixed(3)),$("#dops-lon").val(e.longitude.toFixed(3)),$("#dops-alt").val(0),$("#dops-el").val(settingsManager.gpsElevationMask),A({currentTarget:{id:"menu-dops"}}));break;case"edit-sat-rmb":selectSat(clickedSat),isEditSatMenuOpen||A({currentTarget:{id:"menu-editSat"}});break;case"create-sensor-rmb":$("#customSensor-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#menu-customSensor").addClass("bmenu-item-selected"),isCustomSensorMenuOpen=!0,$("#cs-telescope").click(),$("#cs-lat").val(e.latitude),$("#cs-lon").val(e.longitude),$("#cs-hei").val(0),$("#cs-type").val("Optical"),$("#cs-minaz").val(0),$("#cs-maxaz").val(360),$("#cs-minel").val(10),$("#cs-maxel").val(90),$("#cs-minrange").val(0),$("#cs-maxrange").val(1e6),$("#customSensor").submit();break;case"clear-lines-rmb":drawLineList=[],starManager.isAllConstellationVisible=!1;break;case"line-eci-axis-rmb":debugDrawLine("ref",[1e4,0,0],"r"),debugDrawLine("ref",[0,1e4,0],"g"),debugDrawLine("ref",[0,0,1e4],"b");break;case"line-earth-sat-rmb":debugDrawLine("sat",clickedSat,"p");break;case"line-sensor-sat-rmb":debugDrawLine("sat3",[clickedSat,satSet.getIdFromSensorName(satellite.currentSensor.name)],"p");break;case"line-sat-sun-rmb":var r=sun.getXYZ();debugDrawLine("sat2",[clickedSat,r.x,r.y,r.z],"p");break;case"create-observer-rmb":$("#customSensor-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#menu-customSensor").addClass("bmenu-item-selected"),isCustomSensorMenuOpen=!0,$("#cs-lat").val(e.latitude),$("#cs-lon").val(e.longitude),$("#cs-hei").val(0),$("#cs-type").val("Observer"),$("#customSensor").submit(),O.legendMenuChange("sunlight"),satSet.setColorScheme(ColorScheme.sunlight,!0),settingsManager.isForceColorScheme=!0,satCruncher.postMessage({isSunlightView:!0});break;case"colors-default-rmb":satellite.sensorSelected(),O.legendMenuChange("default"),satSet.setColorScheme(ColorScheme.default,!0),ga("send","event","ColorScheme Menu","Default Color","Selected");break;case"colors-sunlight-rmb":O.legendMenuChange("sunlight"),satSet.setColorScheme(ColorScheme.sunlight,!0),settingsManager.isForceColorScheme=!0,satCruncher.postMessage({isSunlightView:!0}),ga("send","event","ColorScheme Menu","Sunlight","Selected");break;case"colors-country-rmb":O.legendMenuChange("countries"),satSet.setColorScheme(ColorScheme.countries),ga("send","event","ColorScheme Menu","Countries","Selected");break;case"earth-blue-rmb":settingsManager.blueImages=!0,settingsManager.nasaImages=!1,settingsManager.trusatImages=!1,settingsManager.lowresImages=!1,settingsManager.hiresImages=!1,settingsManager.hiresNoCloudsImages=!1,settingsManager.vectorImages=!1,localStorage.setItem("lastMap","nasa"),earth.init();break;case"earth-nasa-rmb":settingsManager.blueImages=!1,settingsManager.nasaImages=!0,settingsManager.trusatImages=!1,settingsManager.lowresImages=!1,settingsManager.hiresImages=!1,settingsManager.hiresNoCloudsImages=!1,settingsManager.vectorImages=!1,localStorage.setItem("lastMap","nasa"),earth.init();break;case"earth-trusat-rmb":settingsManager.blueImages=!1,settingsManager.nasaImages=!1,settingsManager.trusatImages=!0,settingsManager.lowresImages=!1,settingsManager.hiresImages=!1,settingsManager.hiresNoCloudsImages=!1,settingsManager.vectorImages=!1,localStorage.setItem("lastMap","nasa"),earth.init();break;case"earth-low-rmb":settingsManager.blueImages=!1,settingsManager.nasaImages=!1,settingsManager.trusatImages=!1,settingsManager.lowresImages=!0,settingsManager.hiresImages=!1,settingsManager.hiresNoCloudsImages=!1,settingsManager.vectorImages=!1,localStorage.setItem("lastMap","low"),earth.init();break;case"earth-high-rmb":$("#loading-screen").fadeIn("slow",function(){settingsManager.blueImages=!1,settingsManager.nasaImages=!1,settingsManager.trusatImages=!1,settingsManager.lowresImages=!1,settingsManager.hiresImages=!0,settingsManager.hiresNoCloudsImages=!1,settingsManager.vectorImages=!1,localStorage.setItem("lastMap","high"),earth.init(),$("#loading-screen").fadeOut()});break;case"earth-high-no-clouds-rmb":$("#loading-screen").fadeIn("slow",function(){settingsManager.blueImages=!1,settingsManager.nasaImages=!1,settingsManager.trusatImages=!1,settingsManager.lowresImages=!1,settingsManager.hiresImages=!1,settingsManager.hiresNoCloudsImages=!0,settingsManager.vectorImages=!1,localStorage.setItem("lastMap","high-nc"),earth.init(),$("#loading-screen").fadeOut()});break;case"earth-vec-rmb":settingsManager.blueImages=!1,settingsManager.nasaImages=!1,settingsManager.trusatImages=!1,settingsManager.lowresImages=!1,settingsManager.hiresImages=!1,settingsManager.hiresNoCloudsImages=!1,settingsManager.vectorImages=!0,localStorage.setItem("lastMap","vec"),earth.init();break;case"clear-screen-rmb":$("#search").val(""),searchBox.hideResults(),!1,$("#menu-space-stations").removeClass("bmenu-item-selected"),satellite.sensorSelected()&&cameraType.current!==cameraType.PLANETARIUM&&cameraType.current!==cameraType.ASTRONOMY&&O.legendMenuChange("default"),selectSat(-1)}rightBtnMenuDOM.hide(),R()}canvasDOM.on("touchmove",function(e){if(e.preventDefault(),isPinching){var t=Math.hypot(e.originalEvent.touches[0].pageX-e.originalEvent.touches[1].pageX,e.originalEvent.touches[0].pageY-e.originalEvent.touches[1].pageY);deltaPinchDistance=(startPinchDistance-t)/maxPinchSize,zoomTarget+=deltaPinchDistance*(settingsManager.cameraMovementSpeed+.006),zoomTarget=Math.min(Math.max(zoomTarget,0),1)}else mouseX=e.originalEvent.touches[0].clientX,mouseY=e.originalEvent.touches[0].clientY,isDragging&&screenDragPoint[0]!==mouseX&&screenDragPoint[1]!==mouseY&&(dragHasMoved=!0,camAngleSnappedOnSat=!1,camZoomSnappedOnSat=!1),isMouseMoving=!0,clearTimeout(mouseTimeout),mouseTimeout=setTimeout(function(){isMouseMoving=!1},250)}),canvasDOM.mousemove(function(e){mouseX=e.clientX,mouseY=e.clientY,isDragging&&screenDragPoint[0]!==mouseX&&screenDragPoint[1]!==mouseY&&(dragHasMoved=!0,camAngleSnappedOnSat=!1,camZoomSnappedOnSat=!1),isMouseMoving=!0,clearTimeout(mouseTimeout),mouseTimeout=setTimeout(function(){isMouseMoving=!1},250)}),canvasDOM.on("wheel",function(e){var t=e.originalEvent.deltaY;1===e.originalEvent.deltaMode&&(t*=33.3333333),isZoomIn=t<0,zoomTarget+=t/100/50/y,zoomTarget=Math.min(Math.max(zoomTarget,0),1),rotateTheEarth=!1,camZoomSnappedOnSat=!1,cameraType.current!==cameraType.PLANETARIUM&&cameraType.current!==cameraType.FPS&&cameraType.current!==cameraType.SATELLITE&&cameraType.current!==cameraType.ASTRONOMY||(settingsManager.fieldOfView+=2e-4*t,$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg"),settingsManager.fieldOfView>settingsManager.fieldOfViewMax&&(settingsManager.fieldOfView=settingsManager.fieldOfViewMax),settingsManager.fieldOfView<settingsManager.fieldOfViewMin&&(settingsManager.fieldOfView=settingsManager.fieldOfViewMin),webGlInit())}),canvasDOM.click(function(e){rightBtnMenuDOM.hide(),R(),"block"===$("#colorbox").css("display")&&$.colorbox.close()}),canvasDOM.mousedown(function(t){1===y&&(settingsManager.cameraMovementSpeed=.003,settingsManager.cameraMovementSpeedMin=.005),dragPoint=getEarthScreenPoint(mouseX,mouseY),e=satellite.xyz2latlon(dragPoint[0],dragPoint[1],dragPoint[2]),screenDragPoint=[mouseX,mouseY],dragStartPitch=camPitch,dragStartYaw=camYaw,isDragging=!0,camSnapMode=!1,rotateTheEarth=!1,rightBtnMenuDOM.hide(),R()}),canvasDOM.on("touchstart",function(e){settingsManager.cameraMovementSpeed=1e-4,settingsManager.cameraMovementSpeedMin=1e-4,e.originalEvent.touches.length>1?(isPinching=!0,startPinchDistance=Math.hypot(e.originalEvent.touches[0].pageX-e.originalEvent.touches[1].pageX,e.originalEvent.touches[0].pageY-e.originalEvent.touches[1].pageY)):(mouseX=e.originalEvent.touches[0].clientX,mouseY=e.originalEvent.touches[0].clientY,mouseSat=getSatIdFromCoord(mouseX,mouseY),settingsManager.cameraMovementSpeed=Math.max(.005*zoomLevel,settingsManager.cameraMovementSpeedMin),screenDragPoint=[mouseX,mouseY],dragPoint=screenDragPoint,dragStartPitch=camPitch,dragStartYaw=camYaw,isDragging=!0,camSnapMode=!1,rotateTheEarth=!1)}),canvasDOM.mouseup(function(t){var a=0;if(!dragHasMoved&&(settingsManager.isMobileModeEnabled&&(mouseSat=getSatIdFromCoord(mouseX,mouseY)),clickedSat=mouseSat,0===t.button&&(cameraType.current===cameraType.SATELLITE&&(-1===clickedSat||satSet.getSatExtraOnly(clickedSat).static)||selectSat(clickedSat)),2===t.button)){$("#clear-lines-rmb").hide(),$("#view-info-rmb").hide(),$("#view-sensor-info-rmb").hide(),$("#view-sat-info-rmb").hide(),$("#view-related-sats-rmb").hide(),$("#view-curdops-rmb").hide(),$("#view-24dops-rmb").hide(),$("#edit-sat-rmb").hide(),$("#create-observer-rmb ").hide(),$("#create-sensor-rmb").hide(),$("#line-eci-axis-rmb").hide(),$("#line-sensor-sat-rmb").hide(),$("#line-earth-sat-rmb").hide(),$("#line-sat-sun-rmb").hide(),$("#earth-low-rmb").hide(),$("#earth-high-rmb").hide(),$("#earth-vec-rmb").hide();var s=!1,n=!1;rightBtnViewDOM.hide(),rightBtnEditDOM.hide(),rightBtnCreateDOM.hide(),rightBtnDrawDOM.hide(),rightBtnEarthDOM.hide(),drawLineList.length>0&&$("#clear-lines-rmb").show(),-1!==mouseSat&&(void 0!==satSet.getSat(clickedSat).type&&"Star"===satSet.getSat(clickedSat).type||(rightBtnViewDOM.show(),s=!0,a++),satSet.getSat(clickedSat).static?"Optical"!==satSet.getSat(clickedSat).type&&"Mechanical"!==satSet.getSat(clickedSat).type&&"Phased Array Radar"!==satSet.getSat(clickedSat).type||$("#view-sensor-info-rmb").show():($("#edit-sat-rmb").show(),rightBtnEditDOM.show(),!0,a++,$("#view-sat-info-rmb").show(),$("#view-related-sats-rmb").show(),satellite.sensorSelected()&&"CUSTOM"!==sensorManager.whichRadar&&$("#line-sensor-sat-rmb").show(),$("#line-earth-sat-rmb").show(),$("#line-sat-sun-rmb").show(),rightBtnDrawDOM.show(),n=!0,a++)),isNaN(e.latitude)||isNaN(e.longitude)||(s||(rightBtnViewDOM.show(),++a),$("#view-info-rmb").show(),$("#view-curdops-rmb").show(),$("#view-24dops-rmb").show(),rightBtnCreateDOM.show(),++a,$("#create-observer-rmb ").show(),$("#create-sensor-rmb").show(),n||(rightBtnDrawDOM.show(),++a),$("#line-eci-axis-rmb").show(),rightBtnEarthDOM.show(),++a,$("#earth-nasa-rmb").show(),$("#earth-blue-rmb").show(),$("#earth-low-rmb").show(),$("#earth-high-no-clouds-rmb").show(),$("#earth-vec-rmb").show(),1==settingsManager.nasaImages&&$("#earth-nasa-rmb").hide(),1==settingsManager.trusatImages&&$("#earth-trusat-rmb").hide(),1==settingsManager.blueImages&&$("#earth-blue-rmb").hide(),1==settingsManager.lowresImages&&$("#earth-low-rmb").hide(),1==settingsManager.hiresNoCloudsImages&&$("#earth-high-no-clouds-rmb").hide(),1==settingsManager.vectorImages&&$("#earth-vec-rmb").hide()),rightBtnMenuDOM.show(),satHoverBoxDOM.hide();var r=mouseX<canvasDOM.innerWidth()/2?0:-100,i=mouseY<canvasDOM.innerHeight()/2?0:-50*a;rightBtnMenuDOM.css({display:"block","text-align":"center",position:"absolute",left:mouseX+r,top:mouseY+i})}settingsManager.themes.retheme(),settingsManager.themes.redThemeSearch(),dragHasMoved=!1,isDragging=!1,rotateTheEarth=!1}),canvasDOM.on("touchend",function(e){isPinching&&(isPinching=!1),mouseY=0,mouseX=0,dragHasMoved=!1,isDragging=!1,rotateTheEarth=!1}),rightBtnMenuDOM.click(function(e){t(e)}),rightBtnViewMenuDOM.click(function(e){t(e)}),rightBtnEditMenuDOM.click(function(e){t(e)}),rightBtnCreateMenuDOM.click(function(e){t(e)}),rightBtnDrawMenuDOM.click(function(e){t(e)}),rightBtnColorsMenuDOM.click(function(e){t(e)}),rightBtnEarthMenuDOM.click(function(e){t(e)}),bodyDOM.on("keypress",U),bodyDOM.on("keydown",j),bodyDOM.on("keyup",V),canvasDOM.attr("tabIndex",0),canvasDOM.focus(),rightBtnViewDOM.hover(function(){R();var e=rightBtnViewDOM.offset().left<canvasDOM.innerWidth()/2?165:-165;rightBtnViewMenuDOM.css({display:"block","text-align":"center",position:"absolute",left:rightBtnViewDOM.offset().left+e,top:rightBtnViewDOM.offset().top}),0!==rightBtnViewDOM.offset().top?rightBtnViewMenuDOM.show():rightBtnViewMenuDOM.hide()}),rightBtnViewMenuDOM.hover(null,function(){rightBtnViewMenuDOM.hide()}),rightBtnEditDOM.hover(function(){R();var e=rightBtnEditDOM.offset().left<canvasDOM.innerWidth()/2?165:-165;rightBtnEditMenuDOM.css({display:"block","text-align":"center",position:"absolute",left:rightBtnEditDOM.offset().left+e,top:rightBtnEditDOM.offset().top}),0!==rightBtnEditMenuDOM.offset().top?rightBtnEditMenuDOM.show():rightBtnEditMenuDOM.hide()}),rightBtnEditMenuDOM.hover(null,function(){rightBtnEditMenuDOM.hide()}),rightBtnCreateDOM.hover(function(){R();var e=rightBtnCreateDOM.offset().left<canvasDOM.innerWidth()/2?165:-165;rightBtnCreateMenuDOM.css({display:"block","text-align":"center",position:"absolute",left:rightBtnCreateDOM.offset().left+e,top:rightBtnCreateDOM.offset().top}),0!==rightBtnCreateMenuDOM.offset().top?rightBtnCreateMenuDOM.show():rightBtnCreateMenuDOM.hide()}),rightBtnCreateMenuDOM.hover(null,function(){rightBtnCreateMenuDOM.hide()}),rightBtnDrawDOM.hover(function(){R();var e=rightBtnDrawDOM.offset().left<canvasDOM.innerWidth()/2?165:-165;rightBtnDrawMenuDOM.css({display:"block","text-align":"center",position:"absolute",left:rightBtnDrawDOM.offset().left+e,top:rightBtnDrawDOM.offset().top}),0!==rightBtnDrawDOM.offset().top?rightBtnDrawMenuDOM.show():rightBtnDrawMenuDOM.hide()}),rightBtnDrawMenuDOM.hover(null,function(){rightBtnDrawMenuDOM.hide()}),rightBtnColorsDOM.hover(function(){R();var e=rightBtnColorsDOM.offset().left<canvasDOM.innerWidth()/2?165:-165;rightBtnColorsMenuDOM.css({display:"block","text-align":"center",position:"absolute",left:rightBtnColorsDOM.offset().left+e,top:rightBtnColorsDOM.offset().top}),0!==rightBtnColorsDOM.offset().top?rightBtnColorsMenuDOM.show():rightBtnColorsMenuDOM.hide()}),rightBtnEarthMenuDOM.hover(null,function(){rightBtnEarthMenuDOM.hide()}),rightBtnEarthDOM.hover(function(){R();var e=rightBtnEarthDOM.offset().left<canvasDOM.innerWidth()/2?165:-165;rightBtnEarthMenuDOM.css({display:"block","text-align":"center",position:"absolute",left:rightBtnEarthDOM.offset().left+e,top:rightBtnEarthDOM.offset().top}),0!==rightBtnEarthDOM.offset().top?rightBtnEarthMenuDOM.show():rightBtnEarthMenuDOM.hide()}),rightBtnEarthMenuDOM.hover(null,function(){rightBtnEarthMenuDOM.hide()})}(),settingsManager.retro&&(timeManager.propOffset=new Date(2e3,2,13)-Date.now(),$("#datetime-input-tb").datepicker("setDate",new Date(timeManager.propRealTime+timeManager.propOffset)),satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+timeManager.propRate.toString()})),$("#datetime-text").click(function(){settingsManager.isEditTime||($("#datetime-input").fadeIn(),$("#datetime-input-tb").focus(),settingsManager.isEditTime=!0)}),$(".menu-item").mouseover(function(e){$(this).children(".submenu").css({display:"block"})}),$(".menu-item").mouseout(function(e){$(this).children(".submenu").css({display:"none"})}),$("#search-close").click(function(){searchBox.hideResults(),$("#search").val(""),!1,$("#menu-space-stations").removeClass("bmenu-item-selected")}),$("#info-overlay-content").on("click",".watchlist-object",function(e){var t=e.currentTarget.textContent.split(":");t=t[0];var a=satSet.getIdFromObjNum(t);null!==a&&selectSat(a)}),$("#bottom-icons").on("click",".bmenu-item",A),$("#bottom-menu").on("click",".FOV-object",function(e){var t=e.currentTarget.textContent;t=t.slice(-5);var a=satSet.getIdFromObjNum(t);null!==a&&selectSat(a)}),$("#legend-hover-menu").click(function(e){switch(e.target.classList[1]){case"legend-green-box":ColorScheme.objectTypeFlags.green?(ColorScheme.objectTypeFlags.green=!1,$(".legend-green-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.green=!0,$(".legend-green-box").css("background","green"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-blue-box":ColorScheme.objectTypeFlags.blue?(ColorScheme.objectTypeFlags.blue=!1,$(".legend-blue-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.blue=!0,$(".legend-blue-box").css("background","blue"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-gray-box":ColorScheme.objectTypeFlags.gray?(ColorScheme.objectTypeFlags.gray=!1,$(".legend-gray-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.gray=!0,$(".legend-gray-box").css("background","gray"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-star100-box":ColorScheme.objectTypeFlags.star100?(ColorScheme.objectTypeFlags.star100=!1,$(".legend-star100-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.star100=!0,$(".legend-star100-box").css("background","rgb(200, 200, 200)"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-star75-box":ColorScheme.objectTypeFlags.star75?(ColorScheme.objectTypeFlags.star75=!1,$(".legend-star75-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.star75=!0,$(".legend-star75-box").css("background","rgb(150, 150, 150)"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-star50-box":ColorScheme.objectTypeFlags.star50?(ColorScheme.objectTypeFlags.star50=!1,$(".legend-star50-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.star50=!0,$(".legend-star50-box").css("background","rgb(100, 100, 100)"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-sat100-box":ColorScheme.objectTypeFlags.sat100?(ColorScheme.objectTypeFlags.sat100=!1,$(".legend-sat100-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.sat100=!0,$(".legend-sat100-box").css("background","rgb(200, 200, 200)"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-sat75-box":ColorScheme.objectTypeFlags.sat75?(ColorScheme.objectTypeFlags.sat75=!1,$(".legend-sat75-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.sat75=!0,$(".legend-sat75-box").css("background","rgb(150, 150, 150)"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-sat50-box":ColorScheme.objectTypeFlags.sat50?(ColorScheme.objectTypeFlags.sat50=!1,$(".legend-sat50-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.sat50=!0,$(".legend-sat50-box").css("background","rgb(100, 100, 100)"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-orange-box":ColorScheme.objectTypeFlags.orange?(ColorScheme.objectTypeFlags.orange=!1,$(".legend-orange-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.orange=!0,$(".legend-orange-box").css("background","orange"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-yellow-box":ColorScheme.objectTypeFlags.yellow?(ColorScheme.objectTypeFlags.yellow=!1,$(".legend-yellow-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.yellow=!0,$(".legend-yellow-box").css("background","yellow"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-white-box":ColorScheme.objectTypeFlags.white?(ColorScheme.objectTypeFlags.white=!1,$(".legend-white-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.white=!0,$(".legend-white-box").css("background","white"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-red-box":ColorScheme.objectTypeFlags.red?(ColorScheme.objectTypeFlags.red=!1,$(".legend-red-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.red=!0,$(".legend-red-box").css("background","red"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-purple-box":ColorScheme.objectTypeFlags.purple?(ColorScheme.objectTypeFlags.purple=!1,$(".legend-purple-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.purple=!0,$(".legend-purple-box").css("background","purple"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0));break;case"legend-pink-box":ColorScheme.objectTypeFlags.pink?(ColorScheme.objectTypeFlags.pink=!1,$(".legend-pink-box").css("background","black"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0)):(ColorScheme.objectTypeFlags.pink=!0,$(".legend-pink-box").css("background","pink"),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme,!0))}}),$("#legend-menu").click(function(){"block"===$("#legend-hover-menu").css("display")?$("#legend-hover-menu").hide():($("#legend-hover-menu").show(),$("#search").val(""),searchBox.hideResults(),$("#search-results").hide())}),$(".menu-selectable").click(function(){-1!==selectedSat&&($("#menu-lookangles").removeClass("bmenu-item-disabled"),$("#menu-satview").removeClass("bmenu-item-disabled")),f.length>0&&$("#menu-info-overlay").removeClass("bmenu-item-disabled")}),$("#sensor-list-content > div > ul > .menu-selectable").click(function(){adviceList.sensor()}),$("#radar-cspocAll").click(function(){adviceList.cspocSensors(),sensorManager.setSensor("SSN")}),$("#radar-mwAll").click(function(){adviceList.mwSensors(),sensorManager.setSensor("NATO-MW")}),$("#radar-beale").click(function(){sensorManager.setSensor(sensorManager.sensorList.BLE)}),$("#radar-capecod").click(function(){sensorManager.setSensor(sensorManager.sensorList.COD)}),$("#radar-clear").click(function(){sensorManager.setSensor(sensorManager.sensorList.CLR)}),$("#radar-eglin").click(function(){sensorManager.setSensor(sensorManager.sensorList.EGL)}),$(".radar-fylingdales").click(function(){sensorManager.setSensor(sensorManager.sensorList.FYL)}),$("#radar-parcs").click(function(){sensorManager.setSensor(sensorManager.sensorList.CAV)}),$("#radar-thule").click(function(){sensorManager.setSensor(sensorManager.sensorList.THL)}),$("#radar-cobradane").click(function(){sensorManager.setSensor(sensorManager.sensorList.CDN)}),$("#radar-altair").click(function(){sensorManager.setSensor(sensorManager.sensorList.ALT)}),$("#radar-millstone").click(function(){sensorManager.setSensor(sensorManager.sensorList.MIL)}),$("#radar-ascension").click(function(){sensorManager.setSensor(sensorManager.sensorList.ASC)}),$("#radar-globus").click(function(){sensorManager.setSensor(sensorManager.sensorList.GLB)}),$("#optical-diego-garcia").click(function(){sensorManager.setSensor(sensorManager.sensorList.DGC)}),$("#optical-maui").click(function(){sensorManager.setSensor(sensorManager.sensorList.MAU)}),$("#optical-socorro").click(function(){sensorManager.setSensor(sensorManager.sensorList.SOC)}),$("#radar-md-all").click(function(){sensorManager.setSensor("MD-ALL")}),$("#radar-md-har").click(function(){sensorManager.setSensor(sensorManager.sensorList.HAR)}),$("#radar-md-qtr").click(function(){sensorManager.setSensor(sensorManager.sensorList.QTR)}),$("#radar-md-kur").click(function(){sensorManager.setSensor(sensorManager.sensorList.KUR)}),$("#radar-md-sha").click(function(){sensorManager.setSensor(sensorManager.sensorList.SHA)}),$("#radar-md-kcs").click(function(){sensorManager.setSensor(sensorManager.sensorList.KCS)}),$("#radar-md-sbx").click(function(){sensorManager.setSensor(sensorManager.sensorList.SBX)}),$("#radar-ll-all").click(function(){sensorManager.setSensor("LEO-LABS")}),$("#radar-ll-msr").click(function(){sensorManager.setSensor(sensorManager.sensorList.MSR)}),$("#radar-ll-pfisr").click(function(){sensorManager.setSensor(sensorManager.sensorList.PFISR)}),$("#radar-ll-ksr").click(function(){sensorManager.setSensor(sensorManager.sensorList.KSR)}),$("#esoc-graves").click(function(){sensorManager.setSensor(sensorManager.sensorList.GRV)}),$("#esoc-tira").click(function(){sensorManager.setSensor(sensorManager.sensorList.TIR)}),$("#esoc-northern-cross").click(function(){sensorManager.setSensor(sensorManager.sensorList.NRC)}),$("#esoc-troodos").click(function(){sensorManager.setSensor(sensorManager.sensorList.TRO)}),$("#esoc-space-debris-telescope").click(function(){sensorManager.setSensor(sensorManager.sensorList.SDT)}),$("#radar-rus-all").click(function(){sensorManager.setSensor("RUS-ALL")}),$("#russian-armavir").click(function(){sensorManager.setSensor(sensorManager.sensorList.ARM)}),$("#russian-balkhash").click(function(){sensorManager.setSensor(sensorManager.sensorList.BAL)}),$("#russian-gantsevichi").click(function(){sensorManager.setSensor(sensorManager.sensorList.GAN)}),$("#russian-lekhtusi").click(function(){sensorManager.setSensor(sensorManager.sensorList.LEK)}),$("#russian-mishelevka-d").click(function(){sensorManager.setSensor(sensorManager.sensorList.MIS)}),$("#russian-olenegorsk").click(function(){sensorManager.setSensor(sensorManager.sensorList.OLE)}),$("#russian-pechora").click(function(){sensorManager.setSensor(sensorManager.sensorList.PEC)}),$("#russian-pionersky").click(function(){sensorManager.setSensor(sensorManager.sensorList.PIO)}),$("#chinese-xuanhua").click(function(){sensorManager.setSensor(sensorManager.sensorList.XUA)}),$("#reset-sensor-button").click(function(){settingsManager.isForceColorScheme=!1,$("#menu-sensor-info").addClass("bmenu-item-disabled"),$("#menu-fov-bubble").addClass("bmenu-item-disabled"),$("#menu-surveillance").addClass("bmenu-item-disabled"),$("#menu-planetarium").addClass("bmenu-item-disabled"),$("#menu-astronomy").addClass("bmenu-item-disabled"),_resetSensorSelected()}),$("#datetime-input-form").change(function(e){var s=$("#datetime-input-tb").datepicker("getDate"),n=new Date,r="JDAY: "+timeManager.getDayOfYear(timeManager.propTime());$("#jday").html(r),timeManager.propOffset=s-n,satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+1..toString()}),timeManager.propRealTime=Date.now(),timeManager.propTime(),a=1*timeManager.now-7e3,t=timeManager.now,L(!0),e.preventDefault()}),$("#findByLooks").submit(function(e){var t=$("#fbl-azimuth").val(),a=$("#fbl-elevation").val(),s=$("#fbl-range").val(),n=$("#fbl-inc").val(),r=$("#fbl-period").val(),i=$("#fbl-azimuth-margin").val(),o=$("#fbl-elevation-margin").val(),l=$("#fbl-range-margin").val(),c=$("#fbl-inc-margin").val(),g=$("#fbl-period-margin").val(),m=$("#fbl-type").val();$("#search").val("");var d=satSet.searchAzElRange(t,a,s,n,i,o,l,c,r,g,m);void 0===d?$("#fbl-error").html("No Search Criteria"):0===d.length&&$("#fbl-error").html("No Satellites Found"),e.preventDefault()}),$("#settings-form").change(function(e){var t=document.getElementById("settings-demo-mode").checked;document.getElementById("settings-sat-label-mode").checked&&"settings-demo-mode"===e.target.id&&(document.getElementById("settings-sat-label-mode").checked=!1,$("#settings-demo-mode").removeClass("lever:after")),t&&"settings-sat-label-mode"===e.target.id&&(document.getElementById("settings-demo-mode").checked=!1,$("#settings-sat-label-mode").removeClass("lever:after"))}),$("#settings-form").submit(function(e){var t=document.getElementById("settings-hos").checked,a=document.getElementById("settings-demo-mode").checked,s=document.getElementById("settings-sat-label-mode").checked,n=document.getElementById("settings-snp").checked,r=document.getElementById("settings-riseset").checked;settingsManager.isSatLabelModeOn=!!s,settingsManager.isDemoModeOn=!!a,t?(settingsManager.colors.transparent=[1,1,1,0],ga("send","event","Settings Menu","Hide Other Satellites","Option Selected")):settingsManager.colors.transparent=[1,1,1,.1],ColorScheme.reloadColors(),n?(isShowNextPass=!0,ga("send","event","Settings Menu","Show Next Pass on Hover","Option Selected")):isShowNextPass=!1,r?(satellite.isRiseSetLookangles=!0,ga("send","event","Settings Menu","Show Only Rise/Set Times","Option Selected")):satellite.isRiseSetLookangles=!1,satellite.lookanglesLength=1*$("#lookanglesLength").val(),satellite.lookanglesInterval=1*$("#lookanglesInterval").val(),settingsManager.isForceColorScheme=!0,satSet.setColorScheme(settingsManager.currentColorScheme),e.preventDefault()}),$("#editSat-newTLE").click(function(e){$("#loading-screen").fadeIn("slow",function(){var e,t,a,s=satSet.getIdFromObjNum($("#es-scc").val()),n=satSet.getSat(s),r=satellite.getTEARR(n);t=satellite.degreesLong(r.lon),e=satellite.degreesLat(r.lat),a=r.alt;var i,o=satellite.getDirection(n),l=satellite.currentEpoch(timeManager.propTime());n.TLE1=n.TLE1.substr(0,18)+l[0]+l[1]+n.TLE1.substr(32),camSnapMode=!1;var c=(i=n.apogee-n.perigee<300?satellite.getOrbitByLatLon(n,e,t,o,timeManager.propOffset):satellite.getOrbitByLatLon(n,e,t,o,timeManager.propOffset,a))[0],g=i[1];satCruncher.postMessage({typ:"satEdit",id:s,TLE1:c,TLE2:g}),orbitDisplay.updateOrbitBuffer(s,!0,c,g),sat=satSet.getSatExtraOnly(selectedSat),$("#es-scc").val(sat.SCC_NUM);var m=(sat.inclination*RAD2DEG).toPrecision(7);(m=m.split("."))[0]=m[0].substr(-3,3),m[1]=m[1].substr(0,4),m=(m[0]+"."+m[1]).toString(),$("#es-inc").val(D(m,8)),$("#es-year").val(sat.TLE1.substr(18,2)),$("#es-day").val(sat.TLE1.substr(20,12)),$("#es-meanmo").val(sat.TLE2.substr(52,11));var d=(sat.raan*RAD2DEG).toPrecision(7);(d=d.split("."))[0]=d[0].substr(-3,3),d[1]=d[1].substr(0,4),d=(d[0]+"."+d[1]).toString(),$("#es-rasc").val(D(d,8)),$("#es-ecen").val(sat.eccentricity.toPrecision(7).substr(2,7));var u=(sat.argPe*RAD2DEG).toPrecision(7);(u=u.split("."))[0]=u[0].substr(-3,3),u[1]=u[1].substr(0,4),u=(u[0]+"."+u[1]).toString(),$("#es-argPe").val(D(u,8)),$("#es-meana").val(sat.TLE2.substr(43,8)),$("#loading-screen").fadeOut()})}),$("#editSat").submit(function(e){$("#es-error").hide();var t=$("#es-scc").val(),a=satSet.getIdFromObjNum(t);if(null===a)return console.log("Not a Real Satellite"),void e.preventDefault();var s=satSet.getSatExtraOnly(a),n=s.TLE1.substr(9,8),r=$("#es-inc").val();(r=(r=parseFloat(r).toPrecision(7)).split("."))[0]=r[0].substr(-3,3),r[1]?r[1]=r[1].substr(0,4):r[1]="0000",r=D(r=(r[0]+"."+r[1]).toString(),8);var i=$("#es-meanmo").val();(i=(i=parseFloat(i).toPrecision(10)).split("."))[0]=i[0].substr(-2,2),i[1]?i[1]=i[1].substr(0,8):i[1]="00000000",i=D(i=(i[0]+"."+i[1]).toString(),8);var o=$("#es-rasc").val();(o=(o=parseFloat(o).toPrecision(7)).split("."))[0]=o[0].substr(-3,3),o[1]?o[1]=o[1].substr(0,4):o[1]="0000",o=D(o=(o[0]+"."+o[1]).toString(),8);var l=$("#es-ecen").val(),c=$("#es-argPe").val();(c=(c=parseFloat(c).toPrecision(7)).split("."))[0]=c[0].substr(-3,3),c[1]?c[1]=c[1].substr(0,4):c[1]="0000",c=D(c=(c[0]+"."+c[1]).toString(),8);var g=$("#es-meana").val();(g=(g=parseFloat(g).toPrecision(7)).split("."))[0]=g[0].substr(-3,3),g[1]?g[1]=g[1].substr(0,4):g[1]="0000",g=D(g=(g[0]+"."+g[1]).toString(),8);var m="1 "+t+"U "+n+" "+$("#es-year").val()+$("#es-day").val()+s.TLE1.substr(32,39),d="2 "+t+" "+r+" "+o+" "+l+" "+c+" "+g+" "+i+"    10";satellite.altitudeCheck(m,d,timeManager.propOffset)>1?(satCruncher.postMessage({typ:"satEdit",id:a,active:!0,TLE1:m,TLE2:d}),orbitDisplay.updateOrbitBuffer(a,!0,m,d),s.active=!0):($("#es-error").html("Failed Altitude Check</br>Try Different Parameters"),$("#es-error").show()),e.preventDefault()}),$("#editSat-save").click(function(e){var t=$("#es-scc").val(),a=satSet.getIdFromObjNum(t),s=satSet.getSatExtraOnly(a),n={TLE1:s.TLE1,TLE2:s.TLE2},r=JSON.stringify(n),i=new Blob([r],{type:"text/plain;charset=utf-8"});saveAs(i,t+".tle"),e.preventDefault()}),$("#editSat-open").click(function(e){$("#editSat-file").trigger("click")}),$("#editSat-file").change(function(e){if(window.FileReader){var t=new FileReader;t.onload=function(e){if(2===e.target.readyState)if(e.target.error)console.log("error");else{var t=JSON.parse(e.target.result),a=parseInt(D(t.TLE1.substr(2,5).trim(),5)),s=satSet.getIdFromObjNum(a),n=satSet.getSatExtraOnly(s);satellite.altitudeCheck(t.TLE1,t.TLE2,timeManager.propOffset)>1?(satCruncher.postMessage({typ:"satEdit",id:n.id,active:!0,TLE1:t.TLE1,TLE2:t.TLE2}),orbitDisplay.updateOrbitBuffer(n.id,!0,t.TLE1,t.TLE2),n.active=!0):($("#es-error").html("Failed Altitude Check</br>Try Different Parameters"),$("#es-error").show())}},t.readAsText(e.target.files[0]),e.preventDefault()}}),$("#es-error").click(function(){$("#es-error").hide()}),$("#map-menu").on("click",".map-look",function(e){settingsManager.isMapUpdateOverride=!0;var t=e.currentTarget.attributes.time.value;if(null!==t){t=t.split(" "),t=new Date(t[0]+"T"+t[1]+"Z");var a=new Date;timeManager.propOffset=t-a,satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+1..toString()})}}),$("#socrates-menu").on("click",".socrates-object",function(e){var t=e.currentTarget.attributes.hiddenrow.value;null!==t&&I(t)}),$("#watchlist-list").on("click",".watchlist-remove",function(e){for(var t=$(this).data("sat-id"),a=0;a<f.length;a++)f[a]===t&&(f.splice(a,1),v.splice(a,1));O.updateWatchlist(),f.length<=0&&(searchBox.doSearch(""),satSet.setColorScheme(ColorScheme.default,!0),settingsManager.themes.blueTheme()),(!satellite.sensorSelected()||f.length<=0)&&$("#menu-info-overlay").addClass("bmenu-item-disabled")}),$("#watchlist-content").on("click",".watchlist-add",function(e){for(var t=satSet.getIdFromObjNum(D($("#watchlist-new").val(),5)),a=!1,s=0;s<f.length;s++)f[s]===t&&(a=!0);a||(f.push(t),v.push(!1),O.updateWatchlist()),satellite.sensorSelected()&&$("#menu-info-overlay").removeClass("bmenu-item-disabled"),$("#watchlist-new").val("")}),$("#watchlist-content").submit(function(e){for(var t=satSet.getIdFromObjNum(D($("#watchlist-new").val(),5)),a=!1,s=0;s<f.length;s++)f[s]===t&&(a=!0);a||(f.push(t),v.push(!1),O.updateWatchlist()),satellite.sensorSelected()&&$("#menu-info-overlay").removeClass("bmenu-item-disabled"),$("#watchlist-new").val(""),e.preventDefault()}),$("#watchlist-save").click(function(e){for(var t=[],a=0;a<f.length;a++){var s=satSet.getSatExtraOnly(f[a]);t[a]=s.SCC_NUM}var n=JSON.stringify(t),r=new Blob([n],{type:"text/plain;charset=utf-8"});saveAs(r,"watchlist.json"),e.preventDefault()}),$("#watchlist-open").click(function(e){$("#watchlist-file").trigger("click")}),$("#watchlist-file").change(function(e){if(window.FileReader){var t=new FileReader;t.onload=function(e){if(2===e.target.readyState)if(e.target.error)console.log("error");else{var t=JSON.parse(e.target.result);v=[];for(var a=0;a<t.length;a++){var s=satSet.getSatExtraOnly(satSet.getIdFromObjNum(t[a]));if(null===s)return void console.error("Watchlist File Format Incorret");t[a]=s.id,v.push(!1)}f=t,O.updateWatchlist(),satellite.sensorSelected()&&$("#menu-info-overlay").removeClass("bmenu-item-disabled")}},t.readAsText(e.target.files[0]),e.preventDefault()}}),$("#newLaunch").submit(function(e){$("#loading-screen").fadeIn("slow",function(){$("#nl-error").hide();var e,t,a=$("#nl-scc").val(),s=satSet.getIdFromObjNum(a),n=satSet.getSat(s),r=$("#nl-updown").val(),i=$("#nl-facility").val();for(var o in ga("send","event","New Launch",i,"Launch Site"),window.launchSiteManager.launchSiteList)window.launchSiteManager.launchSiteList[o].name===i&&(e=window.launchSiteManager.launchSiteList[o].lat,t=window.launchSiteManager.launchSiteList[o].lon);t>180&&(t-=360);var l=new Date,c=new Date(l.getFullYear(),l.getUTCMonth(),l.getUTCDate(),0,0,0);c.setUTCHours(0),timeManager.propOffset=c-l,camSnapMode=!1,satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+1..toString()});var g=satellite.getOrbitByLatLon(n,e,t,r,timeManager.propOffset),m=g[0],d=g[1];satellite.altitudeCheck(m,d,timeManager.propOffset)>1?(satCruncher.postMessage({typ:"satEdit",id:s,active:!0,TLE1:m,TLE2:d}),orbitDisplay.updateOrbitBuffer(s,!0,m,d),n=satSet.getSat(s)):($("#nl-error").html("Failed Altitude Check</br>Try Editing Manually"),$("#nl-error").show()),$("#loading-screen").fadeOut()}),e.preventDefault()}),$("#nl-error").click(function(){$("#nl-error").hide()}),$("#breakup").submit(function(e){$("#loading-screen").fadeIn("slow",function(){var e,t,a,s=satSet.getIdFromObjNum($("#hc-scc").val()),n=satSet.getSat(s),r=n,i=satellite.getTEARR(n);t=satellite.degreesLong(i.lon),e=satellite.degreesLat(i.lat),a=i.alt;var o,l=satellite.getDirection(n),c=satellite.currentEpoch(timeManager.propTime());n.TLE1=n.TLE1.substr(0,18)+c[0]+c[1]+n.TLE1.substr(32),camSnapMode=!1;var g=(o=n.apogee-n.perigee<300?satellite.getOrbitByLatLon(n,e,t,l,timeManager.propOffset):satellite.getOrbitByLatLon(n,e,t,l,timeManager.propOffset,a))[0],m=o[1];satCruncher.postMessage({typ:"satEdit",id:s,TLE1:g,TLE2:m}),orbitDisplay.updateOrbitBuffer(s,!0,g,m);for(var d,u,h="",M=$("#hc-per").val(),p=$("#hc-inc").val(),S=$("#hc-raan").val(),b=0;b<100;b++)for(var f=0;f<=4;f++)for(var v=0;v<=4;v++)for(var C=0;C<=4;C++)if(!(b>=100)){s=satSet.getIdFromObjNum(8e4+b);var k=satSet.getSat(s);k=r;var w,y=g.substr(7),O=-S/2+S*(C/4);y=(w=k.apogee-k.perigee<300?satellite.getOrbitByLatLon(k,e,t,l,timeManager.propOffset,0,O):satellite.getOrbitByLatLon(k,e,t,l,timeManager.propOffset,a,O))[0],F=w[1];var T=m.substr(8,8);(T=(T=parseFloat(T-p/2+p*(f/4)).toPrecision(7)).split("."))[0]=T[0].substr(-3,3),T[1]?T[1]=T[1].substr(0,4):T[1]="0000",T=(T[0]+"."+T[1]).toString(),d=8,u=void 0,T=(u="   "+T).substr(u.length-d);var D=F.substr(52,10);(D=(D=parseFloat(D-D*M/2+D*M*(v/4)).toPrecision(10)).split("."))[0]=D[0].substr(-2,2),D[1]?D[1]=D[1].substr(0,8):D[1]="00000000",D=(D[0]+"."+D[1]).toString();var F="2 "+(8e4+b)+" "+T+" "+F.substr(17,35)+D+F.substr(63);(k=satSet.getSat(s)).TLE1=y,k.TLE2=F,k.active=!0,satellite.altitudeCheck(y,F,timeManager.propOffset)>1?(satCruncher.postMessage({typ:"satEdit",id:s,TLE1:y,TLE2:F}),orbitDisplay.updateOrbitBuffer(s,!0,y,F)):console.error("Breakup Generator Failed"),b++}h+=n.SCC_NUM+",Analyst Sat",$("#search").val(h),searchBox.doSearch($("#search").val()),$("#loading-screen").fadeOut()}),e.preventDefault()}),$("#missile").submit(function(e){$("#ms-error").hide();var t=1*$("#ms-type").val(),a=1*$("#ms-attacker").val(),s=1*$("#ms-target").val(),n=1*$("#ms-lat").val(),r=1*$("#ms-lon").val(),i=$("#datetime-text").text().substr(0,19);if(i=i.split(" "),i=new Date(i[0]+"T"+i[1]+"Z").getTime(),t>0)1===t&&missileManager.MassRaidPre(i,"simulation/Russia2USA.json"),2===t&&missileManager.MassRaidPre(i,"simulation/Russia2USAalt.json"),3===t&&missileManager.MassRaidPre(i,"simulation/China2USA.json"),4===t&&missileManager.MassRaidPre(i,"simulation/NorthKorea2USA.json"),5===t&&missileManager.MassRaidPre(i,"simulation/USA2Russia.json"),6===t&&missileManager.MassRaidPre(i,"simulation/USA2China.json"),7===t&&missileManager.MassRaidPre(i,"simulation/USA2NorthKorea.json"),ga("send","event","Missile Sim",t,"Sim Number"),$("#ms-error").html("Large Scale Attack Loaded"),$("#ms-error").show();else{if(-1===s){if(isNaN(n))return $("#ms-error").html("Please enter a number<br>for Target Latitude"),$("#ms-error").show(),void e.preventDefault();if(isNaN(r))return $("#ms-error").html("Please enter a number<br>for Target Longitude"),$("#ms-error").show(),void e.preventDefault()}else n=missileManager.globalBMTargets[3*s],r=missileManager.globalBMTargets[3*s+1];var o,l,c;a<200?(o=a-100,l=500-missileManager.missilesInUse,c=missileManager.UsaICBM[4*o+2],missileManager.Missile(missileManager.UsaICBM[4*o],missileManager.UsaICBM[4*o+1],n,r,3,satSet.missileSats-l,i,missileManager.UsaICBM[4*o+2],30,2.9,.07,missileManager.UsaICBM[4*o+3],"United States")):a<300?(o=a-200,l=500-missileManager.missilesInUse,c=missileManager.RussianICBM[4*o+2],missileManager.Missile(missileManager.RussianICBM[4*o],missileManager.RussianICBM[4*o+1],n,r,3,satSet.missileSats-l,i,missileManager.RussianICBM[4*o+2],30,2.9,.07,missileManager.RussianICBM[4*o+3],"Russia")):a<400?(o=a-300,l=500-missileManager.missilesInUse,c=missileManager.ChinaICBM[4*o+2],missileManager.Missile(missileManager.ChinaICBM[4*o],missileManager.ChinaICBM[4*o+1],n,r,3,satSet.missileSats-l,i,missileManager.ChinaICBM[4*o+2],30,2.9,.07,missileManager.ChinaICBM[4*o+3],"China")):a<500&&(o=a-400,l=500-missileManager.missilesInUse,c=missileManager.NorthKoreanBM[4*o+2],missileManager.Missile(missileManager.NorthKoreanBM[4*o],missileManager.NorthKoreanBM[4*o+1],n,r,3,satSet.missileSats-l,i,missileManager.NorthKoreanBM[4*o+2],30,2.9,.07,missileManager.NorthKoreanBM[4*o+3],"North Korea")),ga("send","event","New Missile",c,"Attacker"),ga("send","event","New Missile",n+", "+r,"Target"),$("#ms-error").html(missileManager.lastMissileError),$("#ms-error").show()}e.preventDefault()}),$("#ms-error").click(function(){$("#ms-error").hide()}),$("#fbl-error").click(function(){$("#fbl-error").hide()}),$("#missile").change(function(e){1*$("#ms-type").val()!=0?$("#ms-custom-opt").hide():$("#ms-custom-opt").show()}),$("#cs-telescope").click(function(e){$("#cs-telescope").is(":checked")?($("#cs-minaz").attr("disabled",!0),$("#cs-maxaz").attr("disabled",!0),$("#cs-minel").attr("disabled",!0),$("#cs-maxel").attr("disabled",!0),$("#cs-minrange").attr("disabled",!0),$("#cs-maxrange").attr("disabled",!0),$("#cs-minaz-div").hide(),$("#cs-maxaz-div").hide(),$("#cs-minel-div").hide(),$("#cs-maxel-div").hide(),$("#cs-minrange-div").hide(),$("#cs-maxrange-div").hide(),$("#cs-minaz").val(0),$("#cs-maxaz").val(360),$("#cs-minel").val(10),$("#cs-maxel").val(90),$("#cs-minrange").val(100),$("#cs-maxrange").val(1e6)):($("#cs-minaz").attr("disabled",!1),$("#cs-maxaz").attr("disabled",!1),$("#cs-minel").attr("disabled",!1),$("#cs-maxel").attr("disabled",!1),$("#cs-minrange").attr("disabled",!1),$("#cs-maxrange").attr("disabled",!1),$("#cs-minaz-div").show(),$("#cs-maxaz-div").show(),$("#cs-minel-div").show(),$("#cs-maxel-div").show(),$("#cs-minrange-div").show(),$("#cs-maxrange-div").show(),satellite.sensorSelected()&&($("#cs-minaz").val(sensorManager.selectedSensor.obsminaz),$("#cs-maxaz").val(sensorManager.selectedSensor.obsmaxaz),$("#cs-minel").val(sensorManager.selectedSensor.obsminel),$("#cs-maxel").val(sensorManager.selectedSensor.obsmaxel),$("#cs-minrange").val(sensorManager.selectedSensor.obsminrange),$("#cs-maxrange").val(sensorManager.selectedSensor.obsmaxrange)))}),$("#customSensor").submit(function(e){$("#menu-sensor-info").removeClass("bmenu-item-disabled"),$("#menu-fov-bubble").removeClass("bmenu-item-disabled"),$("#menu-surveillance").removeClass("bmenu-item-disabled"),$("#menu-planetarium").removeClass("bmenu-item-disabled"),$("#menu-astronomy").removeClass("bmenu-item-disabled"),sensorManager.whichRadar="CUSTOM",$("#sensor-type").html($("#cs-type").val()),$("#sensor-info-title").html("Custom Sensor"),$("#sensor-country").html("Custom Sensor");var t=$("#cs-lon").val(),a=$("#cs-lat").val(),s=$("#cs-hei").val(),n=$("#cs-type").val(),r=$("#cs-minaz").val(),i=$("#cs-maxaz").val(),o=$("#cs-minel").val(),l=$("#cs-maxel").val(),c=$("#cs-minrange").val(),g=$("#cs-maxrange").val();satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+timeManager.propRate.toString(),setlatlong:!0,sensor:{lat:1*a,long:1*t,obshei:1*s,obsminaz:1*r,obsmaxaz:1*i,obsminel:1*o,obsmaxel:1*l,obsminrange:1*c,obsmaxrange:1*g,type:n}}),satellite.setobs({lat:1*a,long:1*t,obshei:1*s,obsminaz:1*r,obsmaxaz:1*i,obsminel:1*o,obsmaxel:1*l,obsminrange:1*c,obsmaxrange:1*g,type:n}),a*=1,t*=1,g>6e3?changeZoom("geo"):changeZoom("leo"),camSnap(latToPitch(a),longToYaw(t)),e.preventDefault()}),$("#dops-form").submit(function(e){O.hideSideMenus(),isDOPMenuOpen=!0,$("#loading-screen").fadeIn("slow",function(){var e=1*$("#dops-lat").val(),t=1*$("#dops-lon").val(),a=1*$("#dops-alt").val(),s=1*$("#dops-el").val();settingsManager.gpsElevationMask=s,satellite.getDOPsTable(e,t,a),$("#menu-dops").addClass("bmenu-item-selected"),$("#loading-screen").fadeOut(),$("#dops-menu").effect("slide",{direction:"left",mode:"show"},1e3)}),e.preventDefault()});var P=[],B=[];function I(e){-1===e&&0===P.length&&0===B.length&&$.get("/SOCRATES.htm",function(e){var t=$("[name='CATNR1']",e).closest("tr"),a=$("[name='CATNR2']",e).closest("tr");t.each(function(e,t){var a=[];$(this).find("td").each(function(e,t){a.push(t.textContent)}),P.push(a)}),a.each(function(e,t){var a=[];$(this).find("td").each(function(e,t){a.push(t.textContent)}),B.push(a)});var s=document.getElementById("socrates-table");s.innerHTML="";var n=s.insertRow(),r=n.insertCell();r.appendChild(document.createTextNode("Time")),r.setAttribute("style","text-decoration: underline");var i=n.insertCell();i.appendChild(document.createTextNode("#1")),i.setAttribute("style","text-decoration: underline");var o=n.insertCell();o.appendChild(document.createTextNode("#2")),o.setAttribute("style","text-decoration: underline");for(var l=0;l<20;l++){(n=s.insertRow()).setAttribute("class","socrates-object link"),n.setAttribute("hiddenrow",l),r=n.insertCell();var c=B[l][4].split(" "),g=c[3].split(":"),m=g[2].split(".");r.appendChild(document.createTextNode(c[2]+" "+c[1]+" "+c[0]+" - "+D(g[0],2)+":"+D(g[1],2)+":"+D(m[0],2)+"Z")),(i=n.insertCell()).appendChild(document.createTextNode(P[l][1])),(o=n.insertCell()).appendChild(document.createTextNode(B[l][0]))}}),-1!==e&&(!function(t){var a=t[e][4].split(" "),s=a[3].split(":"),n=parseInt(a[0]),r=function(e){switch(e){case"Jan":return 0;case"Feb":return 1;case"Mar":return 2;case"Apr":return 3;case"May":return 4;case"Jun":return 5;case"Jul":return 6;case"Aug":return 7;case"Sep":return 8;case"Oct":return 9;case"Nov":return 10;case"Dec":return 11}}(a[1]),i=parseInt(a[2]),o=parseInt(s[0]),l=parseInt(s[1]),c=parseInt(s[2]);var g=new Date(n,r,i,o,l,c);g.setUTCDate(i),g.setUTCHours(o);var m=new Date;timeManager.propOffset=g-m,camSnapMode=!1,satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+1..toString()}),timeManager.propRealTime=Date.now(),timeManager.propTime()}(B),$("#search").val(P[e][1]+","+B[e][0]),searchBox.doSearch(P[e][1]+","+B[e][0]),settingsManager.socratesOnSatCruncher=satSet.getIdFromObjNum(P[e][1]))}function A(t){var M;if(!1!==settingsManager.isBottomIconsEnabled)switch(ga("send","event","Bottom Icon",t.currentTarget.id,"Selected"),t.currentTarget.id){case"menu-sensor-list":if(s){O.hideSideMenus(),s=!1;break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#sensor-list-menu").effect("slide",{direction:"left",mode:"show"},1e3),s=!0,$("#menu-sensor-list").addClass("bmenu-item-selected");break;case"menu-info-overlay":if(!satellite.sensorSelected()){$("#menu-info-overlay:animated").length||$("#menu-info-overlay").effect("shake",{distance:10});break}if(n){n=!1,O.hideSideMenus();break}O.hideSideMenus(),0===C.length||e>timeManager.now||new Date(1*e+864e5)<timeManager.now||k?$("#loading-screen").fadeIn("slow",function(){C=[];for(var t=0;t<f.length;t++)C.push(satSet.getSatExtraOnly(f[t]));(C=satellite.nextpassList(C)).sort(function(e,t){return new Date(e.time)-new Date(t.time)}),e=timeManager.now,a=0,L(!0),$("#loading-screen").fadeOut(),k=!1}):L(!0),$("#info-overlay-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#menu-info-overlay").addClass("bmenu-item-selected"),n=!0;break;case"menu-sensor-info":if(!satellite.sensorSelected()){adviceList.sensorInfoDisabled(),$("#menu-sensor-info:animated").length||$("#menu-sensor-info").effect("shake",{distance:10});break}if(o){O.hideSideMenus(),o=!1;break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),satellite.getsensorinfo(),$("#sensor-info-menu").effect("slide",{direction:"left",mode:"show"},1e3),o=!0,$("#menu-sensor-info").addClass("bmenu-item-selected");break;case"menu-lookangles":if(isLookanglesMenuOpen){isLookanglesMenuOpen=!1,O.hideSideMenus();break}if(M=satSet.getSatExtraOnly(selectedSat),!satellite.sensorSelected()||M.static||M.missile||-1===selectedSat){adviceList.lookanglesDisabled(),$("#menu-lookangles:animated").length||$("#menu-lookangles").effect("shake",{distance:10});break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),isLookanglesMenuOpen=!0,$("#loading-screen").fadeIn("slow",function(){satellite.getlookangles(M,isLookanglesMenuOpen),$("#menu-lookangles").addClass("bmenu-item-selected"),$("#loading-screen").fadeOut(),$("#lookangles-menu").effect("slide",{direction:"left",mode:"show"},1e3)});break;case"menu-dops":if(isDOPMenuOpen){isDOPMenuOpen=!1,O.hideSideMenus();break}O.hideSideMenus(),isDOPMenuOpen=!0,$("#loading-screen").fadeIn("slow",function(){var e=1*$("#dops-lat").val(),t=1*$("#dops-lon").val(),a=1*$("#dops-alt").val(),s=1*$("#dops-el").val();settingsManager.gpsElevationMask=s,satellite.getDOPsTable(e,t,a),$("#menu-dops").addClass("bmenu-item-selected"),$("#loading-screen").fadeOut(),$("#dops-menu").effect("slide",{direction:"left",mode:"show"},1e3)});break;case"menu-watchlist":if(l){l=!1,$("#menu-watchlist").removeClass("bmenu-item-selected"),$("#search-holder").show(),O.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#watchlist-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#search-holder").hide(),O.updateWatchlist(),l=!0,$("#menu-watchlist").addClass("bmenu-item-selected");break;case"menu-analysis":if(p){p=!1,$("#menu-analysis").removeClass("bmenu-item-selected"),O.hideSideMenus();break}O.hideSideMenus(),$("#analysis-menu").effect("slide",{direction:"left",mode:"show"},1e3),O.updateWatchlist(),p=!0,$("#menu-analysis").addClass("bmenu-item-selected");break;case"menu-satcom":if(h){h=!1,$("#menu-satcom").removeClass("bmenu-item-selected"),O.hideSideMenus();break}O.hideSideMenus(),$("#satcom-menu").effect("slide",{direction:"left",mode:"show"},1e3),O.updateWatchlist(),h=!0,$("#menu-satcom").addClass("bmenu-item-selected");break;case"menu-lookanglesmultisite":if(isLookanglesMultiSiteMenuOpen){isLookanglesMultiSiteMenuOpen=!1,O.hideSideMenus();break}if(-1===selectedSat){adviceList.ssnLookanglesDisabled(),$("#menu-lookanglesmultisite:animated").length||$("#menu-lookanglesmultisite").effect("shake",{distance:10});break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),isLookanglesMultiSiteMenuOpen=!0,$("#menu-lookanglesmultisite").addClass("bmenu-item-selected"),-1!==selectedSat&&$("#loading-screen").fadeIn("slow",function(){M=satSet.getSatExtraOnly(selectedSat),satellite.getlookanglesMultiSite(M,isLookanglesMultiSiteMenuOpen),$("#loading-screen").fadeOut(),$("#lookanglesmultisite-menu").effect("slide",{direction:"left",mode:"show"},1e3)});break;case"menu-find-sat":if(i){i=!1,O.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#findByLooks-menu").effect("slide",{direction:"left",mode:"show"},1e3),i=!0,$("#menu-find-sat").addClass("bmenu-item-selected");break;case"menu-twitter":if(r){r=!1,O.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#twitter-menu").is(":empty")&&$("#twitter-menu").html('<a class="twitter-timeline" data-theme="dark" data-link-color="#2B7BB9" href="https://twitter.com/RedKosmonaut/lists/space-news">A Twitter List by RedKosmonaut</a> <script async src="//platform.twitter.com/widgets.js" charset="utf-8"><\/script>'),$("#twitter-menu").effect("slide",{direction:"left",mode:"show"},1e3),r=!0,$("#menu-twitter").addClass("bmenu-item-selected");break;case"menu-map":if(settingsManager.isMapMenuOpen){settingsManager.isMapMenuOpen=!1,O.hideSideMenus();break}if(!settingsManager.isMapMenuOpen){if(-1===selectedSat){adviceList.mapDisabled(),$("#menu-map:animated").length||$("#menu-map").effect("shake",{distance:10});break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#map-menu").effect("slide",{direction:"left",mode:"show"},1e3),settingsManager.isMapMenuOpen=!0,O.updateMap();var v=satSet.getSatExtraOnly(selectedSat);$("#map-sat").tooltip({delay:50,html:v.SCC_NUM,position:"left"}),$("#menu-map").addClass("bmenu-item-selected");break}break;case"menu-launches":if(c){c=!1,O.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),"https:"===location.protocol?$.colorbox({href:"https://space.skyrocket.de/doc_chr/lau2020.htm",iframe:!0,width:"80%",height:"80%",fastIframe:!1,closeButton:!1}):$.colorbox({href:"http://space.skyrocket.de/doc_chr/lau2020.htm",iframe:!0,width:"80%",height:"80%",fastIframe:!1,closeButton:!1}),c=!0,$("#menu-launches").addClass("bmenu-item-selected");break;case"menu-about":if(g){g=!1,O.hideSideMenus();break}O.hideSideMenus(),$("#about-menu").effect("slide",{direction:"left",mode:"show"},1e3),g=!0,$("#menu-about").addClass("bmenu-item-selected");break;case"menu-satellite-collision":if(S){S=!1,O.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#socrates-menu").effect("slide",{direction:"left",mode:"show"},1e3),S=!0,I(-1),$("#menu-satellite-collision").addClass("bmenu-item-selected");break;case"menu-settings":if(b){b=!1,O.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#settings-menu").effect("slide",{direction:"left",mode:"show"},1e3),b=!0,$("#menu-settings").addClass("bmenu-item-selected");break;case"menu-editSat":if(isEditSatMenuOpen){isEditSatMenuOpen=!1,O.hideSideMenus();break}if(-1!==selectedSat){settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#editSat-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#menu-editSat").addClass("bmenu-item-selected"),isEditSatMenuOpen=!0,M=satSet.getSatExtraOnly(selectedSat),$("#es-scc").val(M.SCC_NUM);var w=(M.inclination*RAD2DEG).toPrecision(7);(w=w.split("."))[0]=w[0].substr(-3,3),w[1]=w[1].substr(0,4),w=(w[0]+"."+w[1]).toString(),$("#es-inc").val(D(w,8)),$("#es-year").val(M.TLE1.substr(18,2)),$("#es-day").val(M.TLE1.substr(20,12)),$("#es-meanmo").val(M.TLE2.substr(52,11));var y=(M.raan*RAD2DEG).toPrecision(7);(y=y.split("."))[0]=y[0].substr(-3,3),y[1]=y[1].substr(0,4),y=(y[0]+"."+y[1]).toString(),$("#es-rasc").val(D(y,8)),$("#es-ecen").val(M.eccentricity.toPrecision(7).substr(2,7));var T=(M.argPe*RAD2DEG).toPrecision(7);(T=T.split("."))[0]=T[0].substr(-3,3),T[1]=T[1].substr(0,4),T=(T[0]+"."+T[1]).toString(),$("#es-argPe").val(D(T,8)),$("#es-meana").val(M.TLE2.substr(43,8))}else adviceList.editSatDisabled(),$("#menu-editSat:animated").length||$("#menu-editSat").effect("shake",{distance:10});break;case"menu-newLaunch":if(isNewLaunchMenuOpen){isNewLaunchMenuOpen=!1,O.hideSideMenus();break}-1!==selectedSat?(settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#newLaunch-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#menu-newLaunch").addClass("bmenu-item-selected"),isNewLaunchMenuOpen=!0,M=satSet.getSatExtraOnly(selectedSat),$("#nl-scc").val(M.SCC_NUM),$("#nl-inc").val((M.inclination*RAD2DEG).toPrecision(2))):(adviceList.newLaunchDisabled(),$("#menu-newLaunch:animated").length||$("#menu-newLaunch").effect("shake",{distance:10}));break;case"menu-breakup":if(isBreakupMenuOpen){isBreakupMenuOpen=!1,O.hideSideMenus();break}-1!==selectedSat?(settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#breakup-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#menu-breakup").addClass("bmenu-item-selected"),isBreakupMenuOpen=!0,M=satSet.getSatExtraOnly(selectedSat),$("#hc-scc").val(M.SCC_NUM)):(adviceList.breakupDisabled(),$("#menu-breakup:animated").length||$("#menu-breakup").effect("shake",{distance:10}));break;case"menu-customSensor":if(isCustomSensorMenuOpen){isCustomSensorMenuOpen=!1,O.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),satellite.sensorSelected()&&($("#cs-lat").val(sensorManager.selectedSensor.lat),$("#cs-lon").val(sensorManager.selectedSensor.long),$("#cs-hei").val(sensorManager.selectedSensor.obshei)),$("#customSensor-menu").effect("slide",{direction:"left",mode:"show"},1e3),isCustomSensorMenuOpen=!0,$("#menu-customSensor").addClass("bmenu-item-selected");break;case"menu-missile":if(isMissileMenuOpen){isMissileMenuOpen=!1,O.hideSideMenus();break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#missile-menu").effect("slide",{direction:"left",mode:"show"},1e3),$("#menu-missile").addClass("bmenu-item-selected"),isMissileMenuOpen=!0;break;case"menu-fov-bubble":if(!satellite.sensorSelected()){adviceList.bubbleDisabled(),$("#menu-fov-bubble:animated").length||$("#menu-fov-bubble").effect("shake",{distance:10});break}if(settingsManager.isFOVBubbleModeOn&&!settingsManager.isShowSurvFence){settingsManager.isFOVBubbleModeOn=!1,$("#menu-fov-bubble").removeClass("bmenu-item-selected"),satCruncher.postMessage({isShowFOVBubble:"reset",isShowSurvFence:"disable"});break}settingsManager.isSatOverflyModeOn=!1,$("#menu-sat-fov").removeClass("bmenu-item-selected"),settingsManager.isFOVBubbleModeOn=!0,settingsManager.isShowSurvFence=!1,$("#menu-fov-bubble").addClass("bmenu-item-selected"),$("#menu-surveillance").removeClass("bmenu-item-selected"),satCruncher.postMessage({isShowSatOverfly:"reset",isShowFOVBubble:"enable",isShowSurvFence:"disable"});break;case"menu-surveillance":if(!satellite.sensorSelected()){adviceList.survFenceDisabled(),$("#menu-surveillance:animated").length||$("#menu-surveillance").effect("shake",{distance:10});break}if(settingsManager.isShowSurvFence){settingsManager.isShowSurvFence=!1,$("#menu-surveillance").removeClass("bmenu-item-selected"),satCruncher.postMessage({isShowSurvFence:"disable",isShowFOVBubble:"reset"});break}settingsManager.isSatOverflyModeOn=!1,$("#menu-sat-fov").removeClass("bmenu-item-selected"),settingsManager.isShowSurvFence=!0,$("#menu-surveillance").addClass("bmenu-item-selected"),$("#menu-fov-bubble").removeClass("bmenu-item-selected"),satCruncher.postMessage({isShowSatOverfly:"reset",isShowFOVBubble:"enable",isShowSurvFence:"enable"});break;case"menu-sat-fov":if(-1===selectedSat&&""===$("#search").val()){adviceList.satFOVDisabled(),$("#menu-sat-fov:animated").length||$("#menu-sat-fov").effect("shake",{distance:10});break}if(settingsManager.isSatOverflyModeOn){settingsManager.isSatOverflyModeOn=!1,$("#menu-sat-fov").removeClass("bmenu-item-selected"),satCruncher.postMessage({isShowSatOverfly:"reset"});break}$("#menu-fov-bubble").removeClass("bmenu-item-selected"),$("#menu-surveillance").removeClass("bmenu-item-selected"),settingsManager.isShowSurvFence=!1,settingsManager.isFOVBubbleModeOn=!1,settingsManager.isSatOverflyModeOn=!0,""!==$("#search").val()&&searchBox.doSearch($("#search").val());var F=1*$("#satFieldOfView").val();$("#menu-sat-fov").addClass("bmenu-item-selected"),satCruncher.postMessage({isShowFOVBubble:"reset",isShowSurvFence:"disable",isShowSatOverfly:"enable",selectedSatFOV:F}),satSet.setColorScheme(settingsManager.currentColorScheme,!0);break;case"menu-day-night":if(isDayNightToggle){isDayNightToggle=!1,$("#menu-day-night").removeClass("bmenu-item-selected");break}isDayNightToggle=!0,$("#menu-day-night").addClass("bmenu-item-selected");break;case"menu-color-scheme":if(m){O.hideSideMenus(),m=!1;break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#color-scheme-menu").effect("slide",{direction:"left",mode:"show"},1e3),m=!0,$("#menu-color-scheme").addClass("bmenu-item-selected");break;case"menu-constellations":if(d){O.hideSideMenus(),d=!1;break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#constellations-menu").effect("slide",{direction:"left",mode:"show"},1e3),d=!0,$("#menu-constellations").addClass("bmenu-item-selected");break;case"menu-countries":if(u){O.hideSideMenus(),u=!1;break}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus(),$("#countries-menu").effect("slide",{direction:"left",mode:"show"},1e3),u=!0,$("#menu-countries").addClass("bmenu-item-selected");break;case"menu-planetarium":if(isPlanetariumView){isPlanetariumView=!1,O.hideSideMenus(),orbitDisplay.clearInViewOrbit(),cameraType.current=cameraType.DEFAULT,$("#fov-text").html(""),$("#menu-planetarium").removeClass("bmenu-item-selected");break}satellite.sensorSelected()?(cameraType.current=cameraType.PLANETARIUM,$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg"),O.legendMenuChange("planetarium"),starManager.clearConstellations(),isAstronomyView=!1,$("#menu-astronomy").removeClass("bmenu-item-selected"),isPlanetariumView=!0,$("#menu-planetarium").addClass("bmenu-item-selected")):(adviceList.planetariumDisabled(),$("#menu-planetarium:animated").length||$("#menu-planetarium").effect("shake",{distance:10}));break;case"menu-astronomy":if(isAstronomyView){isAstronomyView=!1,O.hideSideMenus(),cameraType.current=cameraType.DEFAULT,O.legendMenuChange("default"),starManager.clearConstellations(),$("#fov-text").html(""),$("#menu-astronomy").removeClass("bmenu-item-selected");break}satellite.sensorSelected()?(starManager.drawAllConstellations(),orbitDisplay.clearInViewOrbit(),cameraType.current=cameraType.ASTRONOMY,$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg"),O.legendMenuChange("astronomy"),isPlanetariumView=!1,$("#menu-planetarium").removeClass("bmenu-item-selected"),isAstronomyView=!0,$("#menu-astronomy").addClass("bmenu-item-selected")):$("#menu-astronomy:animated").length||$("#menu-astronomy").effect("shake",{distance:10});break;case"menu-satview":if(cameraType.current===cameraType.SATELLITE){isSatView=!1,O.hideSideMenus(),cameraType.current=cameraType.DEFAULT,$("#menu-satview").removeClass("bmenu-item-selected");break}-1!==selectedSat?(cameraType.current=cameraType.SATELLITE,$("#menu-satview").addClass("bmenu-item-selected"),isSatView=!0):(adviceList.satViewDisabled(),$("#menu-satview:animated").length||$("#menu-satview").effect("shake",{distance:10}));break;case"menu-record":if(isVideoRecording){recorder.stop(),recorder.save("keeptrack.webm");break}try{recorder.start()}catch(e){console.error("Compatibility Issue"),isVideoRecording=!1,$("#menu-record").removeClass("bmenu-item-selected"),$("#menu-record").addClass("bmenu-item-disabled"),$("#menu-record:animated").length||$("#menu-record").effect("shake",{distance:10})}}}O.hideSideMenus=function(){$.colorbox.close(),$("#sensor-list-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#info-overlay-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#sensor-info-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#watchlist-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#lookangles-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#dops-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#lookanglesmultisite-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#findByLooks-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#twitter-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#map-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#socrates-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#settings-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#editSat-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#newLaunch-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#breakup-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#missile-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#customSensor-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#satcom-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#analysis-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#color-scheme-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#countries-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#constellations-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#about-menu").effect("slide",{direction:"left",mode:"hide"},1e3),$("#menu-sensor-list").removeClass("bmenu-item-selected"),$("#menu-info-overlay").removeClass("bmenu-item-selected"),$("#menu-sensor-info").removeClass("bmenu-item-selected"),$("#menu-watchlist").removeClass("bmenu-item-selected"),$("#menu-lookangles").removeClass("bmenu-item-selected"),$("#menu-dops").removeClass("bmenu-item-selected"),$("#menu-lookanglesmultisite").removeClass("bmenu-item-selected"),$("#menu-launches").removeClass("bmenu-item-selected"),$("#menu-find-sat").removeClass("bmenu-item-selected"),$("#menu-twitter").removeClass("bmenu-item-selected"),$("#menu-map").removeClass("bmenu-item-selected"),$("#menu-satellite-collision").removeClass("bmenu-item-selected"),$("#menu-settings").removeClass("bmenu-item-selected"),$("#menu-editSat").removeClass("bmenu-item-selected"),$("#menu-newLaunch").removeClass("bmenu-item-selected"),$("#menu-breakup").removeClass("bmenu-item-selected"),$("#menu-missile").removeClass("bmenu-item-selected"),$("#menu-satcom").removeClass("bmenu-item-selected"),$("#menu-analysis").removeClass("bmenu-item-selected"),$("#menu-customSensor").removeClass("bmenu-item-selected"),$("#menu-color-scheme").removeClass("bmenu-item-selected"),$("#menu-countries").removeClass("bmenu-item-selected"),$("#menu-constellations").removeClass("bmenu-item-selected"),$("#menu-about").removeClass("bmenu-item-selected"),s=!1,n=!1,o=!1,l=!1,c=!1,r=!1,i=!1,settingsManager.isMapMenuOpen=!1,isLookanglesMenuOpen=!1,isDOPMenuOpen=!1,isLookanglesMultiSiteMenuOpen=!1,S=!1,b=!1,isEditSatMenuOpen=!1,isNewLaunchMenuOpen=!1,isBreakupMenuOpen=!1,isMissileMenuOpen=!1,isCustomSensorMenuOpen=!1,m=!1,p=!1,h=!1,d=!1,u=!1,g=!1},O.updateWatchlist=function(e,t){if(void 0!==e&&(f=e),void 0!==t&&(v=t),f){settingsManager.isThemesNeeded=!0,k=!0;for(var a,s="",n="",r=0;r<f.length;r++)null!=(a=satSet.getSatExtraOnly(f[r]))?n+='<div class="row"><div class="col s3 m3 l3">'+a.SCC_NUM+'</div><div class="col s7 m7 l7">'+a.ON+'</div><div class="col s2 m2 l2 center-align remove-icon"><img class="watchlist-remove" data-sat-id="'+a.id+'" src="images/remove.png"></img></div></div>':f.splice(r,1);for($("#watchlist-list").html(n),r=0;r<f.length;r++)s+=satSet.getSatExtraOnly(f[r]).SCC_NUM,r!==f.length-1&&(s+=",");$("#search").val(s),searchBox.doSearch(s,!0);var i=[];for(r=0;r<f.length;r++)a=satSet.getSatExtraOnly(f[r]),i[r]=a.SCC_NUM;var o=JSON.stringify(i);settingsManager.offline&&localStorage.setItem("watchlistList",o)}};var N=!1;function V(e){N||("A"===e.key.toUpperCase()&&FPSSideSpeed===-settingsManager.FPSSideSpeed&&(isFPSSideSpeedLock=!1),"D"===e.key.toUpperCase()&&FPSSideSpeed===settingsManager.FPSSideSpeed&&(isFPSSideSpeedLock=!1),"S"===e.key.toUpperCase()&&FPSForwardSpeed===-settingsManager.FPSForwardSpeed&&(isFPSForwardSpeedLock=!1),"W"===e.key.toUpperCase()&&FPSForwardSpeed===settingsManager.FPSForwardSpeed&&(isFPSForwardSpeedLock=!1),"Q"===e.key.toUpperCase()&&(FPSVertSpeed===-settingsManager.FPSVertSpeed&&(isFPSVertSpeedLock=!1),cameraType.current===cameraType.ASTRONOMY?FPSYawRate=0:FPSRotateRate=0),"E"===e.key.toUpperCase()&&(FPSVertSpeed===settingsManager.FPSVertSpeed&&(isFPSVertSpeedLock=!1),cameraType.current===cameraType.ASTRONOMY?FPSYawRate=0:FPSRotateRate=0),"J"!==e.key.toUpperCase()&&"L"!==e.key.toUpperCase()||(cameraType.current===cameraType.ASTRONOMY?FPSRotateRate=0:FPSYawRate=0),"I"!==e.key.toUpperCase()&&"K"!==e.key.toUpperCase()||(FPSPitchRate=0),"SHIFT"===e.key.toUpperCase()&&(FPSRun=1,settingsManager.cameraMovementSpeed=.003,settingsManager.cameraMovementSpeedMin=.005,y=1,isFPSForwardSpeedLock||(FPSForwardSpeed=0),isFPSSideSpeedLock||(FPSSideSpeed=0),isFPSVertSpeedLock||(FPSVertSpeed=0)),"ShiftRight"===e.key&&(FPSRun=1,settingsManager.cameraMovementSpeed=.003,settingsManager.cameraMovementSpeedMin=.005,y=1))}function j(e){N||("SHIFT"===e.key.toUpperCase()&&(cameraType.current===cameraType.FPS&&(FPSRun=.05),y=8,settingsManager.cameraMovementSpeed=375e-6,settingsManager.cameraMovementSpeedMin=625e-6),"ShiftRight"===e.key&&cameraType.current===cameraType.FPS&&(FPSRun=3),"W"===e.key.toUpperCase()&&cameraType.current===cameraType.FPS&&(FPSForwardSpeed=settingsManager.FPSForwardSpeed,isFPSForwardSpeedLock=!0),"A"===e.key.toUpperCase()&&cameraType.current===cameraType.FPS&&(FPSSideSpeed=-settingsManager.FPSSideSpeed,isFPSSideSpeedLock=!0),"S"===e.key.toUpperCase()&&cameraType.current===cameraType.FPS&&(FPSForwardSpeed=-settingsManager.FPSForwardSpeed,isFPSForwardSpeedLock=!0),"D"===e.key.toUpperCase()&&cameraType.current===cameraType.FPS&&(FPSSideSpeed=settingsManager.FPSSideSpeed,isFPSSideSpeedLock=!0),"I"===e.key.toUpperCase()&&(cameraType.current!==cameraType.FPS&&cameraType.current!==cameraType.SATELLITE&&cameraType.current!==cameraType.ASTRONOMY||(FPSPitchRate=settingsManager.FPSPitchRate/y)),"K"===e.key.toUpperCase()&&(cameraType.current!==cameraType.FPS&&cameraType.current!==cameraType.SATELLITE&&cameraType.current!==cameraType.ASTRONOMY||(FPSPitchRate=-settingsManager.FPSPitchRate/y)),"J"===e.key.toUpperCase()&&(cameraType.current!==cameraType.FPS&&cameraType.current!==cameraType.SATELLITE||(FPSYawRate=-settingsManager.FPSYawRate/y),cameraType.current===cameraType.ASTRONOMY&&(FPSRotateRate=settingsManager.FPSRotateRate/y)),"L"===e.key.toUpperCase()&&(cameraType.current!==cameraType.FPS&&cameraType.current!==cameraType.SATELLITE||(FPSYawRate=settingsManager.FPSYawRate/y),cameraType.current===cameraType.ASTRONOMY&&(FPSRotateRate=-settingsManager.FPSRotateRate/y)),"Q"===e.key.toUpperCase()&&(cameraType.current===cameraType.FPS&&(FPSVertSpeed=-settingsManager.FPSVertSpeed,isFPSVertSpeedLock=!0),cameraType.current===cameraType.SATELLITE&&(FPSRotateRate=settingsManager.FPSRotateRate/y),cameraType.current===cameraType.ASTRONOMY&&(FPSYawRate=-settingsManager.FPSYawRate/y)),"E"===e.key.toUpperCase()&&(cameraType.current===cameraType.FPS&&(FPSVertSpeed=settingsManager.FPSVertSpeed,isFPSVertSpeedLock=!0),cameraType.current===cameraType.SATELLITE&&(FPSRotateRate=-settingsManager.FPSRotateRate/y),cameraType.current===cameraType.ASTRONOMY&&(FPSYawRate=settingsManager.FPSYawRate/y)))}function U(e){if(!N){switch(e.key.toUpperCase()){case"R":rotateTheEarth=!rotateTheEarth;break;case"C":switch(cameraType.current===cameraType.PLANETARIUM&&orbitDisplay.clearInViewOrbit(),cameraType.current+=1,cameraType.current!==cameraType.PLANETARIUM||satellite.sensorSelected()||(cameraType.current+=1),cameraType.current===cameraType.SATELLITE&&-1===selectedSat&&(cameraType.current+=1),cameraType.current!==cameraType.ASTRONOMY||satellite.sensorSelected()||(cameraType.current+=1),6===cameraType.current&&(cameraType.current=0,FPSPitch=0,FPSYaw=0,FPSxPos=0,FPSyPos=25e3,FPSzPos=0),cameraType.current){case cameraType.DEFAULT:$("#camera-status-box").html("Earth Centered Camera Mode"),$("#fov-text").html(""),zoomLevel=.5;break;case cameraType.OFFSET:$("#camera-status-box").html("Offset Camera Mode"),$("#fov-text").html("");break;case cameraType.FPS:$("#camera-status-box").html("Free Camera Mode"),$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg");break;case cameraType.PLANETARIUM:$("#camera-status-box").html("Planetarium Camera Mode"),O.legendMenuChange("planetarium"),$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg");break;case cameraType.SATELLITE:$("#camera-status-box").html("Satellite Camera Mode"),$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg");break;case cameraType.ASTRONOMY:$("#camera-status-box").html("Astronomy Camera Mode"),O.legendMenuChange("astronomy"),$("#fov-text").html("FOV: "+(100*settingsManager.fieldOfView).toFixed(2)+" deg")}$("#camera-status-box").show(),setTimeout(function(){$("#camera-status-box").hide()},3e3)}switch(e.key){case"!":timeManager.propOffset=0,settingsManager.isPropRateChange=!0;break;case",":timeManager.propOffset-=6e4,settingsManager.isPropRateChange=!0,$("#datetime-input-tb").datepicker("setDate",new Date(timeManager.propRealTime+timeManager.propOffset));break;case".":timeManager.propOffset+=6e4,settingsManager.isPropRateChange=!0,$("#datetime-input-tb").datepicker("setDate",new Date(timeManager.propRealTime+timeManager.propOffset));break;case"<":timeManager.propOffset-=315576e5,settingsManager.isPropRateChange=!0,$("#datetime-input-tb").datepicker("setDate",new Date(timeManager.propRealTime+timeManager.propOffset));break;case">":timeManager.propOffset+=315576e5,settingsManager.isPropRateChange=!0,$("#datetime-input-tb").datepicker("setDate",new Date(timeManager.propRealTime+timeManager.propOffset));break;case"0":timeManager.setPropRateZero(),timeManager.propOffset=timeManager.getPropOffset(),settingsManager.isPropRateChange=!0;break;case"+":case"=":timeManager.propRate<.001&&timeManager.propRate>-.001&&(timeManager.propRate=.001),timeManager.propRate>1e3&&(timeManager.propRate=1e3),timeManager.propRate<0?timeManager.propRate*=.666666:timeManager.propRate*=1.5,timeManager.propOffset=timeManager.getPropOffset(),settingsManager.isPropRateChange=!0;break;case"-":case"_":timeManager.propRate<.001&&timeManager.propRate>-.001&&(timeManager.propRate=-.001),timeManager.propRate<-1e3&&(timeManager.propRate=-1e3),timeManager.propRate>0?timeManager.propRate*=.666666:timeManager.propRate*=1.5,timeManager.propOffset=timeManager.getPropOffset(),settingsManager.isPropRateChange=!0;break;case"1":timeManager.propRate=1,timeManager.propOffset=timeManager.getPropOffset(),settingsManager.isPropRateChange=!0}settingsManager.isPropRateChange&&(satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+timeManager.propRate.toString()}),timeManager.propRealTime=Date.now(),timeManager.propTime())}}$("#search").focus(function(){N=!0}),$("#ui-wrapper").focusin(function(){N=!0}),$("#search").blur(function(){N=!1}),$("#ui-wrapper").focusout(function(){N=!1})}),O.resize2DMap=function(){$(window).width()>$(window).height()?(settingsManager.mapWidth=$(window).width(),mapImageDOM.width(settingsManager.mapWidth),settingsManager.mapHeight=3*settingsManager.mapWidth/4,mapImageDOM.height(settingsManager.mapHeight),mapMenuDOM.width($(window).width())):(settingsManager.mapHeight=$(window).height()-100,mapImageDOM.height(settingsManager.mapHeight),settingsManager.mapWidth=4*settingsManager.mapHeight/3,mapImageDOM.width(settingsManager.mapWidth),mapMenuDOM.width($(window).width()))};var F=[];function L(e){if((!(C.length<=0)||n)&&(timeManager.now>1*a+1e4&&-1===selectedSat&&!isDragging&&zoomLevel===zoomTarget||e)){var t=timeManager.propTime();(F=[]).push("<div>");for(var s=0;s<C.length;s++){var r=satSet.getSatInViewOnly(satSet.getIdFromObjNum(C[s].SCC_NUM)).inview;if(!(C[s].time-t<-3e5)||r){var i=timeManager.dateFormat(C[s].time,"isoTime",!0);r&&C[s].time-t<18e5&&t-C[s].time<18e5?F.push('<div class="row"><h5 class="center-align watchlist-object link" style="color: yellow">'+C[s].SCC_NUM+": "+i+"</h5></div>"):C[s].time-t<6e5&&t-C[s].time<12e5?F.push('<div class="row"><h5 class="center-align watchlist-object link" style="color: blue">'+C[s].SCC_NUM+": "+i+"</h5></div>"):C[s].time-t>0&&F.push('<div class="row"><h5 class="center-align watchlist-object link" style="color: white">'+C[s].SCC_NUM+": "+i+"</h5></div>")}}F.push("</div>"),document.getElementById("info-overlay-content").innerHTML=F.join(""),a=timeManager.now}}$("#satcom-inner-menu>ul>li").click(function(){switch(selectSat(-1),$(this).data("satcom")){case"aehf":$("#loading-screen").fadeIn("slow",function(){drawLineList=[],satCommManager.showLinks("aehf"),ga("send","event","Satcom Menu","aehf","Selected"),$("#loading-screen").fadeOut(),$("#satcom-menu").effect("slide",{direction:"left",mode:"show"},1e3)});break;case"wgs":$("#loading-screen").fadeIn("slow",function(){drawLineList=[],satCommManager.showLinks("wgs"),ga("send","event","Satcom Menu","wgs","Selected"),$("#loading-screen").fadeOut(),$("#satcom-menu").effect("slide",{direction:"left",mode:"show"},1e3)})}}),$("#colors-menu>ul>li").click(function(){selectSat(-1);var e=$(this).data("color");switch("sunlight"!==e&&satCruncher.postMessage({isSunlightView:!1}),e){case"default":O.legendMenuChange("default"),satSet.setColorScheme(ColorScheme.default,!0),ga("send","event","ColorScheme Menu","Default Color","Selected");break;case"velocity":O.legendMenuChange("velocity"),satSet.setColorScheme(ColorScheme.velocity),ga("send","event","ColorScheme Menu","Velocity","Selected");break;case"sunlight":O.legendMenuChange("sunlight"),satSet.setColorScheme(ColorScheme.sunlight,!0),settingsManager.isForceColorScheme=!0,satCruncher.postMessage({isSunlightView:!0}),ga("send","event","ColorScheme Menu","Sunlight","Selected");break;case"near-earth":O.legendMenuChange("near"),satSet.setColorScheme(ColorScheme.leo),ga("send","event","ColorScheme Menu","near-earth","Selected");break;case"deep-space":O.legendMenuChange("deep"),satSet.setColorScheme(ColorScheme.geo),ga("send","event","ColorScheme Menu","Deep-Space","Selected");break;case"lost-objects":$("#search").val(""),$("#loading-screen").fadeIn("slow",function(){satSet.setColorScheme(ColorScheme.lostobjects),ga("send","event","ColorScheme Menu","Lost Objects","Selected"),searchBox.doSearch($("#search").val()),$("#loading-screen").fadeOut()});break;case"rcs":O.legendMenuChange("rcs"),satSet.setColorScheme(ColorScheme.rcs),ga("send","event","ColorScheme Menu","RCS","Selected");break;case"smallsats":O.legendMenuChange("small"),satSet.setColorScheme(ColorScheme.smallsats),ga("send","event","ColorScheme Menu","Small Satellites","Selected");break;case"countries":O.legendMenuChange("countries"),satSet.setColorScheme(ColorScheme.countries),ga("send","event","ColorScheme Menu","Countries","Selected")}settingsManager.isMobileModeEnabled&&mobile.searchToggle(!1),O.hideSideMenus()}),O.useCurrentGeolocationAsSensor=function(){"https:"===location.protocol&&!settingsManager.geolocationUsed&&settingsManager.isMobileModeEnabled&&navigator.geolocation.getCurrentPosition(function(e){settingsManager.geolocation.lat=e.coords.latitude,settingsManager.geolocation.long=e.coords.longitude,settingsManager.geolocation.obshei=0,settingsManager.geolocation.minaz=0,settingsManager.geolocation.maxaz=360,settingsManager.geolocation.minel=30,settingsManager.geolocation.maxel=90,settingsManager.geolocation.minrange=0,settingsManager.geolocation.maxrange=1e5,sensorManager.whichRadar="CUSTOM",$("#cs-lat").val(settingsManager.geolocation.lat).trigger("change"),$("#cs-lon").val(settingsManager.geolocation.long).trigger("change"),$("#cs-hei").val(settingsManager.geolocation.obshei).trigger("change"),$("#cs-telescope").attr("checked","checked"),$("#cs-minaz").attr("disabled",!0),$("#cs-maxaz").attr("disabled",!0),$("#cs-minel").attr("disabled",!0),$("#cs-maxel").attr("disabled",!0),$("#cs-minrange").attr("disabled",!0),$("#cs-maxrange").attr("disabled",!0),$("#cs-minaz-div").hide(),$("#cs-maxaz-div").hide(),$("#cs-minel-div").hide(),$("#cs-maxel-div").hide(),$("#cs-minrange-div").hide(),$("#cs-maxrange-div").hide(),$("#cs-minaz").val(0),$("#cs-maxaz").val(360),$("#cs-minel").val(10),$("#cs-maxel").val(90),$("#cs-minrange").val(100),$("#cs-maxrange").val(5e4),$("#sensor-type").html("Telescope"),$("#sensor-info-title").html("Custom Sensor"),$("#sensor-country").html("Custom Sensor");var t=settingsManager.geolocation.long,a=settingsManager.geolocation.lat,s=settingsManager.geolocation.obshei,n=settingsManager.geolocation.minaz,r=settingsManager.geolocation.maxaz,i=settingsManager.geolocation.minel,o=settingsManager.geolocation.maxel,l=settingsManager.geolocation.minrange,c=settingsManager.geolocation.maxrange;satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+timeManager.propRate.toString(),setlatlong:!0,sensor:{lat:a,long:t,obshei:s,obsminaz:n,obsmaxaz:r,obsminel:i,obsmaxel:o,obsminrange:l,obsmaxrange:c}}),satellite.setobs({lat:a,long:t,obshei:s,obsminaz:n,obsmaxaz:r,obsminel:i,obsmaxel:o,obsminrange:l,obsmaxrange:c}),selectSat(-1),a*=1,t*=1,c>6e3?changeZoom("geo"):changeZoom("leo"),camSnap(latToPitch(a),longToYaw(t))})},O.legendMenuChange=function(e){switch($("#legend-list-default").hide(),$("#legend-list-default-sensor").hide(),$("#legend-list-rcs").hide(),$("#legend-list-sunlight").hide(),$("#legend-list-small").hide(),$("#legend-list-near").hide(),$("#legend-list-deep").hide(),$("#legend-list-velocity").hide(),$("#legend-list-countries").hide(),$("#legend-list-planetarium").hide(),$("#legend-list-astronomy").hide(),e){case"default":satellite.sensorSelected()?$("#legend-list-default-sensor").show():$("#legend-list-default").show();break;case"rcs":$("#legend-list-rcs").show();break;case"small":$("#legend-list-small").show();break;case"near":$("#legend-list-near").show();break;case"deep":$("#legend-list-deep").show();break;case"velocity":$("#legend-list-velocity").show();break;case"sunlight":$("#legend-list-sunlight").show();break;case"countries":$("#legend-list-countries").show();break;case"planetarium":$("#legend-list-planetarium").show();break;case"astronomy":$("#legend-list-astronomy").show();break;case"clear":$("#legend-hover-menu").hide(),satellite.sensorSelected()?$("#legend-list-default-sensor").show():$("#legend-list-default").show()}settingsManager.currentLegend!==e&&($(".legend-green-box").css("background","green"),$(".legend-blue-box").css("background","blue"),$(".legend-gray-box").css("background","gray"),$(".legend-orange-box").css("background","orange"),$(".legend-yellow-box").css("background","yellow"),$(".legend-white-box").css("background","white"),$(".legend-red-box").css("background","red"),$(".legend-purple-box").css("background","purple"),$(".legend-pink-box").css("background","pink"),ColorScheme.objectTypeFlags.green=!0,ColorScheme.objectTypeFlags.blue=!0,ColorScheme.objectTypeFlags.gray=!0,ColorScheme.objectTypeFlags.orange=!0,ColorScheme.objectTypeFlags.yellow=!0,ColorScheme.objectTypeFlags.white=!0,ColorScheme.objectTypeFlags.red=!0,ColorScheme.objectTypeFlags.purple=!0,ColorScheme.objectTypeFlags.pink=!0),settingsManager.currentLegend=e},$("#editSat>div>input").bind({keydown:function(e){_validateNumOnly(e)}}),$("#es-ecen").bind({keydown:function(e){190===e.keyCode&&e.preventDefault()}}),$("#es-day").keyup(function(){$("#es-day").val()<0&&$("#es-day").val("000.00000000"),$("#es-day").val()>367&&$("#es-day").val("365.00000000")}),$("#es-inc").keyup(function(){$("#es-inc").val()<0&&$("#es-inc").val("000.0000"),$("#es-inc").val()>180&&$("#es-inc").val("180.0000")}),$("#es-rasc").keyup(function(){$("#es-rasc").val()<0&&$("#es-rasc").val("000.0000"),$("#es-rasc").val()>360&&$("#es-rasc").val("360.0000")}),$("#es-meanmo").keyup(function(){$("#es-meanmo").val()<0&&$("#es-meanmo").val("00.00000000"),$("#es-meanmo").val()>18&&$("#es-meanmo").val("18.00000000")}),$("#es-argPe").keyup(function(){$("#es-argPe").val()<0&&$("#es-argPe").val("000.0000"),$("#es-argPe").val()>360&&$("#es-argPe").val("360.0000")}),$("#es-meana").keyup(function(){$("#es-meana").val()<0&&$("#es-meana").val("000.0000"),$("#es-meana").val()>360&&$("#es-meana").val("360.0000")}),$("#ms-lat").keyup(function(){$("#ms-lat").val()<-90&&$("#ms-lat").val("-90.000"),$("#ms-lat").val()>90&&$("#ms-lat").val("90.000")}),$("#ms-lon").keyup(function(){$("#ms-lon").val()<-180&&$("#ms-lon").val("-180.000"),$("#ms-lon").val()>180&&$("#ms-lon").val("180.000")}),_validateNumOnly=function(e){-1!==$.inArray(e.keyCode,[46,8,9,27,13,110])||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>=35&&e.keyCode<=40||190===e.keyCode||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)&&e.preventDefault()};var E=$("#search");$("#country-menu>ul>li").click(function(){var e=$(this).data("group");switch(e){case"Canada":void 0===groups.Canada&&(groups.Canada=new groups.SatGroup("countryRegex",/CA/));break;case"China":void 0===groups.China&&(groups.China=new groups.SatGroup("countryRegex",/PRC/));break;case"France":void 0===groups.France&&(groups.France=new groups.SatGroup("countryRegex",/FR/));break;case"India":void 0===groups.India&&(groups.India=new groups.SatGroup("countryRegex",/IND/));break;case"Israel":void 0===groups.Israel&&(groups.Israel=new groups.SatGroup("countryRegex",/ISRA/));break;case"Japan":void 0===groups.Japan&&(groups.Japan=new groups.SatGroup("countryRegex",/JPN/));break;case"Russia":void 0===groups.Russia&&(groups.Russia=new groups.SatGroup("countryRegex",/CIS/));break;case"UnitedKingdom":void 0===groups.UnitedKingdom&&(groups.UnitedKingdom=new groups.SatGroup("countryRegex",/UK/));break;case"UnitedStates":void 0===groups.UnitedStates&&(groups.UnitedStates=new groups.SatGroup("countryRegex",/US/))}_groupSelected(e)}),$("#constellation-menu>ul>li").click(function(){var e=$(this).data("group");switch(e){case"SpaceStations":void 0===groups.SpaceStations&&(groups.SpaceStations=new groups.SatGroup("objNum",[25544,41765]));break;case"GlonassGroup":void 0===groups.GlonassGroup&&(groups.GlonassGroup=new groups.SatGroup("nameRegex",/GLONASS/));break;case"GalileoGroup":void 0===groups.GalileoGroup&&(groups.GalileoGroup=new groups.SatGroup("nameRegex",/GALILEO/));break;case"GPSGroup":void 0===groups.GPSGroup&&(groups.GPSGroup=new groups.SatGroup("nameRegex",/NAVSTAR/));break;case"AmatuerRadio":void 0===groups.AmatuerRadio&&(groups.AmatuerRadio=new groups.SatGroup("objNum",[7530,14781,20442,22826,24278,25338,25397,25544,26931,27607,27844,27848,28895,32785,32788,32789,32791,33493,33498,33499,35932,35933,35935,37224,37839,37841,37855,38760,39090,39134,39136,39161,39417,39430,39436,39439,39440,39444,39469,39770,40014,40021,40024,40025,40030,40032,40042,40043,40057,40071,40074,40377,40378,40379,40380,40654,40719,40900,40903,40906,40907,40908,40910,40911,40912,40926,40927,40928,40931,40967,40968,41168,41171,41340,41459,41460,41465,41474,41600,41619,41789,41932,41935,42017]));break;case"MilitarySatellites":void 0===groups.MilitarySatellites&&(groups.MilitarySatellites=new groups.SatGroup("objNum",[40420,41394,32783,35943,36582,40353,40555,41032,38010,38008,38007,38009,37806,41121,41579,39030,39234,28492,36124,39194,36095,40358,40258,37212,37398,38995,40296,40900,39650,27434,31601,36608,28380,28521,36519,39177,40699,34264,36358,39375,38248,34807,28908,32954,32955,32956,35498,35500,37152,37154,38733,39057,39058,39059,39483,39484,39485,39761,39762,39763,40920,40921,40922,39765,29658,31797,32283,32750,33244,39208,26694,40614,20776,25639,26695,30794,32294,33055,39034,28946,33751,33752,27056,27057,27464,27465,27868,27869,28419,28420,28885,29273,32476,31792,36834,37165,37875,37941,38257,38354,39011,39012,39013,39239,39240,39241,39363,39410,40109,40111,40143,40275,40305,40310,40338,40339,40340,40362,40878,41026,41038,41473,28470,37804,37234,29398,40110,39209,39210,36596]))}_groupSelected(e),searchBox.doSearch($("#search").val())}),_groupSelected=function(e){groups.selectGroup(groups[e]),E.val("");for(var t=groups[e].sats,a=0;a<t.length;a++){var s=groups[e].sats[a].satId,n=satSet.getSat(s).SCC_NUM;a===t.length-1?E.val(E.val()+n):E.val(E.val()+n+",")}searchBox.fillResultBox(groups[e].sats),selectSat(-1),settingsManager.isMobileModeEnabled&&mobile.searchToggle(!0),O.hideSideMenus()},_resetSensorSelected=function(){satellite.setobs(null,!0),satCruncher.postMessage({typ:"offset",dat:timeManager.propOffset.toString()+" "+timeManager.propRate.toString(),setlatlong:!0,resetObserverGd:!0,sensor:satellite.defaultSensor}),satCruncher.postMessage({isShowFOVBubble:"reset",isShowSurvFence:"disable"}),settingsManager.isFOVBubbleModeOn=!1,settingsManager.isShowSurvFence=!1,$("#menu-sensor-info").removeClass("bmenu-item-selected"),$("#menu-fov-bubble").removeClass("bmenu-item-selected"),$("#menu-surveillance").removeClass("bmenu-item-selected"),$("#menu-lookangles").removeClass("bmenu-item-selected"),$("#menu-planetarium").removeClass("bmenu-item-selected"),$("#menu-astronomy").removeClass("bmenu-item-selected"),$("#menu-sensor-info").addClass("bmenu-item-disabled"),$("#menu-fov-bubble").addClass("bmenu-item-disabled"),$("#menu-surveillance").addClass("bmenu-item-disabled"),$("#menu-lookangles").addClass("bmenu-item-disabled"),$("#menu-planetarium").addClass("bmenu-item-disabled"),$("#menu-astronomy").addClass("bmenu-item-disabled"),setTimeout(function(){satSet.setColorScheme(settingsManager.currentColorScheme,!0)},2e3)},_offlineMessage=function(){$("#loader-text").html("Please Contact Theodore Kruczek To Renew Your License <br> theodore.kruczek@gmail.com")};var R=!0;O.footerToggle=function(){R?(R=!1,$("#sat-infobox").addClass("sat-infobox-fullsize"),$("#nav-footer").removeClass("footer-slide-up"),$("#nav-footer").addClass("footer-slide-down"),$("#nav-footer-toggle").html("&#x25B2;")):(R=!0,$("#sat-infobox").removeClass("sat-infobox-fullsize"),$("#nav-footer").removeClass("footer-slide-down"),$("#nav-footer").addClass("footer-slide-up"),$("#nav-footer-toggle").html("&#x25BC;"))},O.startLowPerf=function(){window.location.replace("index.htm?lowperf")},O.panToStar=function(e){var t=satSet.getIdFromStarName(e),a=satSet.getSat(t);console.log(a),debugDrawLine("sat",t),camSnap(latToPitch(-1*a.dec),longToYaw(a.ra))},O.updateMap=function(){if(-1!==selectedSat&&settingsManager.isMapMenuOpen){var e,t=satSet.getSat(selectedSat);satellite.getTEARR(t),(e=mapManager.braun({lon:satellite.degreesLong(satellite.currentTEARR.lon),lat:satellite.degreesLat(satellite.currentTEARR.lat)},{meridian:0,latLimit:90})).x=e.x*settingsManager.mapWidth-10,e.y=e.y/.6366197723675813*settingsManager.mapHeight-10,$("#map-sat").attr("style","left:"+e.x+"px;top:"+e.y+"px;"),satellite.sensorSelected()&&((e=mapManager.braun({lon:satellite.currentSensor.long,lat:satellite.currentSensor.lat},{meridian:0,latLimit:90})).x=e.x*settingsManager.mapWidth-10,e.y=e.y/.6366197723675813*settingsManager.mapHeight-10,$("#map-sensor").attr("style","left:"+e.x+"px;top:"+e.y+"px;z-index:11;"));for(var a=1;a<=50;a++)(e=mapManager.braun({lon:satellite.map(t,a).lon,lat:satellite.map(t,a).lat},{meridian:0,latLimit:90})).x=e.x*settingsManager.mapWidth-3.5,e.y=e.y/.6366197723675813*settingsManager.mapHeight-3.5,e.y>settingsManager.mapHeight/2?$("#map-look"+a).tooltip({delay:50,html:satellite.map(t,a).time,position:"top"}):$("#map-look"+a).tooltip({delay:50,html:satellite.map(t,a).time,position:"bottom"}),1===satellite.map(t,a).inview?$("#map-look"+a).attr("src","images/yellow-square.png"):$("#map-look"+a).attr("src","images/red-square.png"),$("#map-look"+a).attr("style","left:"+e.x+"px;top:"+e.y+"px;"),$("#map-look"+a).attr("time",satellite.map(t,a).time)}},window.uiController=O}();
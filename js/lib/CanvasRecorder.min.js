function CanvasRecorder(e,o){this.start=function(){new Promise((function(e,o){var t;e("https:"===window.location.protocol?"getDisplayMedia"in navigator?navigator.getDisplayMedia(t).catch(e=>null):"getDisplayMedia"in navigator.mediaDevices?navigator.mediaDevices.getDisplayMedia(t).catch(e=>null):(isVideoRecording=!1,$("#menu-record").removeClass("bmenu-item-selected"),$("#menu-record").addClass("bmenu-item-disabled"),$("#menu-record:animated").length||$("#menu-record").effect("shake",{distance:10}),!1):(isVideoRecording=!1,$("#menu-record").removeClass("bmenu-item-selected"),$("#menu-record").addClass("bmenu-item-disabled"),$("#menu-record:animated").length||$("#menu-record").effect("shake",{distance:10}),!1))})).then((function(e){if(0==e)return;isVideoRecording=!0,$("#menu-record").addClass("bmenu-item-selected");let r=e;n.srcObject=e;let s=["video/webm","video/webm,codecs=vp9","video/vp8","video/webm;codecs=vp8","video/webm;codecs=daala","video/webm;codecs=h264","video/mpeg"];for(let e in s)if(MediaRecorder.isTypeSupported(s[e])){d=s[e];break}let l={mimeType:d,videoBitsPerSecond:o||1e7};t=[];try{i=new MediaRecorder(r,l)}catch(e){return isVideoRecording=!1,void $("#menu-record").removeClass("bmenu-item-selected")}i.onstop=c,i.ondataavailable=a,i.start(100)}))},this.stop=function(){i.stop(),n.controls=!0},this.save=function(e){const o=e||"recording.webm",i=new Blob(t,{type:d}),n=window.URL.createObjectURL(i),a=document.createElement("a");a.style.display="none",a.href=n,a.download=o,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),window.URL.revokeObjectURL(n)},100)};var t=[],d=null,i=null;const n=document.createElement("video");function a(e){e.data&&e.data.size>0&&t.push(e.data)}function c(e){const o=new Blob(t,{type:d});n.src=window.URL.createObjectURL(o)}n.style.display="none"}
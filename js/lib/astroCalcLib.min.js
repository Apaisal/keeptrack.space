var astroCalcLib=new AstroCalcLib;function AstroCalcLib(){this.version="1.0.2";var t=Math.PI,o=60/Math.sqrt(650944.0944816993),s=.00108262998905,a=-253215306e-14;AstroCalcLib.constants={},AstroCalcLib.constants.pi=t,AstroCalcLib.constants.twoPi=2*t,AstroCalcLib.constants.deg2rad=t/180,AstroCalcLib.constants.rad2deg=180/t,AstroCalcLib.constants.minutesPerDay=1440,AstroCalcLib.constants.mu=398600.5,AstroCalcLib.constants.earthRadius=6378.137,AstroCalcLib.constants.xke=o,AstroCalcLib.constants.tumin=1/o,AstroCalcLib.constants.j2=s,AstroCalcLib.constants.j3=a,AstroCalcLib.constants.j4=-161098761e-14,AstroCalcLib.constants.j3oj2=a/s,AstroCalcLib.constants.x2o3=2/3,AstroCalcLib.constants.vkmpersec=6378.137*o/60,dspace=function(t){var o,s,a,n,c,i,e,r,d,h,l=AstroCalcLib.constants,p=t.irez,m=t.d2201,x=t.d2211,g=t.d3210,M=t.d3222,b=t.d4410,z=t.d4422,u=t.d5220,C=t.d5232,L=t.d5421,A=t.d5433,f=t.dedt,y=t.del1,v=t.del2,w=t.del3,q=t.didt,j=t.dmdt,P=t.dnodt,k=t.domdt,T=t.argpo,F=t.argpdot,R=t.t,E=t.tc,U=t.gsto,I=t.xfact,D=t.xlamo,S=t.no,Z=t.atime,G=t.em,H=t.argpm,Y=t.inclm,B=t.xli,J=t.mm,K=t.xni,N=t.nodem,O=t.nm,Q=5.7686396,V=.95240898,W=1.8014998,X=1.050833,$=4.4108898,_=0;if(a=(U+.0043752690880113*E)%l.twoPi,G+=f*R,Y+=q*R,H+=k*R,N+=P*R,J+=j*R,s=0,0!==p){(0===Z||R*Z<=0||Math.abs(R)<Math.abs(Z))&&(Z=0,K=S,B=D),o=R>0?720:-720;for(var tt=381;381===tt;)2!==p?(d=y*Math.sin(B-.13130908)+v*Math.sin(2*(B-2.8843198))+w*Math.sin(3*(B-.37448087)),e=K+I,r=y*Math.cos(B-.13130908)+2*v*Math.cos(2*(B-2.8843198))+3*w*Math.cos(3*(B-.37448087)),r*=e):(c=(h=T+F*Z)+h,n=B+B,d=m*Math.sin(c+B-Q)+x*Math.sin(B-Q)+g*Math.sin(h+B-V)+M*Math.sin(-h+B-V)+b*Math.sin(c+n-W)+z*Math.sin(n-W)+u*Math.sin(h+B-X)+C*Math.sin(-h+B-X)+L*Math.sin(h+n-$)+A*Math.sin(-h+n-$),e=K+I,r=m*Math.cos(c+B-Q)+x*Math.cos(B-Q)+g*Math.cos(h+B-V)+M*Math.cos(-h+B-V)+u*Math.cos(h+B-X)+C*Math.cos(-h+B-X)+2*(b*Math.cos(c+n-W)+z*Math.cos(n-W)+L*Math.cos(h+n-$)+A*Math.cos(-h+n-$)),r*=e),Math.abs(R-Z)>=720?(0,tt=381):(s=R-Z,tt=0),381===tt&&(B=B+e*o+259200*d,K=K+d*o+259200*r,Z+=o);O=K+d*s+r*s*s*.5,i=B+e*s+d*s*s*.5,1!==p?(J=i-2*N+2*a,_=O-S):(J=i-N-H+a,_=O-S),O=S+_}return{atime:Z,em:G,argpm:H,inclm:Y,xli:B,mm:J,xni:K,nodem:N,dndt:_,nm:O}},dpper=function(t,o){"use strict";var s,a,n,c,i,e,r,d,h,l,p,m,x,g,M,b,z,u,C,L,A,f,y,v=o.init,w=o.ep,q=o.inclp,j=o.nodep,P=o.argpp,k=o.mp,T=o.opsmode,F=t.e3,R=t.ee2,E=t.peo,U=t.pgho,I=t.pho,D=t.pinco,S=t.plo,Z=t.se2,G=t.se3,H=t.sgh2,Y=t.sgh3,B=t.sgh4,J=t.sh2,K=t.sh3,N=t.si2,O=t.si3,Q=t.sl2,V=t.sl3,W=t.sl4,X=t.t,$=t.xgh2,_=t.xgh3,tt=t.xgh4,ot=t.xh2,st=t.xh3,at=t.xi2,nt=t.xi3,ct=t.xl2,it=t.xl3,et=t.xl4,rt=t.zmol,dt=t.zmos;return y=dt+119459e-10*X,"y"===v&&(y=dt),f=y+.0335*Math.sin(y),g=Z*(r=.5*(z=Math.sin(f))*z-.25)+G*(d=-.5*z*Math.cos(f)),u=N*r+O*d,C=Q*r+V*d+W*z,M=H*r+Y*d+B*z,b=J*r+K*d,y=rt+.00015835218*X,"y"===v&&(y=rt),f=y+.1098*Math.sin(y),h=g+(R*(r=.5*(z=Math.sin(f))*z-.25)+F*(d=-.5*z*Math.cos(f))),m=u+(at*r+nt*d),x=C+(ct*r+it*d+et*z),l=M+($*r+_*d+tt*z),p=b+(ot*r+st*d),"n"===v&&(x-=S,l-=U,p-=I,q+=m-=D,w+=h-=E,c=Math.sin(q),n=Math.cos(q),q>=.2?(P+=l-=n*(p/=c),j+=p,k+=x):(s=c*(e=Math.sin(j)),a=c*(i=Math.cos(j)),s+=p*i+m*n*e,a+=-p*e+m*n*i,(j%=AstroCalcLib.constants.twoPi)<0&&"a"===T&&(j+=AstroCalcLib.constants.twoPi),L=k+P+n*j,L+=x+l-m*j*c,A=j,(j=Math.atan2(s,a))<0&&"a"===T&&(j+=AstroCalcLib.constants.twoPi),Math.abs(A-j)>AstroCalcLib.constants.pi&&(j<A?j+=AstroCalcLib.constants.twoPi:j-=AstroCalcLib.constants.twoPi),P=L-(k+=x)-n*j)),{ep:w,inclp:q,nodep:j,argpp:P,mp:k}}}AstroCalcLib.prototype.degreesLat=function(){"use strict";AstroCalcLib.constants;return function(t){if(t>AstroCalcLib.constants.pi/2||t<-AstroCalcLib.constants.pi/2)return"Err";var o=t/AstroCalcLib.constants.pi*180;return o=o}},AstroCalcLib.prototype.degreesLong=function(){"use strict";AstroCalcLib.constants;return function(t){var o=t/AstroCalcLib.constants.pi*180%360;return o>180?o=360-o:o<-180&&(o=360+o),o}},AstroCalcLib.prototype.ecfToEci=function(t,o){"use strict";return{x:t.x*Math.cos(o)-t.y*Math.sin(o),y:t.x*Math.sin(o)+t.y*Math.cos(o),z:t.z}},AstroCalcLib.prototype.geodeticToEcf=function(t){"use strict";var o=t.longitude,s=t.latitude,a=t.height,n=6378.137,c=(n-6356.7523142)/n,i=2*c-c*c,e=n/Math.sqrt(1-i*(Math.sin(s)*Math.sin(s)));return{x:(e+a)*Math.cos(s)*Math.cos(o),y:(e+a)*Math.cos(s)*Math.sin(o),z:(e*(1-i)+a)*Math.sin(s)}},AstroCalcLib.prototype.topocentric=function(t,o){"use strict";var s=t.longitude,a=t.latitude,n=this.geodeticToEcf(t),c=o.x-n.x,i=o.y-n.y,e=o.z-n.z;return{topS:Math.sin(a)*Math.cos(s)*c+Math.sin(a)*Math.sin(s)*i-Math.cos(a)*e,topE:-Math.sin(s)*c+Math.cos(s)*i,topZ:Math.cos(a)*Math.cos(s)*c+Math.cos(a)*Math.sin(s)*i+Math.sin(a)*e}},AstroCalcLib.prototype.topocentricToLookAngles=function(t){var o=t.topS,s=t.topE,a=t.topZ,n=Math.sqrt(o*o+s*s+a*a),c=Math.asin(a/n);return{azimuth:Math.atan2(-s,o)+AstroCalcLib.constants.pi,elevation:c,rangeSat:n}},AstroCalcLib.prototype.ecfToLookAngles=function(t,o){"use strict";var s=topocentric(t,o);return topocentricToLookAngles(s)},AstroCalcLib.prototype.eciToEcf=function(t,o){"use strict";return{x:t.x*Math.cos(o)+t.y*Math.sin(o),y:t.x*-Math.sin(o)+t.y*Math.cos(o),z:t.z}},AstroCalcLib.prototype.eciToGeodetic=function(t,o){"use strict";for(var s,a=6378.137,n=Math.sqrt(t.x*t.x+t.y*t.y),c=(a-6356.7523142)/a,i=2*c-c*c,e=Math.atan2(t.y,t.x)-o,r=0,d=Math.atan2(t.z,Math.sqrt(t.x*t.x+t.y*t.y));r<20;)s=1/Math.sqrt(1-i*(Math.sin(d)*Math.sin(d))),d=Math.atan2(t.z+a*s*i*Math.sin(d),n),r+=1;return{longitude:e,latitude:d,height:n/Math.cos(d)-a*s}},AstroCalcLib.prototype.dopplerFactor=function(t,o,s){"use strict";var a=Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2)+Math.pow(o.z-t.z,2)),n=o.x+s.x,c=o.y+s.y,i=o.z+s.z,e=Math.sqrt(Math.pow(n-t.x,2)+Math.pow(c-t.y,2)+Math.pow(i-t.z,2))-a;return 1+(e*=e>=0?1:-1)/299792.458},AstroCalcLib.prototype.sgp4=function(t,o){var s,a,n,c,i,e,r,d,h,l,p,m,x,g,M,b,z,u,C,L,A,f,y,v,w,q,j,P,k,T,F,R,E,U,I,D,S,Z,G,H,Y,B,J,K,N,O,Q,V,W,X,$,_,tt,ot,st,at,nt,ct,it,et,rt,dt,ht,lt,pt,mt,xt=AstroCalcLib.constants,gt=0;AstroCalcLib.constants.vkmpersec;t.t=o,t.error=0,rt=t.mo+t.mdot*t.t;var Mt=t.argpo+t.argpdot*t.t;if(lt=t.nodeo+t.nodedot*t.t,w=Mt,ot=rt,I=t.t*t.t,at=lt+t.nodecf*I,J=1-t.cc1*t.t,K=t.bstar*t.cc4*t.t,N=t.t2cof*I,1!==t.isimp){L=t.omgcof*t.t;var bt=1+t.eta*Math.cos(rt);ot=rt+(H=L+t.xmcof*(bt*bt*bt-t.delmo)),w=Mt-H,S=(D=I*t.t)*t.t,J=J-t.d2*I-t.d3*D-t.d4*S,K+=t.bstar*t.cc5*(Math.sin(ot)-t.sinmao),N=N+t.t3cof*D+S*(t.t4cof+t.t*t.t5cof)}st=t.no;var zt=t.ecco;if(tt=t.inclo,"d"===t.method){Z=t.t;var ut={irez:t.irez,d2201:t.d2201,d2211:t.d2211,d3210:t.d3210,d3222:t.d3222,d4410:t.d4410,d4422:t.d4422,d5220:t.d5220,d5232:t.d5232,d5421:t.d5421,d5433:t.d5433,dedt:t.dedt,del1:t.del1,del2:t.del2,del3:t.del3,didt:t.didt,dmdt:t.dmdt,dnodt:t.dnodt,domdt:t.domdt,argpo:t.argpo,argpdot:t.argpdot,t:t.t,tc:Z,gsto:t.gsto,xfact:t.xfact,xlamo:t.xlamo,no:t.no,atime:t.atime,em:zt,argpm:w,inclm:tt,xli:t.xli,mm:ot,xni:t.xni,nodem:at,nm:st},Ct=dspace(ut);zt=Ct.em,w=Ct.argpm,tt=Ct.inclm,ot=Ct.mm,at=Ct.nodem,Ct.dndt,st=Ct.nm}if(st<=0)return t.error=2,[!1,!1];if(s=Math.pow(xt.xke/st,xt.x2o3)*J*J,st=xt.xke/Math.pow(s,1.5),(zt-=K)>=1||zt<-.001)return t.error=1,[!1,!1];zt<1e-6&&(zt=1e-6),it=(ot+=t.no*N)+w+at,H=1-zt*zt,at%=xt.twoPi;var Lt=zt;if(ct=tt,q=w%=xt.twoPi,mt=at,et=ot=((it%=xt.twoPi)-w-at)%xt.twoPi,g=Math.sin(tt),x=Math.cos(tt),"d"===t.method){var At={inclo:t.inclo,init:"n",ep:Lt,inclp:ct,nodep:mt,argpp:q,mp:et,opsmode:t.operationmod},ft=dpper(t,At);if(Lt=ft.ep,ct=ft.inclp,mt=ft.nodep,q=ft.argpp,et=ft.mp,ct<0&&(ct=-ct,mt+=xt.pi,q-=xt.pi),Lt<0||Lt>1)return t.error=3,[!1,!1]}"d"===t.method&&(g=Math.sin(ct),x=Math.cos(ct),t.aycof=-.5*xt.j3oj2*g,Math.abs(x+1)>1.5e-12?t.xlcof=-.25*xt.j3oj2*g*(3+5*x)/(1+x):t.xlcof=-.25*xt.j3oj2*g*(3+5*x)/1.5e-12),a=Lt*Math.cos(q),H=1/(s*(1-Lt*Lt)),n=Lt*Math.sin(q)+H*t.aycof,y=O=(et+q+mt+H*t.xlcof*a-mt)%xt.twoPi,G=9999.9;for(var yt=1;Math.abs(G)>=1e-12&&yt<=10;)l=Math.sin(y),G=(O-n*(h=Math.cos(y))+a*l-y)/(G=1-h*a-l*n),Math.abs(G)>=.95&&(G=G>0?.95:-.95),y+=G,yt+=1;if(A=a*h+n*l,v=a*l-n*h,(j=s*(1-(f=a*a+n*n)))<0)return t.error=4,[!1,!1];F=s*(1-A),T=Math.sqrt(s)*v/F,E=Math.sqrt(j)/F,C=s/F*(l-n-a*(H=v/(1+(c=Math.sqrt(1-f))))),u=s/F*(h-a+n*H),U=Math.atan2(C,u),d=(u+u)*C,r=1-2*C*C,H=1/j,B=(Y=.5*xt.j2*H)*H,"d"===t.method&&(M=x*x,t.con41=3*M-1,t.x1mth2=1-M,t.x7thm1=7*M-1),gt=F*(1-1.5*B*c*t.con41)+.5*Y*t.x1mth2*r,U-=.25*B*t.x7thm1*d,pt=mt+1.5*B*x*d,nt=ct+1.5*B*x*g*r;var vt=T-st*Y*t.x1mth2*d/xt.xke;return R=E+st*Y*(t.x1mth2*r+1.5*t.con41)/xt.xke,z=Math.sin(U),b=Math.cos(U),e=Math.sin(pt),i=Math.cos(pt),m=Math.sin(nt),V=(ht=i*(p=Math.cos(nt)))*z+e*b,W=m*z,X=(dt=-e*p)*b-i*z,$=ht*b-e*z,_=m*b,(P={x:0,y:0,z:0}).x=gt*(Q=dt*z+i*b)*xt.earthRadius,P.y=gt*V*xt.earthRadius,P.z=gt*W*xt.earthRadius,(k={x:0,y:0,z:0}).x=(vt*Q+R*X)*AstroCalcLib.constants.vkmpersec,k.y=(vt*V+R*$)*AstroCalcLib.constants.vkmpersec,k.z=(vt*W+R*_)*AstroCalcLib.constants.vkmpersec,gt<1?(t.error=6,{position:!1,velocity:!1}):{position:P,velocity:k}},AstroCalcLib.prototype.propagate=function(){"use strict";var t=arguments[0],o=Array.prototype.slice.call(arguments,1),s=(jday.apply(null,o)-t.jdsatepoch)*AstroCalcLib.constants.minutesPerDay;return sgp4(t,s)},AstroCalcLib.prototype.dscom=function(t){"use strict";var o,s,a,n,c,i,e,r,d,h,l,p,m,x,g,M,b,z,u,C,L,A,f,y,v,w,q,j,P,k,T,F,R,E,U,I,D,S,Z,G,H,Y,B,J,K,N,O,Q,V,W,X,$,_,tt,ot,st,at,nt,ct,it,et,rt,dt,ht,lt,pt,mt,xt,gt,Mt,bt,zt,ut,Ct,Lt,At,ft=t.epoch,yt=t.ep,vt=t.argpp,wt=t.tc,qt=t.inclp,jt=t.nodep,Pt=t.np,kt=(t.e3,t.ee2,t.peo,t.pgho,t.pho,t.pinco,t.plo,t.se2,t.se3,t.sgh2,t.sgh3,t.sgh4,t.sh2,t.sh3,t.si2,t.si3,t.sl2,t.sl3,t.sl4,t.xgh2,t.xgh3,t.xgh4,t.xh2,t.xh3,t.xi2,t.xi3,t.xl2,t.xl3,t.xl4,t.zmol),Tt=t.zmos,Ft=Pt,Rt=yt,Et=Math.sin(jt),Ut=Math.cos(jt),It=Math.sin(vt),Dt=Math.cos(vt),St=Math.sin(qt),Zt=Math.cos(qt),Gt=Rt*Rt;l=1-Gt;var Ht=Math.sqrt(l);var Yt=ft+18261.5+wt/1440;f=(4.523602-.00092422029*Yt)%AstroCalcLib.constants.twoPi,x=Math.sin(f),U=.91375164-.03568096*(m=Math.cos(f)),F=.089683511*x/(I=Math.sqrt(1-U*U));var Bt=5.8351514+.001944368*Yt;D=.39785416*x/I,S=(T=Math.sqrt(1-F*F))*m+.91744867*F*x,D=Bt+(D=Math.atan2(D,S))-f,q=Math.cos(D),j=Math.sin(D),v=.1945905,w=-.98088458,R=.91744867,E=.39785416,P=Ut,k=Et,p=29864797e-13,y=1/Ft;for(var Jt=0;Jt<2;)xt=-6*(o=v*P+w*R*k)*(c=-St*(e=-v*k+w*R*P)+Zt*(r=w*E))+Gt*(-24*(g=o*Dt+(s=Zt*e+St*r)*It)*(L=c*Dt)-6*(b=-o*It+s*Dt)*(u=c*It)),gt=-6*(o*(i=-St*(d=w*k+v*R*P)+Zt*(h=v*E))+(a=-w*P+v*R*k)*c)+Gt*(-24*((M=a*Dt+(n=Zt*d+St*h)*It)*L+g*(A=i*Dt))+-6*(b*(C=i*It)+(z=-a*It+n*Dt)*u)),Mt=-6*a*i+Gt*(-24*M*A-6*z*C),bt=6*s*c+Gt*(24*g*u-6*b*L),zt=6*(n*c+s*i)+Gt*(24*(M*u+g*C)-6*(z*L+b*A)),ut=6*n*i+Gt*(24*M*C-6*z*A),lt=(lt=3*(o*o+s*s)+(Ct=12*g*g-3*b*b)*Gt)+lt+l*Ct,pt=(pt=6*(o*a+s*n)+(Lt=24*g*M-6*b*z)*Gt)+pt+l*Lt,mt=(mt=3*(a*a+n*n)+(At=12*M*M-3*z*z)*Gt)+mt+l*At,ct=-.5*(it=p*y)/Ht,nt=-15*Rt*(et=it*Ht),rt=g*b+M*z,dt=M*b+g*z,ht=M*z-g*b,1===(Jt+=1)&&(Z=nt,G=ct,H=it,Y=et,B=rt,J=dt,K=ht,N=lt,O=pt,Q=mt,V=xt,W=gt,X=Mt,$=bt,_=zt,tt=ut,ot=Ct,st=Lt,at=At,v=q,w=j,R=U,E=I,P=T*Ut+F*Et,k=Et*T-Ut*F,p=4.7968065e-7);return kt=(4.7199672+.2299715*Yt-Bt)%AstroCalcLib.constants.twoPi,Tt=(6.2565837+.017201977*Yt)%AstroCalcLib.constants.twoPi,{snodm:Et,cnodm:Ut,sinim:St,cosim:Zt,sinomm:It,cosomm:Dt,day:Yt,e3:2*nt*ht,ee2:2*nt*dt,em:Rt,emsq:Gt,gam:Bt,peo:0,pgho:0,pho:0,pinco:0,plo:0,rtemsq:Ht,se2:2*Z*J,se3:2*Z*K,sgh2:2*Y*st,sgh3:2*Y*(at-ot),sgh4:-18*Y*.01675,sh2:-2*G*_,sh3:-2*G*(tt-$),si2:2*G*W,si3:2*G*(X-V),sl2:-2*H*O,sl3:-2*H*(Q-N),sl4:-2*H*(-21-9*Gt)*.01675,s1:nt,s2:ct,s3:it,s4:et,s5:rt,s6:dt,s7:ht,ss1:Z,ss2:G,ss3:H,ss4:Y,ss5:B,ss6:J,ss7:K,sz1:N,sz2:O,sz3:Q,sz11:V,sz12:W,sz13:X,sz21:$,sz22:_,sz23:tt,sz31:ot,sz32:st,sz33:at,xgh2:2*et*Lt,xgh3:2*et*(At-Ct),xgh4:-18*et*.0549,xh2:-2*ct*zt,xh3:-2*ct*(ut-bt),xi2:2*ct*gt,xi3:2*ct*(Mt-xt),xl2:-2*it*pt,xl3:-2*it*(mt-lt),xl4:-2*it*(-21-9*Gt)*.0549,nm:Ft,z1:lt,z2:pt,z3:mt,z11:xt,z12:gt,z13:Mt,z21:bt,z22:zt,z23:ut,z31:Ct,z32:Lt,z33:At,zmol:kt,zmos:Tt}},AstroCalcLib.prototype.dsinit=function(t){"use strict";var o,s,a,n,c,i,e,r,d,h,l,p,m,x,g,M,b,z,u=t.cosim,C=t.emsq,L=t.argpo,A=t.s1,f=t.s2,y=t.s3,v=t.s4,w=t.s5,q=t.sinim,j=t.ss1,P=t.ss2,k=t.ss3,T=t.ss4,F=t.ss5,R=t.sz1,E=t.sz3,U=t.sz11,I=t.sz13,D=t.sz21,S=t.sz23,Z=t.sz31,G=t.sz33,H=t.t,Y=t.tc,B=t.gsto,J=t.mo,K=t.mdot,N=t.no,O=t.nodeo,Q=t.nodedot,V=t.xpidot,W=t.z1,X=t.z3,$=t.z11,_=t.z13,tt=t.z21,ot=t.z23,st=t.z31,at=t.z33,nt=t.ecco,ct=t.eccsq,it=t.em,et=t.argpm,rt=t.inclm,dt=t.mm,ht=t.nm,lt=t.nodem,pt=t.irez,mt=t.atime,xt=t.d2201,gt=t.d2211,Mt=t.d3210,bt=t.d3222,zt=t.d4410,ut=t.d4422,Ct=t.d5220,Lt=t.d5232,At=t.d5421,ft=t.d5433,yt=t.dedt,vt=t.didt,wt=t.dmdt,qt=t.dnodt,jt=t.domdt,Pt=t.del1,kt=t.del2,Tt=t.del3,Ft=t.xfact,Rt=t.xlamo,Et=t.xli,Ut=t.xni,It=.0043752690880113,Dt=.00015835218,St=119459e-10;pt=0,.0034906585<ht<.0052359877&&(pt=1),.00826<=ht<=.00924&&it>=.5&&(pt=2);var Zt=j*St*F,Gt=P*St*(U+I),Ht=-St*k*(R+E-14-6*C),Yt=T*St*(Z+G-6),Bt=-St*P*(D+S);(rt<.052359877||rt>AstroCalcLib.constants.pi-.052359877)&&(Bt=0),0!==q&&(Bt/=q);var Jt=Yt-u*Bt;yt=Zt+A*Dt*w,vt=Gt+f*Dt*($+_),wt=Ht-Dt*y*(W+X-14-6*C);var Kt=v*Dt*(st+at-6),Nt=-Dt*f*(tt+ot);(rt<.052359877||rt>AstroCalcLib.constants.pi-.052359877)&&(Nt=0),jt=Jt+Kt,qt=Bt,0!==q&&(jt-=u/q*Nt,qt+=Nt/q);if(g=(B+Y*It)%AstroCalcLib.constants.twoPi,it+=yt*H,rt+=vt*H,et+=jt*H,lt+=qt*H,dt+=wt*H,0!==pt){if(M=Math.pow(ht/AstroCalcLib.constants.xke,2/3),2===pt){b=u*u;var Ot=it,Qt=C;z=(it=nt)*(C=ct),it<=.65?(a=3.616-13.247*it+16.29*C,n=117.39*it-19.302-228.419*C+156.591*z,c=109.7927*it-18.9068-214.6334*C+146.5816*z,i=242.694*it-41.122-471.094*C+313.953*z,e=841.88*it-146.407-1629.014*C+1083.435*z,r=3017.977*it-532.114-5740.032*C+3708.276*z):(a=331.819*it-72.099-508.738*C+266.724*z,n=1582.851*it-346.844-2415.925*C+1246.113*z,c=1554.908*it-342.585-2366.899*C+1215.972*z,i=4758.686*it-1052.797-7193.992*C+3651.957*z,e=16178.11*it-3581.69-24462.77*C+12422.52*z,r=it>.715?29936.92*it-5149.66-54087.36*C+31324.56*z:1464.74-4664.75*it+3763.64*C),it<.7?(l=4988.61*it-919.2277-9064.77*C+5542.21*z,d=4568.6173*it-822.71072-8491.4146*C+5337.524*z,h=4690.25*it-853.666-8624.77*C+5341.4*z):(l=161616.52*it-37995.78-229838.2*C+109377.94*z,d=218913.95*it-51752.104-309468.16*C+146349.42*z,h=170470.89*it-40023.88-242699.48*C+115605.82*z),xt=(m=17891679e-13*(x=3*(ht*ht)*(M*M)))*(o=.75*(1+2*u+b))*(-.306-.44*(it-.64)),gt=m*(1.5*(p=q*q))*a,Mt=(m=3.7393792e-7*(x*=M))*(1.875*q*(1-2*u-3*b))*n,bt=m*(-1.875*q*(1+2*u-3*b))*c,zt=(m=2*(x*=M)*7.3636953e-9)*(35*p*o)*i,ut=m*(39.375*p*p)*e,Ct=(m=1.1428639e-7*(x*=M))*(9.84375*q*(p*(1-2*u-5*b)+.33333333*(4*u-2+6*b)))*r,Lt=m*(q*(4.92187512*p*(-2-4*u+10*b)+6.56250012*(1+2*u-3*b)))*h,At=(m=2*x*2.1765803e-9)*(29.53125*q*(2-8*u+b*(8*u-12+10*b)))*d,ft=m*(29.53125*q*(-2-8*u+b*(12+8*u-10*b)))*l,Rt=(J+O+O-g-g)%AstroCalcLib.constants.twoPi,Ft=K+wt+2*(Q+qt-It)-N,it=Ot,C=Qt}1===pt&&(s=1+u,kt=2*(Pt=3*ht*ht*M*M)*(o=.75*(1+u)*(1+u))*(1+C*(.8125*C-2.5))*17891679e-13,Tt=3*Pt*(s*=1.875*s*s)*(1+C*(6.60937*C-6))*2.2123015e-7*M,Pt=Pt*(.9375*q*q*(1+3*u)-.75*(1+u))*(n=1+2*C)*21460748e-13*M,Rt=(J+O+L-g)%AstroCalcLib.constants.twoPi,Ft=K+V-It+wt+jt+qt-N),Et=Rt,Ut=N,mt=0,ht=N+0}return{em:it,argpm:et,inclm:rt,mm:dt,nm:ht,nodem:lt,irez:pt,atime:mt,d2201:xt,d2211:gt,d3210:Mt,d3222:bt,d4410:zt,d4422:ut,d5220:Ct,d5232:Lt,d5421:At,d5433:ft,dedt:yt,didt:vt,dmdt:wt,dndt:0,dnodt:qt,domdt:jt,del1:Pt,del2:kt,del3:Tt,xfact:Ft,xlamo:Rt,xli:Et,xni:Ut}},AstroCalcLib.prototype.initl=function(t){"use strict";var o,s,a,n,c,i=t.ecco,e=t.epoch,r=t.inclo,d=t.no,h=(t.method,t.opsmode),l=i*i,p=1-l,m=Math.sqrt(p),x=Math.cos(r),g=x*x;o=Math.pow(AstroCalcLib.constants.xke/d,AstroCalcLib.constants.x2o3);var M=(s=.75*AstroCalcLib.constants.j2*(3*g-1)/(m*p))/(o*o);d/=1+(M=s/((a=o*(1-M*M-M*(1/3+134*M*M/81)))*a));var b=Math.pow(AstroCalcLib.constants.xke/d,AstroCalcLib.constants.x2o3),z=Math.sin(r),u=1-5*g,C=-u-g-g,L=1/b,A=(n=b*p)*n,f=b*(1-i);if("n","a"===h){var y=e-7305,v=Math.floor(y+1e-8),w=y-v,q=.017202791694070362;(c=(1.7321343856509375+q*v+(q+AstroCalcLib.constants.twoPi)*w+y*y*5.075514194322695e-15)%AstroCalcLib.constants.twoPi)<0&&(c+=AstroCalcLib.constants.twoPi)}else c=this.gstime(e+2433281.5);return{no:d,method:"n",ainv:L,ao:b,con41:C,con42:u,cosio:x,cosio2:g,eccsq:l,omeosq:p,posq:A,rp:f,rteosq:m,sinio:z,gsto:c}},AstroCalcLib.prototype.sgp4init=function(t,o){"use strict";var s,a,n,c,i,e,r,d,h,l,p,m,x,g,M,b,z,u,C,L,A,f,y,v,w,q,j,P,k,T,F,R,E,U,I,D,S,Z,G,H,Y,B,J,K,N,O,Q,V,W,X,$,_,tt,ot,st,at,nt=o.opsmode,ct=o.satn,it=o.epoch,et=o.xbstar,rt=o.xecco,dt=o.xargpo,ht=o.xinclo,lt=o.xmo,pt=o.xno,mt=o.xnodeo;t.isimp=0,t.method="n",t.aycof=0,t.con41=0,t.cc1=0,t.cc4=0,t.cc5=0,t.d2=0,t.d3=0,t.d4=0,t.delmo=0,t.eta=0,t.argpdot=0,t.omgcof=0,t.sinmao=0,t.t=0,t.t2cof=0,t.t3cof=0,t.t4cof=0,t.t5cof=0,t.x1mth2=0,t.x7thm1=0,t.mdot=0,t.nodedot=0,t.xlcof=0,t.xmcof=0,t.nodecf=0,t.irez=0,t.d2201=0,t.d2211=0,t.d3210=0,t.d3222=0,t.d4410=0,t.d4422=0,t.d5220=0,t.d5232=0,t.d5421=0,t.d5433=0,t.dedt=0,t.del1=0,t.del2=0,t.del3=0,t.didt=0,t.dmdt=0,t.dnodt=0,t.domdt=0,t.e3=0,t.ee2=0,t.peo=0,t.pgho=0,t.pho=0,t.pinco=0,t.plo=0,t.se2=0,t.se3=0,t.sgh2=0,t.sgh3=0,t.sgh4=0,t.sh2=0,t.sh3=0,t.si2=0,t.si3=0,t.sl2=0,t.sl3=0,t.sl4=0,t.gsto=0,t.xfact=0,t.xgh2=0,t.xgh3=0,t.xgh4=0,t.xh2=0,t.xh3=0,t.xi2=0,t.xi3=0,t.xl2=0,t.xl3=0,t.xl4=0,t.xlamo=0,t.zmol=0,t.zmos=0,t.atime=0,t.xli=0,t.xni=0,t.bstar=et,t.ecco=rt,t.argpo=dt,t.inclo=ht,t.mo=lt,t.no=pt,t.nodeo=mt,t.operationmode=nt;var xt=78/AstroCalcLib.constants.earthRadius+1,gt=42/AstroCalcLib.constants.earthRadius,Mt=gt*gt*gt*gt;t.init="y",t.t=0;var bt={satn:ct,ecco:t.ecco,epoch:it,inclo:t.inclo,no:t.no,method:t.method,opsmode:t.operationmode},zt=this.initl(bt);t.no=zt.no;var ut=zt.ao;t.con41=zt.con41;var Ct=zt.con42,Lt=zt.cosio,At=zt.cosio2,ft=zt.eccsq,yt=zt.omeosq,vt=zt.posq,wt=zt.rp,qt=zt.rteosq,jt=zt.sinio;if(t.gsto=zt.gsto,t.error=0,yt>=0||t.no>=0){if(t.isimp=0,wt<220/AstroCalcLib.constants.earthRadius+1&&(t.isimp=1),j=xt,A=Mt,(u=(wt-1)*AstroCalcLib.constants.earthRadius)<156){j=u-78,u<98&&(j=20);var Pt=(120-j)/AstroCalcLib.constants.earthRadius;A=Pt*Pt*Pt*Pt,j=j/AstroCalcLib.constants.earthRadius+1}C=1/vt,O=1/(ut-j),t.eta=ut*t.ecco*O,m=t.eta*t.eta,p=t.ecco*t.eta,L=Math.abs(1-m),c=(r=(e=A*Math.pow(O,4))/Math.pow(L,3.5))*t.no*(ut*(1+1.5*m+p*(4+m))+.375*AstroCalcLib.constants.j2*O/L*t.con41*(8+3*m*(8+m))),t.cc1=t.bstar*c,i=0,t.ecco>1e-4&&(i=-2*e*O*AstroCalcLib.constants.j3oj2*t.no*jt/t.ecco),t.x1mth2=1-At,t.cc4=2*t.no*r*ut*yt*(t.eta*(2+.5*m)+t.ecco*(.5+2*m)-AstroCalcLib.constants.j2*O/(ut*L)*(-3*t.con41*(1-2*p+m*(1.5-.5*p))+.75*t.x1mth2*(2*m-p*(1+m))*Math.cos(2*t.argpo))),t.cc5=2*r*ut*yt*(1+2.75*(m+p)+p*m),d=At*At,K=.5*(J=1.5*AstroCalcLib.constants.j2*C*t.no)*AstroCalcLib.constants.j2*C,N=-.46875*AstroCalcLib.constants.j4*C*C*t.no,t.mdot=t.no+.5*J*qt*t.con41+.0625*K*qt*(13-78*At+137*d),t.argpdot=-.5*J*Ct+.0625*K*(7-114*At+395*d)+N*(3-36*At+49*d),V=-J*Lt,t.nodedot=V+(.5*K*(4-19*At)+2*N*(3-7*At))*Lt,Q=t.argpdot+t.nodedot,t.omgcof=t.bstar*i*Math.cos(t.argpo),t.xmcof=0,t.ecco>1e-4&&(t.xmcof=-2/3*e*t.bstar/p),t.nodecf=3.5*yt*V*t.cc1,t.t2cof=1.5*t.cc1,Math.abs(Lt+1)>1.5e-12?t.xlcof=-.25*AstroCalcLib.constants.j3oj2*jt*(3+5*Lt)/(1+Lt):t.xlcof=-.25*AstroCalcLib.constants.j3oj2*jt*(3+5*Lt)/1.5e-12,t.aycof=-.5*AstroCalcLib.constants.j3oj2*jt;var kt=1+t.eta*Math.cos(t.mo);if(t.delmo=kt*kt*kt,t.sinmao=Math.sin(t.mo),t.x7thm1=7*At-1,2*AstroCalcLib.constants.pi/t.no>=225){t.method="d",t.isimp=1,Y=0,M=t.inclo;var Tt={epoch:it,ep:t.ecco,argpp:t.argpo,tc:Y,inclp:t.inclo,nodep:t.nodeo,np:t.no,e3:t.e3,ee2:t.ee2,peo:t.peo,pgho:t.pgho,pho:t.pho,pinco:t.pinco,plo:t.plo,se2:t.se2,se3:t.se3,sgh2:t.sgh2,sgh3:t.sgh3,sgh4:t.sgh4,sh2:t.sh2,sh3:t.sh3,si2:t.si2,si3:t.si3,sl2:t.sl2,sl3:t.sl3,sl4:t.sl4,xgh2:t.xgh2,xgh3:t.xgh3,xgh4:t.xgh4,xh2:t.xh2,xh3:t.xh3,xi2:t.xi2,xi3:t.xi3,xl2:t.xl2,xl3:t.xl3,xl4:t.xl4,zmol:t.zmol,zmos:t.zmos},Ft=this.dscom(Tt);Ft.snodm,Ft.cnodm,a=Ft.sinim,s=Ft.cosim,Ft.sinomm,Ft.cosomm,Ft.day,t.e3=Ft.e3,t.ee2=Ft.ee2,h=Ft.em,l=Ft.emsq,Ft.gam,t.peo=Ft.peo,t.pgho=Ft.pgho,t.pho=Ft.pho,t.pinco=Ft.pinco,t.plo=Ft.plo,Ft.rtemsq,t.se2=Ft.se2,t.se3=Ft.se3,t.sgh2=Ft.sgh2,t.sgh3=Ft.sgh3,t.sgh4=Ft.sgh4,t.sh2=Ft.sh2,t.sh3=Ft.sh3,t.si2=Ft.si2,t.si3=Ft.si3,t.sl2=Ft.sl2,t.sl3=Ft.sl3,t.sl4=Ft.sl4,f=Ft.s1,y=Ft.s2,v=Ft.s3,w=Ft.s4,q=Ft.s5,Ft.s6,Ft.s7,P=Ft.ss1,k=Ft.ss2,T=Ft.ss3,F=Ft.ss4,R=Ft.ss5,Ft.ss6,Ft.ss7,E=Ft.sz1,Ft.sz2,U=Ft.sz3,I=Ft.sz11,Ft.sz12,D=Ft.sz13,S=Ft.sz21,Ft.sz22,Z=Ft.sz23,G=Ft.sz31,Ft.sz32,H=Ft.sz33,t.xgh2=Ft.xgh2,t.xgh3=Ft.xgh3,t.xgh4=Ft.xgh4,t.xh2=Ft.xh2,t.xh3=Ft.xh3,t.xi2=Ft.xi2,t.xi3=Ft.xi3,t.xl2=Ft.xl2,t.xl3=Ft.xl3,t.xl4=Ft.xl4,z=Ft.nm,W=Ft.z1,Ft.z2,X=Ft.z3,$=Ft.z11,Ft.z12,_=Ft.z13,tt=Ft.z21,Ft.z22,ot=Ft.z23,st=Ft.z31,Ft.z32,at=Ft.z33,t.zmol=Ft.zmol,t.zmos=Ft.zmos;var Rt={inclo:M,init:t.init,ep:t.ecco,inclp:t.inclo,nodep:t.nodeo,argpp:t.argpo,mp:t.mo,opsmode:t.operationmode},Et=dpper(t,Rt);t.ecco=Et.ep,t.inclo=Et.inclp,t.nodeo=Et.nodep,t.argpo=Et.argpp,t.mo=Et.mp,x=0,g=0,b=0;var Ut={cosim:s,emsq:l,argpo:t.argpo,s1:f,s2:y,s3:v,s4:w,s5:q,sinim:a,ss1:P,ss2:k,ss3:T,ss4:F,ss5:R,sz1:E,sz3:U,sz11:I,sz13:D,sz21:S,sz23:Z,sz31:G,sz33:H,t:t.t,tc:Y,gsto:t.gsto,mo:t.mo,mdot:t.mdot,no:t.no,nodeo:t.nodeo,nodedot:t.nodedot,xpidot:Q,z1:W,z3:X,z11:$,z13:_,z21:tt,z23:ot,z31:st,z33:at,ecco:t.ecco,eccsq:ft,em:h,argpm:x,inclm:M,mm:b,nm:z,nodem:g,irez:t.irez,atime:t.atime,d2201:t.d2201,d2211:t.d2211,d3210:t.d3210,d3222:t.d3222,d4410:t.d4410,d4422:t.d4422,d5220:t.d5220,d5232:t.d5232,d5421:t.d5421,d5433:t.d5433,dedt:t.dedt,didt:t.didt,dmdt:t.dmdt,dnodt:t.dnodt,domdt:t.domdt,del1:t.del1,del2:t.del2,del3:t.del3,xfact:t.xfact,xlamo:t.xlamo,xli:t.xli,xni:t.xni},It=this.dsinit(Ut);h=It.em,x=It.argpm,M=It.inclm,b=It.mm,z=It.nm,g=It.nodem,t.irez=It.irez,t.atime=It.atime,t.d2201=It.d2201,t.d2211=It.d2211,t.d3210=It.d3210,t.d3222=It.d3222,t.d4410=It.d4410,t.d4422=It.d4422,t.d5220=It.d5220,t.d5232=It.d5232,t.d5421=It.d5421,t.d5433=It.d5433,t.dedt=It.dedt,t.didt=It.didt,t.dmdt=It.dmdt,It.dndt,t.dnodt=It.dnodt,t.domdt=It.domdt,t.del1=It.del1,t.del2=It.del2,t.del3=It.del3,t.xfact=It.xfact,t.xlamo=It.xlamo,t.xli=It.xli,t.xni=It.xni}1!==t.isimp&&(n=t.cc1*t.cc1,t.d2=4*ut*O*n,B=t.d2*O*t.cc1/3,t.d3=(17*ut+j)*B,t.d4=.5*B*ut*O*(221*ut+31*j)*t.cc1,t.t3cof=t.d2+2*n,t.t4cof=.25*(3*t.d3+t.cc1*(12*t.d2+10*n)),t.t5cof=.2*(3*t.d4+12*t.cc1*t.d3+6*t.d2*t.d2+15*n*(2*t.d2+n)))}return this.sgp4(t,0),t.init="n",!0},AstroCalcLib.prototype.twoline2satrec=function(t,o){"use strict";var s=1440/(2*AstroCalcLib.constants.pi),a=0,n={error:0};n.satnum=t.substring(2,7),n.epochyr=parseInt(t.substring(18,20),10),n.epochdays=parseFloat(t.substring(20,32)),n.ndot=parseFloat(t.substring(33,43)),n.nddot=parseFloat("."+parseInt(t.substring(44,50),10)+"E"+t.substring(50,52)),n.bstar=parseFloat(t.substring(53,54)+"."+parseInt(t.substring(54,59),10)+"E"+t.substring(59,61)),parseInt(t.substring(64,68),10),n.inclo=parseFloat(o.substring(8,16)),n.nodeo=parseFloat(o.substring(17,25)),n.ecco=parseFloat("."+o.substring(26,33)),n.argpo=parseFloat(o.substring(34,42)),n.mo=parseFloat(o.substring(43,51)),n.no=parseFloat(o.substring(52,63)),parseFloat(o.substring(63,68)),n.no=n.no/s,n.a=Math.pow(n.no*AstroCalcLib.constants.tumin,-2/3),n.ndot=n.ndot/(1440*s),n.nddot=n.nddot/(1440*s*1440),n.inclo=n.inclo*AstroCalcLib.constants.deg2rad,n.nodeo=n.nodeo*AstroCalcLib.constants.deg2rad,n.argpo=n.argpo*AstroCalcLib.constants.deg2rad,n.mo=n.mo*AstroCalcLib.constants.deg2rad,n.alta=n.a*(1+n.ecco)-1,n.altp=n.a*(1-n.ecco)-1,a=n.epochyr<57?n.epochyr+2e3:n.epochyr+1900;var c=this.days2mdhms(a,n.epochdays),i=c.mon,e=c.day,r=c.hr,d=c.minute,h=c.sec;n.jdsatepoch=function(t,o,s,a,n,c){if(t instanceof Date){var i=t;t=i.getUTCFullYear(),o=i.getUTCMonth()+1,s=i.getUTCDate(),a=i.getUTCHours(),n=i.getUTCMinutes(),c=i.getUTCSeconds()}return 367*t-Math.floor(7*(t+Math.floor((o+9)/12))*.25)+Math.floor(275*o/9)+s+1721013.5+((c/60+n)/60+a)/24}(a,i,e,r,d,h);var l={opsmode:"i",satn:n.satnum,epoch:n.jdsatepoch-2433281.5,xbstar:n.bstar,xecco:n.ecco,xargpo:n.argpo,xinclo:n.inclo,xmo:n.mo,xno:n.no,xnodeo:n.nodeo};return this.sgp4init(n,l),n},AstroCalcLib.prototype.days2mdhms=function(t,o){"use strict";var s=[31,28,31,30,31,30,31,31,30,31,30,31],a=Math.floor(o);t%4==0&&(s=[31,29,31,30,31,30,31,31,30,31,30,31]);for(var n=1,c=0;a>c+s[n-1]&&n<12;)c+=s[n-1],n+=1;var i=n,e=a-c,r=24*(o-a),d=Math.floor(r);r=60*(r-d);var h=Math.floor(r);return{mon:i,day:e,hr:d,minute:h,sec:60*(r-h)}},AstroCalcLib.prototype.gstime=function(t){"use strict";var o=(t-2451545)/36525,s=-62e-7*o*o*o+.093104*o*o+3164400184.812866*o+67310.54841;return(s=s*AstroCalcLib.constants.deg2rad/240%AstroCalcLib.constants.twoPi)<0&&(s+=AstroCalcLib.constants.twoPi),s};
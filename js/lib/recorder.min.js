function CanvasRecorder(e,o){this.start=function(){let e=["video/webm","video/webm,codecs=vp9","video/vp8","video/webm;codecs=vp8","video/webm;codecs=daala","video/webm;codecs=h264","video/mpeg"];for(let o in e)if(MediaRecorder.isTypeSupported(e[o])){d=e[o];break}let c={mimeType:d,videoBitsPerSecond:o||25e5};t=[];try{n=new MediaRecorder(i,c)}catch(e){return void alert("MediaRecorder is not supported by this browser.")}n.onstop=r,n.ondataavailable=a,n.start(100)},this.stop=function(){n.stop(),c.controls=!0},this.save=function(e){const o=e||"recording.webm",n=new Blob(t,{type:d}),i=window.URL.createObjectURL(n),c=document.createElement("a");c.style.display="none",c.href=i,c.download=o,document.body.appendChild(c),c.click(),setTimeout(()=>{document.body.removeChild(c),window.URL.revokeObjectURL(i)},100)};var t=[],d=null,n=null,i=e.captureStream();if(null==typeof i||!i)return;const c=document.createElement("video");function a(e){e.data&&e.data.size>0&&t.push(e.data)}function r(e){const o=new Blob(t,{type:d});c.src=window.URL.createObjectURL(o)}c.style.display="none"}
function getParameterByName(t,i){i||(i=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var e=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(i);return e?e[2]?decodeURIComponent(e[2].replace(/\+/g," ")):"":null}function _pad0(t,i){return t.length<i?_pad0("0"+t,i):t}$(document).ready(function(){var t=getParameterByName("scc"),e=getParameterByName("popup");function o(){if("undefined"!=typeof satInfoList)if(null!==parent.window.satInfoList?satInfoList=parent.window.satInfoList:parent.window.satInfoList=satInfoList,"undefined"!=typeof jsTLEfile){var t;for(t=0;t<jsTLEfile.length;t++){var i=_pad0(jsTLEfile[t].TLE1.substr(2,5).trim(),5);i!==$("#editor-scc").val()&&parseInt(i).toString()!==$("#editor-scc").val()||($("#editor-ON").val(jsTLEfile[t].ON||"Unknown"),$("#editor-C").val(jsTLEfile[t].C||"Unknown"),$("#editor-LV").val(jsTLEfile[t].LV||"Unknown"),$("#editor-URL").val(jsTLEfile[t].URL||""),$("#editor-R").val(jsTLEfile[t].R||"0.1"),$("#editor-NOTES").val(jsTLEfile[t].NOTES||"NSTR"),$("#editor-TTP").val(jsTLEfile[t].TTP||"NSTR"),$("#editor-fmissed").val(jsTLEfile[t].fmissed||"No"),$("#editor-oRPO").val(jsTLEfile[t].oRPO||"No"),$("#editor-constellation").val(jsTLEfile[t].constellation||"NSTR"),$("#editor-associates").val(jsTLEfile[t].associates||"NSTR"),$("#editor-maneuver").val(jsTLEfile[t].maneuver||"No"),void 0!==jsTLEfile[t].LS&&$("#editor-LS").val(jsTLEfile[t].LS))}for(t=0;t<satInfoList.length;t++)satInfoList[t].SCC!==$("#editor-scc").val()&&parseInt(satInfoList[t].SCC).toString()!==$("#editor-scc").val()||($("#editor-ON").val(satInfoList[t].ON||"Unknown"),$("#editor-C").val(satInfoList[t].C||"Unknown"),$("#editor-LV").val(satInfoList[t].LV||"Unknown"),$("#editor-URL").val(satInfoList[t].URL||""),$("#editor-R").val(satInfoList[t].R||"0.1"),$("#editor-NOTES").val(satInfoList[t].NOTES||"NSTR"),$("#editor-TTP").val(satInfoList[t].TTP||"NSTR"),$("#editor-fmissed").val(satInfoList[t].fmissed||"No"),$("#editor-oRPO").val(satInfoList[t].oRPO||"No"),$("#editor-constellation").val(satInfoList[t].constellation||"NSTR"),$("#editor-associates").val(satInfoList[t].associates||"NSTR"),$("#editor-maneuver").val(satInfoList[t].maneuver||"No"),void 0!==satInfoList[t].LS&&$("#editor-LS").val(satInfoList[t].LS))}else console.error("No TLE.js File");else console.error("No satInfo.js File")}function a(){var t=!1;for(i=0;i<satInfoList.length;i++)satInfoList[i].SCC!==$("#editor-scc").val()&&parseInt(satInfoList[i].SCC).toString()!==$("#editor-scc").val()||(satInfoList[i].ON=$("#editor-ON").val(),satInfoList[i].C=$("#editor-C").val(),satInfoList[i].LV=$("#editor-LV").val(),satInfoList[i].LS=$("#editor-LS").val(),satInfoList[i].R=$("#editor-R").val(),satInfoList[i].URL=$("#editor-URL").val(),satInfoList[i].NOTES=$("#editor-NOTES").val(),satInfoList[i].TTP=$("#editor-TTP").val(),satInfoList[i].FMISSED=$("#editor-fmissed").val(),satInfoList[i].ORPO=$("#editor-oRPO").val(),satInfoList[i].constellation=$("#editor-constellation").val(),satInfoList[i].associates=$("#editor-associates").val(),satInfoList[i].maneuver=$("#editor-maneuver").val(),void 0!=typeof parent.window.satSet&&parent.window.satSet.mergeSat(satInfoList[i]),t=!0);if(!1===t&&null!=$("#editor-scc").val()){var e={};e.SCC=$("#editor-scc").val(),e.ON=$("#editor-ON").val(),e.C=$("#editor-C").val(),e.LV=$("#editor-LV").val(),e.LS=$("#editor-LS").val(),e.R=$("#editor-R").val(),e.URL=$("#editor-URL").val(),e.NOTES=$("#editor-NOTES").val(),e.TTP=$("#editor-TTP").val(),e.FMISSED=$("#editor-fmissed").val(),e.ORPO=$("#editor-oRPO").val(),e.constellation=$("#editor-constellation").val(),e.associates=$("#editor-associates").val(),e.maneuver=$("#editor-maneuver").val(),satInfoList.push(e),void 0!=typeof parent.window.satSet&&parent.window.satSet.mergeSat(e)}}null!=t&&($("#editor-scc").val(t),o()),void 0==e&&($("#editor-open").css("display","block"),o()),$("#editor-scc").bind("input",function(){o()}),$("#editor-ON").bind("input",function(){a()}),$("#editor-C").bind("input",function(){a()}),$("#editor-LV").bind("input",function(){a()}),$("#editor-LS").bind("input",function(){a()}),$("#editor-URL").bind("input",function(){a()}),$("#editor-TTP").bind("input",function(){a()}),$("#editor-fmissed").bind("input",function(){a()}),$("#editor-oRPO").bind("input",function(){a()}),$("#editor-constellation").bind("input",function(){a()}),$("#editor-associates").bind("input",function(){a()}),$("#editor-maneuver").bind("input",function(){a()}),$("#editor-save").click(function(t){a();var i="var satInfoList = "+JSON.stringify(satInfoList),e=new Blob([i],{type:"octet/stream"});saveAs(e,"satInfo.js"),t.preventDefault()}),$("#editor-open").click(function(t){$("#editor-file").trigger("click")}),$("#editor-file").change(function(t){if(window.FileReader){var i=new FileReader;i.onload=function(t){if(2===t.target.readyState)if(t.target.error)console.log("error");else{for(var i=[],e=t.target.result.split(/\r?\n/),o=0;o<e.length/2;o++){astroCalcLib.TLE1=e[2*o],astroCalcLib.TLE2=e[2*o+1];var a=_pad0(parseInt(astroCalcLib.TLE1.substr(2,5).trim()).toString(),5);astroCalcLib.SCC=a,i[o]={}}var n="var satelliteList = "+JSON.stringify(i),s=new Blob([n],{type:"octet/stream"});saveAs(s,"extra.js")}},i.readAsText(t.target.files[0]),t.preventDefault()}})}),$.ajaxSetup({cache:!1});